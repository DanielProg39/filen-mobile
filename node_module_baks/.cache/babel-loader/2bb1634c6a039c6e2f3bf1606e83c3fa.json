{"ast":null,"code":"import { io } from \"socket.io-client\";\n\nconst utils = require(\"../utils/utils\");\n\nexport function initSocket() {\n  if (!this.state.isLoggedIn) {\n    return false;\n  }\n\n  if (typeof window.customVariables.socket !== \"undefined\") {\n    return false;\n  }\n\n  window.customVariables.socket = io(\"https://socket.filen.io\", {\n    path: \"\",\n    reconnect: true,\n    transports: [\"websocket\"]\n  });\n  console.log(window.customVariables.socket);\n  window.customVariables.socket.on(\"connect\", () => {\n    this.setState({\n      socketConnected: true\n    });\n    window.customVariables.socket.emit(\"auth\", {\n      apiKey: this.state.userAPIKey || \"\"\n    });\n    clearInterval(window.customVariables.socketPingInterval);\n    window.customVariables.socketPingInterval = setInterval(() => {\n      window.customVariables.socket.emit(\"heartbeat\");\n    }, 5000);\n    console.log(\"Connected to socket server\");\n  });\n  window.customVariables.socket.on(\"disconnect\", err => {\n    console.log(err);\n    this.setState({\n      socketConnected: false\n    });\n    console.log(\"Disconnected from socket server\");\n  });\n  window.customVariables.socket.on(\"new-event\", data => {\n    console.log(data);\n  });\n}\nexport function sendSocket(message, data) {\n  if (!this.state.isLoggedIn) {\n    return false;\n  }\n\n  if (typeof window.customVariables.socket == \"undefined\") {\n    return false;\n  }\n\n  window.customVariables.socket.emit(message, data);\n  return true;\n}","map":{"version":3,"sources":["/Users/jan/Documents/filen/app/src/components/socket.js"],"names":["io","utils","require","initSocket","state","isLoggedIn","window","customVariables","socket","path","reconnect","transports","console","log","on","setState","socketConnected","emit","apiKey","userAPIKey","clearInterval","socketPingInterval","setInterval","err","data","sendSocket","message"],"mappings":"AAAA,SAASA,EAAT,QAAmB,kBAAnB;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAAC,gBAAD,CAArB;;AAEA,OAAO,SAASC,UAAT,GAAqB;AACxB,MAAG,CAAC,KAAKC,KAAL,CAAWC,UAAf,EAA0B;AACtB,WAAO,KAAP;AACH;;AAED,MAAG,OAAOC,MAAM,CAACC,eAAP,CAAuBC,MAA9B,KAAyC,WAA5C,EAAwD;AACpD,WAAO,KAAP;AACH;;AAEDF,EAAAA,MAAM,CAACC,eAAP,CAAuBC,MAAvB,GAAgCR,EAAE,CAAC,yBAAD,EAA4B;AAChES,IAAAA,IAAI,EAAE,EAD0D;AAEhEC,IAAAA,SAAS,EAAE,IAFqD;AAGhEC,IAAAA,UAAU,EAAE,CACX,WADW;AAHoD,GAA5B,CAAlC;AAQAC,EAAAA,OAAO,CAACC,GAAR,CAAYP,MAAM,CAACC,eAAP,CAAuBC,MAAnC;AAEAF,EAAAA,MAAM,CAACC,eAAP,CAAuBC,MAAvB,CAA8BM,EAA9B,CAAiC,SAAjC,EAA4C,MAAM;AAC9C,SAAKC,QAAL,CAAc;AACVC,MAAAA,eAAe,EAAE;AADP,KAAd;AAIAV,IAAAA,MAAM,CAACC,eAAP,CAAuBC,MAAvB,CAA8BS,IAA9B,CAAmC,MAAnC,EAA2C;AAChDC,MAAAA,MAAM,EAAE,KAAKd,KAAL,CAAWe,UAAX,IAAyB;AADe,KAA3C;AAIAC,IAAAA,aAAa,CAACd,MAAM,CAACC,eAAP,CAAuBc,kBAAxB,CAAb;AAEAf,IAAAA,MAAM,CAACC,eAAP,CAAuBc,kBAAvB,GAA4CC,WAAW,CAAC,MAAM;AAC1DhB,MAAAA,MAAM,CAACC,eAAP,CAAuBC,MAAvB,CAA8BS,IAA9B,CAAmC,WAAnC;AACH,KAFsD,EAEpD,IAFoD,CAAvD;AAIAL,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACH,GAhBD;AAkBAP,EAAAA,MAAM,CAACC,eAAP,CAAuBC,MAAvB,CAA8BM,EAA9B,CAAiC,YAAjC,EAAgDS,GAAD,IAAS;AACpDX,IAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ;AAEA,SAAKR,QAAL,CAAc;AACVC,MAAAA,eAAe,EAAE;AADP,KAAd;AAIAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACH,GARD;AAUAP,EAAAA,MAAM,CAACC,eAAP,CAAuBC,MAAvB,CAA8BM,EAA9B,CAAiC,WAAjC,EAA+CU,IAAD,IAAU;AACpDZ,IAAAA,OAAO,CAACC,GAAR,CAAYW,IAAZ;AACH,GAFD;AAGH;AAED,OAAO,SAASC,UAAT,CAAoBC,OAApB,EAA6BF,IAA7B,EAAkC;AACrC,MAAG,CAAC,KAAKpB,KAAL,CAAWC,UAAf,EAA0B;AACtB,WAAO,KAAP;AACH;;AAED,MAAG,OAAOC,MAAM,CAACC,eAAP,CAAuBC,MAA9B,IAAwC,WAA3C,EAAuD;AACnD,WAAO,KAAP;AACH;;AAEDF,EAAAA,MAAM,CAACC,eAAP,CAAuBC,MAAvB,CAA8BS,IAA9B,CAAmCS,OAAnC,EAA4CF,IAA5C;AAEA,SAAO,IAAP;AACH","sourcesContent":["import { io } from \"socket.io-client\"\n\nconst utils = require(\"../utils/utils\")\n\nexport function initSocket(){\n    if(!this.state.isLoggedIn){\n        return false\n    }\n\n    if(typeof window.customVariables.socket !== \"undefined\"){\n        return false\n    }\n\n    window.customVariables.socket = io(\"https://socket.filen.io\", {\n\t\tpath: \"\",\n\t\treconnect: true,\n\t\ttransports: [\n\t\t\t\"websocket\"\n\t\t]\n\t})\n\n    console.log(window.customVariables.socket)\n\n    window.customVariables.socket.on(\"connect\", () => {\n        this.setState({\n            socketConnected: true\n        })\n\n        window.customVariables.socket.emit(\"auth\", {\n\t\t\tapiKey: this.state.userAPIKey || \"\"\n\t\t})\n\n        clearInterval(window.customVariables.socketPingInterval)\n\n        window.customVariables.socketPingInterval = setInterval(() => {\n            window.customVariables.socket.emit(\"heartbeat\")\n        }, 5000)\n\n        console.log(\"Connected to socket server\")\n    })\n\n    window.customVariables.socket.on(\"disconnect\", (err) => {\n        console.log(err)\n\n        this.setState({\n            socketConnected: false\n        })\n\n        console.log(\"Disconnected from socket server\")\n    })\n\n    window.customVariables.socket.on(\"new-event\", (data) => {\n        console.log(data)\n    })\n}\n\nexport function sendSocket(message, data){\n    if(!this.state.isLoggedIn){\n        return false\n    }\n\n    if(typeof window.customVariables.socket == \"undefined\"){\n        return false\n    }\n\n    window.customVariables.socket.emit(message, data)\n\n    return true\n}"]},"metadata":{},"sourceType":"module"}