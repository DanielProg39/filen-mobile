{"ast":null,"code":"import _classCallCheck from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _wrapNativeSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";import _regeneratorRuntime from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import*as language from\"../utils/language\";import{loadingController,modalController,popoverController,alertController,actionSheetController}from\"@ionic/core\";import*as Ionicons from'ionicons/icons';import{Capacitor,HapticsImpactStyle,Plugins}from\"@capacitor/core\";import{FileOpener}from\"@ionic-native/file-opener\";var utils=require(\"../utils/utils\");export function updateItemList(){return _updateItemList.apply(this,arguments);}function _updateItemList(){_updateItemList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this5=this;var routeEx,parent,loading,items,res,alert,_alert,i,folder,folderName,uploadDate,item,iItems,_i2,_i3,usrPrivKey,_alert2,_alert3,_alert4,_i4,_folder,_folderName,_uploadDate,_item,_i5,file,decryptedMetadata,_uploadDate2,offline,_item2,_alert5,_alert6,_i6,_folder2,_folderName2,_uploadDate3,_item3,_i7,_file,metadata,_uploadDate4,_offline,_item4,_alert7,_alert8,_i8,_folder3,_folderName3,_uploadDate5,_item5,_i9,_file2,_metadata,_uploadDate6,_offline2,_item6,scrollTo;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(this.state.isLoggedIn){_context3.next=2;break;}return _context3.abrupt(\"return\",this.showLogin());case 2:if(!(this.state.userAPIKey.length<=16)){_context3.next=4;break;}return _context3.abrupt(\"return\",this.showLogin());case 4:if(Capacitor.isNative){Capacitor.Plugins.Keyboard.hide();Plugins.SplashScreen.hide();}this.setState({searchbarOpen:false,mainSearchTerm:\"\"});routeEx=window.location.hash.split(\"/\");parent=routeEx[routeEx.length-1];_context3.next=10;return loadingController.create({message:\"\"});case 10:loading=_context3.sent;loading.present();window.customVariables.currentThumbnailURL=window.location.href;items=[];if(!(parent==\"base\")){_context3.next=45;break;}_context3.prev=15;_context3.next=18;return utils.apiRequest(\"POST\",\"/v1/user/baseFolders\",{apiKey:this.state.userAPIKey});case 18:res=_context3.sent;_context3.next=29;break;case 21:_context3.prev=21;_context3.t0=_context3[\"catch\"](15);console.log(_context3.t0);window.customFunctions.dismissLoader();_context3.next=27;return alertController.create({header:\"\",subHeader:\"\",message:language.get(this.state.lang,\"apiRequestError\"),buttons:[language.get(this.state.lang,\"alertOkButton\").toUpperCase()]});case 27:alert=_context3.sent;return _context3.abrupt(\"return\",alert.present());case 29:if(res.status){_context3.next=36;break;}console.log(res.message);window.customFunctions.dismissLoader();_context3.next=34;return alertController.create({header:\"\",subHeader:\"\",message:language.get(this.state.lang,\"apiRequestError\"),buttons:[language.get(this.state.lang,\"alertOkButton\").toUpperCase()]});case 34:_alert=_context3.sent;return _context3.abrupt(\"return\",_alert.present());case 36:items.push({type:\"folder\",uuid:\"default\",name:\"Default\",date:language.get(this.state.lang,\"defaultFolder\"),timestamp:+new Date()/1000-86400*3650,parent:\"base\",receiverId:0,receiverEmail:\"\",sharerId:0,sharerEmail:\"\"});for(i=0;i<res.data.folders.length;i++){folder=res.data.folders[i];folderName=utils.decryptCryptoJSFolderName(folder.name,this.state.userMasterKeys,folder.uuid);uploadDate=new Date(folder.timestamp*1000).toString().split(\" \");item={type:\"folder\",uuid:folder.uuid,name:utils.sanitizeHTML(folderName),date:uploadDate[1]+\" \"+uploadDate[2]+\" \"+uploadDate[3]+\" \"+uploadDate[4],timestamp:folder.timestamp,parent:\"base\",receiverId:0,receiverEmail:\"\",sharerId:0,sharerEmail:\"\"};items.push(item);window.customVariables.cachedFolders[folder.uuid]=item;}iItems=[];iItems.push(items[0]);for(_i2=0;_i2<items.length;_i2++){if(items[_i2].name.toLowerCase()==\"filen sync\"&&items[_i2].uuid!==\"default\"){iItems.push(items[_i2]);}}for(_i3=0;_i3<items.length;_i3++){if(items[_i3].name.toLowerCase()!==\"filen sync\"&&items[_i3].uuid!==\"default\"){iItems.push(items[_i3]);}}items=iItems;_context3.next=160;break;case 45:if(!(routeEx[1]==\"shared-in\")){_context3.next=111;break;}_context3.prev=46;_context3.next=49;return window.crypto.subtle.importKey(\"pkcs8\",utils._base64ToArrayBuffer(this.state.userPrivateKey),{name:\"RSA-OAEP\",hash:\"SHA-512\"},true,[\"decrypt\"]);case 49:usrPrivKey=_context3.sent;_context3.next=60;break;case 52:_context3.prev=52;_context3.t1=_context3[\"catch\"](46);console.log(_context3.t1);window.customFunctions.dismissLoader();_context3.next=58;return alertController.create({header:\"\",subHeader:\"\",message:language.get(this.state.lang,\"unknownDeviceError\"),buttons:[language.get(this.state.lang,\"alertOkButton\").toUpperCase()]});case 58:_alert2=_context3.sent;return _context3.abrupt(\"return\",_alert2.present());case 60:_context3.prev=60;_context3.next=63;return utils.apiRequest(\"POST\",\"/v1/user/shared/in\",{apiKey:this.state.userAPIKey,uuid:parent,folders:JSON.stringify([\"shred-in\"]),page:1,app:\"true\"});case 63:res=_context3.sent;_context3.next=74;break;case 66:_context3.prev=66;_context3.t2=_context3[\"catch\"](60);console.log(_context3.t2);window.customFunctions.dismissLoader();_context3.next=72;return alertController.create({header:\"\",subHeader:\"\",message:language.get(this.state.lang,\"apiRequestError\"),buttons:[language.get(this.state.lang,\"alertOkButton\").toUpperCase()]});case 72:_alert3=_context3.sent;return _context3.abrupt(\"return\",_alert3.present());case 74:if(res.status){_context3.next=81;break;}console.log(res.message);window.customFunctions.dismissLoader();_context3.next=79;return alertController.create({header:\"\",subHeader:\"\",message:language.get(this.state.lang,\"apiRequestError\"),buttons:[language.get(this.state.lang,\"alertOkButton\").toUpperCase()]});case 79:_alert4=_context3.sent;return _context3.abrupt(\"return\",_alert4.present());case 81:_i4=0;case 82:if(!(_i4<res.data.folders.length)){_context3.next=94;break;}_folder=res.data.folders[_i4];_context3.next=86;return utils.decryptFolderNamePrivateKey(_folder.metadata,usrPrivKey,_folder.uuid);case 86:_folderName=_context3.sent;_uploadDate=new Date(_folder.timestamp*1000).toString().split(\" \");_item={type:\"folder\",uuid:_folder.uuid,name:utils.sanitizeHTML(_folderName),date:_uploadDate[1]+\" \"+_uploadDate[2]+\" \"+_uploadDate[3]+\" \"+_uploadDate[4],timestamp:_folder.timestamp,parent:_folder.parent,receiverId:0,receiverEmail:\"\",sharerId:_folder.sharerId,sharerEmail:_folder.sharerEmail};items.push(_item);window.customVariables.cachedFolders[_folder.uuid]=_item;case 91:_i4++;_context3.next=82;break;case 94:_i5=0;case 95:if(!(_i5<res.data.uploads.length)){_context3.next=109;break;}file=res.data.uploads[_i5];_context3.next=99;return utils.decryptFileMetadataPrivateKey(file.metadata,usrPrivKey,file.uuid);case 99:decryptedMetadata=_context3.sent;_uploadDate2=new Date(file.timestamp*1000).toString().split(\" \");offline=false;if(typeof window.customVariables.offlineSavedFiles[file.uuid]!==\"undefined\"){offline=true;}_item2={type:\"file\",uuid:file.uuid,name:utils.sanitizeHTML(decryptedMetadata.name),mime:utils.sanitizeHTML(decryptedMetadata.mime),size:parseInt(decryptedMetadata.size),key:utils.sanitizeHTML(decryptedMetadata.key),bucket:file.bucket,region:file.region,parent:file.parent,rm:file.rm,chunks:file.chunks,date:_uploadDate2[1]+\" \"+_uploadDate2[2]+\" \"+_uploadDate2[3]+\" \"+_uploadDate2[4],timestamp:file.timestamp,receiverId:0,receiverEmail:\"\",sharerId:file.sharerId,sharerEmail:file.sharerEmail,offline:offline,thumbnail:typeof window.customVariables.thumbnailBlobCache[file.uuid]!==\"undefined\"?window.customVariables.thumbnailBlobCache[file.uuid]:undefined};items.push(_item2);window.customVariables.cachedFiles[file.uuid]=_item2;case 106:_i5++;_context3.next=95;break;case 109:_context3.next=160;break;case 111:if(!(routeEx[1]==\"shared-out\")){_context3.next=137;break;}_context3.prev=112;_context3.next=115;return utils.apiRequest(\"POST\",\"/v1/user/shared/out\",{apiKey:this.state.userAPIKey,uuid:parent,folders:JSON.stringify([\"default\"]),page:1,app:\"true\",receiverId:this.state.currentReceiverId});case 115:res=_context3.sent;_context3.next=126;break;case 118:_context3.prev=118;_context3.t3=_context3[\"catch\"](112);console.log(_context3.t3);window.customFunctions.dismissLoader();_context3.next=124;return alertController.create({header:\"\",subHeader:\"\",message:language.get(this.state.lang,\"apiRequestError\"),buttons:[language.get(this.state.lang,\"alertOkButton\").toUpperCase()]});case 124:_alert5=_context3.sent;return _context3.abrupt(\"return\",_alert5.present());case 126:if(res.status){_context3.next=133;break;}console.log(res.message);window.customFunctions.dismissLoader();_context3.next=131;return alertController.create({header:\"\",subHeader:\"\",message:language.get(this.state.lang,\"apiRequestError\"),buttons:[language.get(this.state.lang,\"alertOkButton\").toUpperCase()]});case 131:_alert6=_context3.sent;return _context3.abrupt(\"return\",_alert6.present());case 133:for(_i6=0;_i6<res.data.folders.length;_i6++){_folder2=res.data.folders[_i6];_folderName2=utils.decryptCryptoJSFolderName(_folder2.metadata,this.state.userMasterKeys,_folder2.uuid);_uploadDate3=new Date(_folder2.timestamp*1000).toString().split(\" \");_item3={type:\"folder\",uuid:_folder2.uuid,name:utils.sanitizeHTML(_folderName2),date:_uploadDate3[1]+\" \"+_uploadDate3[2]+\" \"+_uploadDate3[3]+\" \"+_uploadDate3[4],timestamp:_folder2.timestamp,parent:_folder2.parent,receiverId:_folder2.receiverId,receiverEmail:_folder2.receiverEmail,sharerId:0,sharerEmail:\"\"};items.push(_item3);window.customVariables.cachedFolders[_folder2.uuid]=_item3;}for(_i7=0;_i7<res.data.uploads.length;_i7++){_file=res.data.uploads[_i7];metadata=utils.decryptFileMetadata(_file.metadata,this.state.userMasterKeys,_file.uuid);_uploadDate4=new Date(_file.timestamp*1000).toString().split(\" \");_offline=false;if(typeof window.customVariables.offlineSavedFiles[_file.uuid]!==\"undefined\"){_offline=true;}_item4={type:\"file\",uuid:_file.uuid,name:utils.sanitizeHTML(metadata.name),mime:utils.sanitizeHTML(metadata.mime),size:parseInt(metadata.size),key:utils.sanitizeHTML(metadata.key),bucket:_file.bucket,region:_file.region,parent:_file.parent,rm:_file.rm,chunks:_file.chunks,date:_uploadDate4[1]+\" \"+_uploadDate4[2]+\" \"+_uploadDate4[3]+\" \"+_uploadDate4[4],timestamp:_file.timestamp,receiverId:_file.receiverId,receiverEmail:_file.receiverEmail,sharerId:0,sharerEmail:\"\",offline:_offline,thumbnail:typeof window.customVariables.thumbnailBlobCache[_file.uuid]!==\"undefined\"?window.customVariables.thumbnailBlobCache[_file.uuid]:undefined};items.push(_item4);window.customVariables.cachedFiles[_file.uuid]=_item4;}_context3.next=160;break;case 137:_context3.prev=137;_context3.next=140;return utils.apiRequest(\"POST\",\"/v1/dir/content\",{apiKey:this.state.userAPIKey,uuid:parent,folders:JSON.stringify([\"default\"]),page:1,app:\"true\"});case 140:res=_context3.sent;_context3.next=151;break;case 143:_context3.prev=143;_context3.t4=_context3[\"catch\"](137);console.log(_context3.t4);window.customFunctions.dismissLoader();_context3.next=149;return alertController.create({header:\"\",subHeader:\"\",message:language.get(this.state.lang,\"apiRequestError\"),buttons:[language.get(this.state.lang,\"alertOkButton\").toUpperCase()]});case 149:_alert7=_context3.sent;return _context3.abrupt(\"return\",_alert7.present());case 151:if(res.status){_context3.next=158;break;}console.log(res.message);window.customFunctions.dismissLoader();_context3.next=156;return alertController.create({header:\"\",subHeader:\"\",message:language.get(this.state.lang,\"apiRequestError\"),buttons:[language.get(this.state.lang,\"alertOkButton\").toUpperCase()]});case 156:_alert8=_context3.sent;return _context3.abrupt(\"return\",_alert8.present());case 158:for(_i8=0;_i8<res.data.folders.length;_i8++){_folder3=res.data.folders[_i8];_folderName3=utils.decryptCryptoJSFolderName(_folder3.name,this.state.userMasterKeys,_folder3.uuid);_uploadDate5=new Date(_folder3.timestamp*1000).toString().split(\" \");_item5={type:\"folder\",uuid:_folder3.uuid,name:utils.sanitizeHTML(_folderName3),date:_uploadDate5[1]+\" \"+_uploadDate5[2]+\" \"+_uploadDate5[3]+\" \"+_uploadDate5[4],timestamp:_folder3.timestamp,parent:_folder3.parent,receiverId:0,receiverEmail:\"\",sharerId:0,sharerEmail:\"\"};items.push(_item5);window.customVariables.cachedFolders[_folder3.uuid]=_item5;}for(_i9=0;_i9<res.data.uploads.length;_i9++){_file2=res.data.uploads[_i9];_metadata=utils.decryptFileMetadata(_file2.metadata,this.state.userMasterKeys,_file2.uuid);_uploadDate6=new Date(_file2.timestamp*1000).toString().split(\" \");_offline2=false;if(typeof window.customVariables.offlineSavedFiles[_file2.uuid]!==\"undefined\"){_offline2=true;}_item6={type:\"file\",uuid:_file2.uuid,name:utils.sanitizeHTML(_metadata.name),mime:utils.sanitizeHTML(_metadata.mime),size:parseInt(_metadata.size),key:utils.sanitizeHTML(_metadata.key),bucket:_file2.bucket,region:_file2.region,parent:_file2.parent,rm:_file2.rm,chunks:_file2.chunks,date:_uploadDate6[1]+\" \"+_uploadDate6[2]+\" \"+_uploadDate6[3]+\" \"+_uploadDate6[4],timestamp:_file2.timestamp,receiverId:0,receiverEmail:\"\",sharerId:0,sharerEmail:\"\",offline:_offline2,thumbnail:typeof window.customVariables.thumbnailBlobCache[_file2.uuid]!==\"undefined\"?window.customVariables.thumbnailBlobCache[_file2.uuid]:undefined};items.push(_item6);window.customVariables.cachedFiles[_file2.uuid]=_item6;}case 160:items=utils.orderItemsByType(items,window.customVariables.orderBy);window.customVariables.itemList=items;scrollTo=0;if(typeof window.customVariables.scrollToIndex[parent]!==\"undefined\"){scrollTo=window.customVariables.scrollToIndex[parent];delete window.customVariables.scrollToIndex[parent];}return _context3.abrupt(\"return\",this.setState({itemList:items,scrollToIndex:scrollTo},function(){loading.dismiss();_this5.forceUpdate();window.customVariables.currentThumbnailURL=window.location.href;for(var _i10=0;_i10<items.length;_i10++){_this5.getFileThumbnail(items[_i10],window.customVariables.currentThumbnailURL,_i10);}window.customFunctions.saveCachedItems();window.customFunctions.saveThumbnailCache();}));case 165:case\"end\":return _context3.stop();}}},_callee3,this,[[15,21],[46,52],[60,66],[112,118],[137,143]]);}));return _updateItemList.apply(this,arguments);}export function getFileThumbnail(file,thumbURL,index){var _this=this;if(file.type!==\"file\"||file.name.indexOf(\".\")==-1||typeof file.thumbnail!==\"undefined\"){return false;}if(typeof window.customVariables.getThumbnailErrors[file.uuid]!==\"undefined\"){if(window.customVariables.getThumbnailErrors[file.uuid]>=16){return false;}}var intervalTimer=utils.getRandomArbitrary(10,50);if(document.getElementById(\"item-thumbnail-\"+file.uuid)!==null){intervalTimer=1;}var onScreenInterval=setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var ext,thumbnail,newItems,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(thumbURL!==window.location.href)){_context.next=4;break;}return _context.abrupt(\"return\",clearInterval(onScreenInterval));case 4:if(!(document.getElementById(\"item-thumbnail-\"+file.uuid)!==null)){_context.next=39;break;}clearInterval(onScreenInterval);ext=file.name.split(\".\");ext=ext[ext.length-1];thumbnail=undefined;if(!utils.canShowThumbnail(ext)){_context.next=23;break;}_context.prev=10;_context.next=13;return _this.getThumbnail(file,thumbURL,ext);case 13:thumbnail=_context.sent;_context.next=21;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](10);console.log(_context.t0);if(_context.t0.indexOf(\"url changed\")==-1){if(typeof window.customVariables.getThumbnailErrors[file.uuid]!==\"undefined\"){window.customVariables.getThumbnailErrors[file.uuid]=window.customVariables.getThumbnailErrors[file.uuid]+1;}else{window.customVariables.getThumbnailErrors[file.uuid]=1;}window.customFunctions.saveGetThumbnailErrors();}return _context.abrupt(\"return\",false);case 21:_context.next=24;break;case 23:return _context.abrupt(\"return\",false);case 24:if(!(typeof thumbnail!==\"undefined\")){_context.next=38;break;}_context.next=27;return window.customVariables.updateItemsSemaphore.acquire();case 27:newItems=_this.state.itemList;for(i=0;i<newItems.length;i++){if(newItems[i].uuid==file.uuid){newItems[i].thumbnail=thumbnail;}}window.customVariables.itemList=newItems;if(!(thumbURL==window.location.href)){_context.next=34;break;}return _context.abrupt(\"return\",_this.setState({itemList:newItems},function(){_this.forceUpdate();window.customVariables.updateItemsSemaphore.release();}));case 34:window.customVariables.updateItemsSemaphore.release();return _context.abrupt(\"return\",false);case 36:_context.next=39;break;case 38:return _context.abrupt(\"return\",false);case 39:case\"end\":return _context.stop();}}},_callee,null,[[10,16]]);})),intervalTimer);}export function refreshMainList(_x){return _refreshMainList.apply(this,arguments);}function _refreshMainList(){_refreshMainList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.updateItemList();case 2:return _context4.abrupt(\"return\",event.detail.complete());case 3:case\"end\":return _context4.stop();}}},_callee4,this);}));return _refreshMainList.apply(this,arguments);}export function selectItem(type,index){var items=this.state.itemList;var selectedItems=this.state.selectedItems;if(type){if(!items[index].selected){items[index].selected=type;selectedItems=selectedItems+1;}if(selectedItems==1&&Capacitor.isNative){Plugins.Haptics.impact(HapticsImpactStyle.Light);}}else{if(items[index].selected){items[index].selected=type;selectedItems=selectedItems-1;}}return this.setState({itemList:items,selectedItems:selectedItems});}export function clearSelectedItems(){var items=this.state.itemList;for(var i=0;i<items.length;i++){items[i].selected=false;}return this.setState({itemList:items,selectedItems:0});}export function selectItemsAction(_x2){return _selectItemsAction.apply(this,arguments);}function _selectItemsAction(){_selectItemsAction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(event){var appLang,customElementId,selectedItemsDoesNotContainFolder,inner,popover;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:event.persist();appLang=this.state.lang;customElementId=utils.generateRandomClassName();selectedItemsDoesNotContainFolder=utils.selectedItemsDoesNotContainFolder(this.state.itemList);inner=\"\";if(window.location.href.indexOf(\"shared-in\")!==-1){inner=\"\\n\\t\\t\\t<ion-list>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.selectAllItems()\\\">\"+language.get(appLang,\"selectAll\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.unselectAllItems()\\\">\"+language.get(appLang,\"unselectAll\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.removeSelectedItemsFromSharedIn()\\\">\"+language.get(appLang,\"removeFromShared\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.dismissPopover()\\\">\"+language.get(appLang,\"close\")+\"</ion-item>\\n\\t\\t\\t</ion-list>\\n\\t\\t\";}else if(window.location.href.indexOf(\"shared-out\")!==-1){inner=\"\\n\\t\\t\\t<ion-list>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.selectAllItems()\\\">\"+language.get(appLang,\"selectAll\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.unselectAllItems()\\\">\"+language.get(appLang,\"unselectAll\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.stopSharingSelectedItems()\\\">\"+language.get(appLang,\"stopSharing\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.dismissPopover()\\\">\"+language.get(appLang,\"close\")+\"</ion-item>\\n\\t\\t\\t</ion-list>\\n\\t\\t\";}else if(window.location.href.indexOf(\"trash\")!==-1){inner=\"\\n\\t\\t\\t<ion-list>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.selectAllItems()\\\">\"+language.get(appLang,\"selectAll\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.unselectAllItems()\\\">\"+language.get(appLang,\"unselectAll\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.restoreSelectedItems()\\\">\"+language.get(appLang,\"restoreItem\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.dismissPopover()\\\">\"+language.get(appLang,\"close\")+\"</ion-item>\\n\\t\\t\\t</ion-list>\\n\\t\\t\";}else{inner=\"\\n\\t\\t\\t<ion-list>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.selectAllItems()\\\">\"+language.get(appLang,\"selectAll\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.unselectAllItems()\\\">\"+language.get(appLang,\"unselectAll\")+\"</ion-item>\\n\\t\\t\\t\\t\"+(selectedItemsDoesNotContainFolder?\"<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.storeSelectedItemsOffline()\\\">\"+language.get(appLang,\"storeSelectedItemsOffline\")+\"</ion-item>\":\"\")+\"\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.moveSelectedItems()\\\">\"+language.get(appLang,\"moveItem\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.trashSelectedItems()\\\">\"+language.get(appLang,\"trashItem\")+\"</ion-item>\\n\\t\\t\\t\\t<ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.dismissPopover()\\\">\"+language.get(appLang,\"close\")+\"</ion-item>\\n\\t\\t\\t</ion-list>\\n\\t\\t\";}window.customElements.define(customElementId,/*#__PURE__*/function(_HTMLElement){_inherits(ModalContent,_HTMLElement);var _super=_createSuper(ModalContent);function ModalContent(){_classCallCheck(this,ModalContent);return _super.apply(this,arguments);}_createClass(ModalContent,[{key:\"connectedCallback\",value:function connectedCallback(){this.innerHTML=inner;}}]);return ModalContent;}(/*#__PURE__*/_wrapNativeSuper(HTMLElement)));_context5.next=9;return popoverController.create({component:customElementId,event:event});case 9:popover=_context5.sent;return _context5.abrupt(\"return\",popover.present());case 11:case\"end\":return _context5.stop();}}},_callee5,this);}));return _selectItemsAction.apply(this,arguments);}export function previewItem(_x3){return _previewItem.apply(this,arguments);}function _previewItem(){_previewItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(item){var _this6=this;var lastModalPreviewType,networkStatus,nameEx,previewType,gotPreviewData,loading,_args9=arguments;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:lastModalPreviewType=_args9.length>1&&_args9[1]!==undefined?_args9[1]:undefined;if(!(item.type!==\"file\")){_context9.next=3;break;}return _context9.abrupt(\"return\",false);case 3:if(!(Capacitor.isNative&&typeof lastModalPreviewType==\"undefined\")){_context9.next=10;break;}if(!this.state.settings.onlyWifi){_context9.next=10;break;}_context9.next=7;return Plugins.Network.getStatus();case 7:networkStatus=_context9.sent;if(!(networkStatus.connectionType!==\"wifi\")){_context9.next=10;break;}return _context9.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"onlyWifiError\")));case 10:if(!(typeof window.customVariables.offlineSavedFiles[item.uuid]!==\"undefined\"&&typeof lastModalPreviewType==\"undefined\")){_context9.next=14;break;}this.getDownloadDir(true,item.uuid,function(err,dirObj){if(err){console.log(err);return _this6.spawnToast(language.get(_this6.state.lang,\"couldNotGetDownloadDir\"));}FileOpener.open(dirObj.uri.uri+\"/\"+item.name,item.mime).then(function(){console.log(dirObj.uri.uri+\"/\"+item.name,item.mime);}).catch(function(err){console.log(err);console.log(dirObj.uri.uri+\"/\"+item.name,item.mime);return _this6.spawnToast(language.get(_this6.state.lang,\"noAppFoundToOpenFile\",true,[\"__NAME__\"],[item.name]));});});_context9.next=28;break;case 14:nameEx=item.name.split(\".\");previewType=utils.getFilePreviewType(nameEx[nameEx.length-1]);if(!(previewType==\"none\")){_context9.next=19;break;}if(typeof lastModalPreviewType!==\"undefined\"){window.customFunctions.dismissModal();}return _context9.abrupt(\"return\",this.spawnItemActionSheet(item));case 19:if(!(item.size>1024*1024*64)){_context9.next=22;break;}if(typeof lastModalPreviewType!==\"undefined\"){window.customFunctions.dismissModal();}return _context9.abrupt(\"return\",this.spawnItemActionSheet(item));case 22:gotPreviewData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dataArray){var blob,previewModalContent,text,setupBars,setupSlider,loadPdf,currentModal,modalId,modal;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:blob=new Blob([dataArray],{type:item.mime,name:item.name});if(typeof window.customVariables.currentPreviewURL!==\"undefined\"){window.customVariables.urlCreator.revokeObjectURL(window.customVariables.currentPreviewURL);}window.customVariables.currentPreviewURL=window.customVariables.urlCreator.createObjectURL(blob);previewModalContent=\"\";if(previewType==\"image\"){previewModalContent=\"\\n\\t\\t\\t\\t\\t<ion-header class=\\\"ion-header-no-shadow preview-header-hidden\\\" style=\\\"position: absolute; display: none;\\\" onClick=\\\"window.customFunctions.togglePreviewHeader(true)\\\">\\n\\t\\t\\t\\t\\t\\t<ion-toolbar style=\\\"--background: black; color: white;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.dismissModal()\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\" style=\\\"color: white;\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t\\t<ion-title>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+item.name+\"\\n\\t\\t\\t\\t\\t\\t\\t</ion-title>\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"end\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.openItemActionSheetFromJSON('\"+window.btoa(JSON.stringify(item))+\"')\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.ellipsisVertical+\"\\\" style=\\\"color: white;\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t</ion-toolbar>\\n\\t\\t\\t\\t\\t</ion-header>\\n\\t\\t\\t\\t\\t<ion-content style=\\\"--background: black;\\\" fullscreen>\\n\\t\\t\\t\\t\\t\\t<ion-slides pager=\\\"false\\\" style=\\\"height: 100%; width: 100vw;\\\" id=\\\"slider\\\" scrollbar=\\\"false\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ion-slide>\\n\\t\\t\\t\\t\\t\\t\\t\\t<center>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img id=\\\"preview-img\\\" src=\\\"\"+window.customVariables.currentPreviewURL+\"\\\" style=\\\"width: auto; height: auto; max-width: 100vw; max-height: 100vh;\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<center>\\n\\t\\t\\t\\t\\t\\t\\t</ion-slide>\\n\\t\\t\\t\\t\\t\\t</ion-slides>\\n\\t\\t\\t\\t\\t</ion-content>\\n\\t\\t\\t\\t\";}else if(previewType==\"video\"){previewModalContent=\"\\n\\t\\t\\t\\t\\t<ion-header class=\\\"ion-header-no-shadow\\\" style=\\\"position: absolute;\\\">\\n\\t\\t\\t\\t\\t\\t<ion-toolbar style=\\\"--background: black; color: white;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.dismissModal()\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\" style=\\\"color: white;\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t\\t<ion-title>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+item.name+\"\\n\\t\\t\\t\\t\\t\\t\\t</ion-title>\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"end\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.openItemActionSheetFromJSON('\"+window.btoa(JSON.stringify(item))+\"')\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.ellipsisVertical+\"\\\" style=\\\"color: white;\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t</ion-toolbar>\\n\\t\\t\\t\\t\\t</ion-header>\\n\\t\\t\\t\\t\\t<ion-content style=\\\"--background: black;\\\" fullscreen>\\n\\t\\t\\t\\t\\t\\t<ion-slides pager=\\\"false\\\" style=\\\"height: 100%; width: 100vw;\\\" id=\\\"slider\\\" scrollbar=\\\"false\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ion-slide>\\n\\t\\t\\t\\t\\t\\t\\t\\t<center>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<video id=\\\"preview-video\\\" style=\\\"width: auto; height: auto; max-width: 100vw; max-height: 100vh; margin-top: 56px;\\\" src=\\\"\"+window.customVariables.currentPreviewURL+\"\\\" autoplay preload controls></video>\\n\\t\\t\\t\\t\\t\\t\\t\\t</center>\\n\\t\\t\\t\\t\\t\\t\\t</ion-slide>\\n\\t\\t\\t\\t\\t\\t</ion-slides>\\n\\t\\t\\t\\t\\t</ion-content>\\n\\t\\t\\t\\t\";}else if(previewType==\"audio\"){previewModalContent=\"\\n\\t\\t\\t\\t\\t<ion-header class=\\\"ion-header-no-shadow\\\" style=\\\"position: absolute;\\\">\\n\\t\\t\\t\\t\\t\\t<ion-toolbar style=\\\"--background: transparent; color: white;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.dismissModal()\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\" style=\\\"color: white;\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t\\t<ion-title>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+item.name+\"\\n\\t\\t\\t\\t\\t\\t\\t</ion-title>\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"end\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.openItemActionSheetFromJSON('\"+window.btoa(JSON.stringify(item))+\"')\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.ellipsisVertical+\"\\\" style=\\\"color: white;\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t</ion-toolbar>\\n\\t\\t\\t\\t\\t</ion-header>\\n\\t\\t\\t\\t\\t<ion-content style=\\\"--background: black;\\\" fullscreen>\\n\\t\\t\\t\\t\\t\\t<ion-slides pager=\\\"false\\\" style=\\\"height: 100%; width: 100vw;\\\" id=\\\"slider\\\" scrollbar=\\\"false\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ion-slide>\\n\\t\\t\\t\\t\\t\\t\\t\\t<audio autoplay preload controls>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<source src=\\\"\"+window.customVariables.currentPreviewURL+\"\\\" type=\\\"audio/mpeg\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</audio>\\n\\t\\t\\t\\t\\t\\t\\t</ion-slide>\\n\\t\\t\\t\\t\\t\\t</ion-slides>\\n\\t\\t\\t\\t\\t</ion-content>\\n\\t\\t\\t\\t\";}else if(previewType==\"code\"||previewType==\"text\"){text=new TextDecoder().decode(dataArray).split(\"<\").join(\"&lt;\");previewModalContent=\"\\n\\t\\t\\t\\t\\t<ion-header>\\n\\t\\t\\t\\t\\t\\t<ion-toolbar>\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.dismissModal()\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t\\t<ion-title>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+item.name+\"\\n\\t\\t\\t\\t\\t\\t\\t</ion-title>\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"end\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.openItemActionSheetFromJSON('\"+window.btoa(JSON.stringify(item))+\"')\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.ellipsisVertical+\"\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t</ion-toolbar>\\n\\t\\t\\t\\t\\t</ion-header>\\n\\t\\t\\t\\t\\t<ion-content fullscreen style=\\\"-webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text;\\\">\\n\\t\\t\\t\\t\\t\\t<pre style=\\\"width: 100vw; height: 100%; margin-top: 0px; padding: 10px; -webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text;\\\">\"+text+\"</pre>\\n\\t\\t\\t\\t\\t</ion-content>\\n\\t\\t\\t\\t\";}else if(previewType==\"pdf\"){previewModalContent=\"\\n\\t\\t\\t\\t\\t<ion-header>\\n\\t\\t\\t\\t\\t\\t<ion-toolbar>\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.dismissModal()\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t\\t<ion-title>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+item.name+\"\\n\\t\\t\\t\\t\\t\\t\\t</ion-title>\\n\\t\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"end\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button onclick=\\\"window.customFunctions.openItemActionSheetFromJSON('\"+window.btoa(JSON.stringify(item))+\"')\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.ellipsisVertical+\"\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t</ion-toolbar>\\n\\t\\t\\t\\t\\t</ion-header>\\n\\t\\t\\t\\t\\t<ion-content fullscreen>\\n\\t\\t\\t\\t\\t\\t<div id=\\\"pdf-viewer\\\" style=\\\"width: 100%; height: 100%; overflow: scroll;\\\"></div>\\n\\t\\t\\t\\t\\t</ion-content>\\n\\t\\t\\t\\t\";}if(!(previewModalContent.length<=8)){_context8.next=8;break;}if(typeof lastModalPreviewType!==\"undefined\"){window.customFunctions.dismissModal();}return _context8.abrupt(\"return\",_this6.spawnItemActionSheet(item));case 8:setupBars=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _modal;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(previewType==\"image\"||previewType==\"video\"||previewType==\"audio\")){_context6.next=12;break;}_this6.setupStatusbar(\"image/video\");_context6.prev=2;_context6.next=5;return modalController.getTop();case 5:_modal=_context6.sent;_modal.onDidDismiss().then(function(){_this6.setupStatusbar();});_context6.next=12;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](2);console.log(_context6.t0);case 12:case\"end\":return _context6.stop();}}},_callee6,null,[[2,9]]);}));return function setupBars(){return _ref4.apply(this,arguments);};}();setupSlider=function setupSlider(lastPreviewType){var slider=document.getElementById(\"slider\");if(slider==null){return false;}var itemList=_this6.state.itemList;var getPrevOrNextItem=function getPrevOrNextItem(type){var step=1;var max=128;var tries=0;var getItemRecursive=function getItemRecursive(type){if(tries>max){return undefined;}tries+=1;for(var i=0;i<itemList.length;i++){if(itemList[i].uuid==item.uuid){var _item7=undefined;var listIndex=undefined;if(type==\"prev\"){listIndex=i-step;_item7=itemList[listIndex];}else{listIndex=i+step;_item7=itemList[listIndex];}if(typeof _item7==\"undefined\"){step+=1;return getItemRecursive(type);}else{var thisNameEx=_item7.name.split(\".\");var thisPreviewType=utils.getFilePreviewType(thisNameEx[thisNameEx.length-1]);if(thisPreviewType==lastPreviewType){return{item:_item7,listIndex:listIndex};}else{step+=1;return getItemRecursive(type);}}}}};return getItemRecursive(type);};slider.options={freeMode:false};var offset=75;var offsetY=150;var xDown,yDown;slider.addEventListener(\"touchstart\",function(e){var firstTouch=getTouch(e);xDown=firstTouch.clientX;yDown=firstTouch.clientY;});slider.addEventListener(\"touchend\",function(e){if(!xDown||!yDown){return false;}var _getTouch=getTouch(e),xUp=_getTouch.clientX,yUp=_getTouch.clientY;var xDiff=xDown-xUp;var yDiff=yDown-yUp;var xDiffAbs=Math.abs(xDown-xUp);var yDiffAbs=Math.abs(yDown-yUp);if(Math.max(xDiffAbs,yDiffAbs)<offset){return false;}if(xDiffAbs>yDiffAbs){if(xDiff>0){var nextItem=getPrevOrNextItem(\"next\");if(typeof nextItem==\"undefined\"){return false;}_this6.setState({scrollToIndex:nextItem.listIndex});return _this6.previewItem(nextItem.item,lastPreviewType);}else{var prevItem=getPrevOrNextItem(\"prev\");if(typeof prevItem==\"undefined\"){return false;}_this6.setState({scrollToIndex:prevItem.listIndex});return _this6.previewItem(prevItem.item,lastPreviewType);}}else{if(xDiffAbs<yDiffAbs&&Math.max(xDiffAbs,yDiffAbs)>offsetY){window.customFunctions.dismissModal();}}return false;});var getTouch=function getTouch(e){return e.changedTouches[0];};};loadPdf=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var canvasContainer,loader,renderPage,renderPages,loadingTask;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:renderPages=function _renderPages(pdfDoc){if(typeof loader!==\"undefined\"){loader.dismiss();}for(var i=1;i<=pdfDoc.numPages;i++){pdfDoc.getPage(i).then(renderPage);}};renderPage=function _renderPage(page){var viewport=page.getViewport({scale:2});var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');var renderContext={canvasContext:ctx,viewport:viewport};canvas.height=viewport.height;canvas.width=viewport.width;canvasContainer.appendChild(canvas);page.render(renderContext);};canvasContainer=document.getElementById(\"pdf-viewer\");if(!(typeof window.pdfjsLib==\"undefined\")){_context7.next=5;break;}return _context7.abrupt(\"return\",window.customFunctions.dismissModal());case 5:window.pdfjsLib.GlobalWorkerOptions.workerSrc=\"assets/pdf/build/pdf.worker.js\";_context7.next=8;return loadingController.create({message:\"\"});case 8:loader=_context7.sent;loader.present();loadingTask=window.pdfjsLib.getDocument({data:dataArray});loadingTask.promise.then(renderPages).catch(function(err){console.log(err);return window.customFunctions.dismissModal();});case 12:case\"end\":return _context7.stop();}}},_callee7);}));return function loadPdf(){return _ref5.apply(this,arguments);};}();if(!(typeof lastModalPreviewType!==\"undefined\")){_context8.next=27;break;}_context8.prev=12;currentModal=document.querySelectorAll(\".modal-fullscreen > .modal-wrapper\")[0].childNodes[0];_context8.next=20;break;case 16:_context8.prev=16;_context8.t0=_context8[\"catch\"](12);window.customFunctions.dismissModal();return _context8.abrupt(\"return\",_this6.spawnItemActionSheet(item));case 20:currentModal.innerHTML=previewModalContent;if(previewType==\"pdf\"){loadPdf();}setupBars();setupSlider(previewType);return _context8.abrupt(\"return\",true);case 27:modalId=\"preview-modal-\"+utils.generateRandomClassName();customElements.define(modalId,/*#__PURE__*/function(_HTMLElement2){_inherits(ModalContent,_HTMLElement2);var _super2=_createSuper(ModalContent);function ModalContent(){_classCallCheck(this,ModalContent);return _super2.apply(this,arguments);}_createClass(ModalContent,[{key:\"connectedCallback\",value:function connectedCallback(){this.innerHTML=previewModalContent;}}]);return ModalContent;}(/*#__PURE__*/_wrapNativeSuper(HTMLElement)));_context8.next=31;return modalController.create({component:modalId,swipeToClose:true,showBackdrop:false,backdropDismiss:false,cssClass:\"modal-fullscreen\"});case 31:modal=_context8.sent;_context8.next=34;return modal.present();case 34:if(Capacitor.isNative){Capacitor.Plugins.Keyboard.hide();}if(previewType==\"image\"||previewType==\"video\"||previewType==\"audio\"){try{document.querySelectorAll(\".modal-fullscreen > .modal-wrapper\")[0].childNodes[0].style.backgroundColor=\"black\";}catch(e){console.log(e);}}if(previewType==\"pdf\"){loadPdf();}setupBars();setupSlider(previewType);return _context8.abrupt(\"return\",true);case 40:case\"end\":return _context8.stop();}}},_callee8,null,[[12,16]]);}));return function gotPreviewData(_x31){return _ref3.apply(this,arguments);};}();_context9.next=25;return loadingController.create({message:\"\"//language.get(this.state.lang, \"loadingPreview\")\n});case 25:loading=_context9.sent;loading.present();this.downloadPreview(item,function(chunksDone){//console.log(chunksDone)\n},function(err,dataArray){loading.dismiss();if(err){console.log(err);return _this6.spawnToast(language.get(_this6.state.lang,\"fileNoPreviewAvailable\",true,[\"__NAME__\"],[item.name]));}return gotPreviewData(dataArray);});case 28:case\"end\":return _context9.stop();}}},_callee9,this);}));return _previewItem.apply(this,arguments);}export function dirExists(_x4,_x5,_x6){return _dirExists.apply(this,arguments);}function _dirExists(){_dirExists=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(name,parent,callback){var res;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(parent==null){parent=\"base\";}_context10.prev=1;_context10.next=4;return utils.apiRequest(\"POST\",\"/v1/dir/exists\",{apiKey:this.state.userAPIKey,parent:parent,nameHashed:utils.hashFn(name.toLowerCase())});case 4:res=_context10.sent;_context10.next=10;break;case 7:_context10.prev=7;_context10.t0=_context10[\"catch\"](1);return _context10.abrupt(\"return\",callback(_context10.t0));case 10:if(res.status){_context10.next=12;break;}return _context10.abrupt(\"return\",callback(res.message));case 12:return _context10.abrupt(\"return\",callback(null,res.data.exists,res.data.uuid));case 13:case\"end\":return _context10.stop();}}},_callee10,this,[[1,7]]);}));return _dirExists.apply(this,arguments);}export function moveFolder(_x7,_x8,_x9){return _moveFolder.apply(this,arguments);}function _moveFolder(){_moveFolder=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(folder,destination,showLoader){var _this7=this;var loading;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(!(folder.parent==destination)){_context12.next=2;break;}return _context12.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"moveFileOrFolderSameDestination\")));case 2:if(!(utils.currentParentFolder()==\"base\")){_context12.next=5;break;}if(!(folder.uuid==\"default\"||folder.name.toLowerCase()==\"filen sync\")){_context12.next=5;break;}return _context12.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"thisFolderCannotBeMoved\")));case 5:if(!showLoader){_context12.next=10;break;}_context12.next=8;return loadingController.create({message:\"\"});case 8:loading=_context12.sent;loading.present();case 10:this.dirExists(folder.name,destination,/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(err,exists,existsUUID){var res;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!err){_context11.next=3;break;}if(showLoader){loading.dismiss();}return _context11.abrupt(\"return\",_this7.spawnToast(language.get(_this7.state.lang,\"apiRequestError\")));case 3:if(!exists){_context11.next=6;break;}if(showLoader){loading.dismiss();}return _context11.abrupt(\"return\",_this7.spawnToast(language.get(_this7.state.lang,\"folderMoveAlreadyExistsHere\",true,[\"__NAME__\"],[folder.name])));case 6:_context11.prev=6;_context11.next=9;return utils.apiRequest(\"POST\",\"/v1/dir/move\",{apiKey:_this7.state.userAPIKey,uuid:folder.uuid,folderUUID:destination});case 9:res=_context11.sent;_context11.next=16;break;case 12:_context11.prev=12;_context11.t0=_context11[\"catch\"](6);if(showLoader){loading.dismiss();}return _context11.abrupt(\"return\",_this7.spawnToast(language.get(_this7.state.lang,\"apiRequestError\")));case 16:if(showLoader){loading.dismiss();}if(res.status){_context11.next=19;break;}return _context11.abrupt(\"return\",_this7.spawnToast(res.message));case 19:_this7.spawnToast(language.get(_this7.state.lang,\"folderMoved\",true,[\"__NAME__\"],[folder.name]));utils.checkIfItemParentIsBeingShared(destination,\"folder\",{name:folder.name});clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){if(utils.currentParentFolder()==destination){_this7.updateItemList();}},500);return _context11.abrupt(\"return\",true);case 24:case\"end\":return _context11.stop();}}},_callee11,null,[[6,12]]);}));return function(_x32,_x33,_x34){return _ref6.apply(this,arguments);};}());case 11:case\"end\":return _context12.stop();}}},_callee12,this);}));return _moveFolder.apply(this,arguments);}export function moveFile(_x10,_x11,_x12){return _moveFile.apply(this,arguments);}function _moveFile(){_moveFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(file,destination,showLoader){var _this8=this;var loading;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:if(!(file.parent==destination)){_context14.next=2;break;}return _context14.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"moveFileOrFolderSameDestination\")));case 2:if(!(destination==\"trash\"||destination==\"base\"||destination==\"shared-in\"||destination==\"shared-out\")){_context14.next=4;break;}return _context14.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"cannotMoveFileHere\")));case 4:if(!showLoader){_context14.next=9;break;}_context14.next=7;return loadingController.create({message:\"\"});case 7:loading=_context14.sent;loading.present();case 9:this.fileExists(file.name,destination,/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(err,exists,existsUUID){var res;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:if(!err){_context13.next=3;break;}if(showLoader){loading.dismiss();}return _context13.abrupt(\"return\",_this8.spawnToast(language.get(_this8.state.lang,\"apiRequestError\")));case 3:if(!exists){_context13.next=6;break;}if(showLoader){loading.dismiss();}return _context13.abrupt(\"return\",_this8.spawnToast(language.get(_this8.state.lang,\"fileMoveAlreadyExistsHere\",true,[\"__NAME__\"],[file.name])));case 6:_context13.prev=6;_context13.next=9;return utils.apiRequest(\"POST\",\"/v1/file/move\",{apiKey:_this8.state.userAPIKey,fileUUID:file.uuid,folderUUID:destination});case 9:res=_context13.sent;_context13.next=16;break;case 12:_context13.prev=12;_context13.t0=_context13[\"catch\"](6);if(showLoader){loading.dismiss();}return _context13.abrupt(\"return\",_this8.spawnToast(language.get(_this8.state.lang,\"apiRequestError\")));case 16:if(showLoader){loading.dismiss();}if(res.status){_context13.next=19;break;}return _context13.abrupt(\"return\",_this8.spawnToast(res.message));case 19:_this8.spawnToast(language.get(_this8.state.lang,\"fileMoved\",true,[\"__NAME__\"],[file.name]));utils.checkIfItemParentIsBeingShared(destination,\"file\",{uuid:file.uuid,name:file.name,size:parseInt(file.size),mime:file.mime,key:file.key});clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){if(utils.currentParentFolder()==destination){_this8.updateItemList();}},500);return _context13.abrupt(\"return\",true);case 24:case\"end\":return _context13.stop();}}},_callee13,null,[[6,12]]);}));return function(_x35,_x36,_x37){return _ref7.apply(this,arguments);};}());case 10:case\"end\":return _context14.stop();}}},_callee14,this);}));return _moveFile.apply(this,arguments);}export function moveItem(item){var _this2=this;this.spawnMoveToast(function(cancelled,destination){if(cancelled){return false;}if(item.type==\"file\"){return _this2.moveFile(item,destination,true);}else{return _this2.moveFolder(item,destination,true);}});}export function renameItem(_x13){return _renameItem.apply(this,arguments);}function _renameItem(){_renameItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(item){var _this9=this;var parent;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:parent=utils.currentParentFolder();if(!(parent==\"base\")){_context19.next=4;break;}if(!(item.uuid==\"default\"||item.name.toLowerCase()==\"filen sync\")){_context19.next=4;break;}return _context19.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"cannotRenameItem\",true,[\"__NAME__\"],[item.name])));case 4:this.spawnRenamePrompt(item,/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(cancelled,newName){var loading,nameEx,fileExt,renameWithDot;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:if(!cancelled){_context18.next=2;break;}return _context18.abrupt(\"return\",false);case 2:if(!(item.name==newName)){_context18.next=4;break;}return _context18.abrupt(\"return\",false);case 4:_context18.next=6;return loadingController.create({message:\"\"});case 6:loading=_context18.sent;loading.present();if(!(item.type==\"file\")){_context18.next=20;break;}newName=utils.removeIllegalCharsFromString(newName);if(!(utils.nameRegex(newName)||utils.checkIfNameIsBanned(newName)||utils.fileNameValidationRegex(newName))){_context18.next=13;break;}loading.dismiss();return _context18.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"invalidFileName\")));case 13:nameEx=item.name.split(\".\");fileExt=nameEx[nameEx.length-1];renameWithDot=false;if(item.name.indexOf(\".\")!==-1){renameWithDot=true;}_this9.fileExists(newName,parent,/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(err,exists,existsUUID){var res;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:if(!err){_context16.next=4;break;}console.log(err);loading.dismiss();return _context16.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"apiRequestError\")));case 4:if(!exists){_context16.next=7;break;}loading.dismiss();return _context16.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"fileRenameAlreadyExists\",true,[\"__NAME__\"],[item.name])));case 7:if(renameWithDot){newName=newName+\".\"+fileExt;}_context16.prev=8;_context16.next=11;return utils.apiRequest(\"POST\",\"/v1/file/rename\",{apiKey:_this9.state.userAPIKey,uuid:item.uuid,name:utils.cryptoJSEncrypt(newName,item.key),nameHashed:utils.hashFn(newName.toLowerCase()),metaData:utils.cryptoJSEncrypt(JSON.stringify({name:newName,size:parseInt(item.size),mime:item.mime,key:item.key}),_this9.state.userMasterKeys[_this9.state.userMasterKeys.length-1])});case 11:res=_context16.sent;_context16.next=19;break;case 14:_context16.prev=14;_context16.t0=_context16[\"catch\"](8);console.log(_context16.t0);loading.dismiss();return _context16.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"apiRequestError\")));case 19:if(res.status){_context16.next=22;break;}loading.dismiss();return _context16.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"couldNotRenameFile\")));case 22:loading.dismiss();_this9.spawnToast(language.get(_this9.state.lang,\"fileRenamed\",true,[\"__NAME__\",\"__TO__\"],[item.name,newName]));utils.checkIfItemIsBeingSharedForRename(\"file\",parent,{name:newName,size:parseInt(item.size),mime:item.mime,key:item.key});delete window.customVariables.cachedFiles[item.uuid];clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){if(utils.currentParentFolder()==parent){_this9.updateItemList();}},500);if(typeof window.customVariables.offlineSavedFiles!==\"undefined\"&&Capacitor.isNative){_this9.getDownloadDir(true,item.uuid,/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(err,dirObj){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:if(!err){_context15.next=3;break;}console.log(err);return _context15.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"couldNotGetDownloadDir\")));case 3:_context15.prev=3;_context15.next=6;return Plugins.Filesystem.rename({from:dirObj+\"/\"+item.name,to:dirObj+\"/\"+newName,directory:dirObj.directory});case 6:_context15.next=12;break;case 8:_context15.prev=8;_context15.t0=_context15[\"catch\"](3);console.log(err);return _context15.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"couldNotRenameFileLocally\")));case 12:return _context15.abrupt(\"return\",console.log(\"File renamed locally\"));case 13:case\"end\":return _context15.stop();}}},_callee15,null,[[3,8]]);}));return function(_x43,_x44){return _ref10.apply(this,arguments);};}());}return _context16.abrupt(\"return\",true);case 30:case\"end\":return _context16.stop();}}},_callee16,null,[[8,14]]);}));return function(_x40,_x41,_x42){return _ref9.apply(this,arguments);};}());_context18.next=25;break;case 20:newName=utils.removeIllegalCharsFromString(newName);if(!(utils.checkIfNameIsBanned(newName)||utils.folderNameRegex(newName)||utils.fileNameValidationRegex(newName))){_context18.next=24;break;}loading.dismiss();return _context18.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"invalidFolderName\")));case 24:_this9.dirExists(newName,parent,/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(err,exists,existsUUID){var res;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:if(!err){_context17.next=3;break;}loading.dismiss();return _context17.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"apiRequestError\")));case 3:if(!exists){_context17.next=6;break;}loading.dismiss();return _context17.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"folderRenameAlreadyExists\",true,[\"__NAME__\"],[item.name])));case 6:_context17.prev=6;_context17.next=9;return utils.apiRequest(\"POST\",\"/v1/dir/rename\",{apiKey:_this9.state.userAPIKey,uuid:item.uuid,name:utils.cryptoJSEncrypt(JSON.stringify({name:newName}),_this9.state.userMasterKeys[_this9.state.userMasterKeys.length-1]),nameHashed:utils.hashFn(newName.toLowerCase())});case 9:res=_context17.sent;_context17.next=17;break;case 12:_context17.prev=12;_context17.t0=_context17[\"catch\"](6);console.log(_context17.t0);loading.dismiss();return _context17.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"apiRequestError\")));case 17:if(res.status){_context17.next=20;break;}loading.dismiss();return _context17.abrupt(\"return\",_this9.spawnToast(language.get(_this9.state.lang,\"couldNotRenameFolder\")));case 20:loading.dismiss();_this9.spawnToast(language.get(_this9.state.lang,\"folderRenamed\",true,[\"__NAME__\",\"__TO__\"],[item.name,newName]));utils.checkIfItemIsBeingSharedForRename(\"folder\",parent,{name:newName});delete window.customVariables.cachedFolders[item.uuid];clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){if(utils.currentParentFolder()==parent){_this9.updateItemList();}},500);return _context17.abrupt(\"return\",true);case 27:case\"end\":return _context17.stop();}}},_callee17,null,[[6,12]]);}));return function(_x45,_x46,_x47){return _ref11.apply(this,arguments);};}());case 25:case\"end\":return _context18.stop();}}},_callee18);}));return function(_x38,_x39){return _ref8.apply(this,arguments);};}());case 5:case\"end\":return _context19.stop();}}},_callee19,this);}));return _renameItem.apply(this,arguments);}export function moveSelectedItems(){return _moveSelectedItems.apply(this,arguments);}function _moveSelectedItems(){_moveSelectedItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var _this10=this;var items;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:_context20.next=2;return this.getSelectedItems();case 2:items=_context20.sent;window.customFunctions.dismissPopover();window.customFunctions.unselectAllItems();this.spawnMoveToast(function(cancelled,destination){if(cancelled){return false;}for(var i=0;i<items.length;i++){if(items[i].type==\"file\"){_this10.moveFile(items[i],destination,true);}else{_this10.moveFolder(items[i],destination,true);}}});case 6:case\"end\":return _context20.stop();}}},_callee20,this);}));return _moveSelectedItems.apply(this,arguments);}export function trashSelectedItems(){return _trashSelectedItems.apply(this,arguments);}function _trashSelectedItems(){_trashSelectedItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){var _this11=this;var items,alert;return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.next=2;return this.getSelectedItems();case 2:items=_context21.sent;window.customFunctions.dismissPopover();window.customFunctions.unselectAllItems();_context21.next=7;return alertController.create({header:language.get(this.state.lang,\"trashItemHeader\"),message:language.get(this.state.lang,\"trashItemsConfirmMessage\",true,[\"__COUNT__\"],[items.length]),buttons:[{text:language.get(this.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(this.state.lang,\"alertOkButton\"),handler:function handler(){items.forEach(function(item){_this11.trashItem(item,false);});}}]});case 7:alert=_context21.sent;return _context21.abrupt(\"return\",alert.present());case 9:case\"end\":return _context21.stop();}}},_callee21,this);}));return _trashSelectedItems.apply(this,arguments);}export function restoreSelectedItems(){return _restoreSelectedItems.apply(this,arguments);}function _restoreSelectedItems(){_restoreSelectedItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(){var _this12=this;var items,alert;return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.next=2;return this.getSelectedItems();case 2:items=_context22.sent;window.customFunctions.dismissPopover();window.customFunctions.unselectAllItems();_context22.next=7;return alertController.create({header:language.get(this.state.lang,\"restoreItemsHeader\"),message:language.get(this.state.lang,\"restoreItemsConfirmMessage\",true,[\"__COUNT__\"],[items.length]),buttons:[{text:language.get(this.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(this.state.lang,\"alertOkButton\"),handler:function handler(){items.forEach(function(item){_this12.restoreItem(item,false);});}}]});case 7:alert=_context22.sent;return _context22.abrupt(\"return\",alert.present());case 9:case\"end\":return _context22.stop();}}},_callee22,this);}));return _restoreSelectedItems.apply(this,arguments);}export function getSelectedItems(){var _this3=this;return new Promise(function(resolve,reject){var items=_this3.state.itemList.filter(function(item){return item.selected===true;});return resolve(items);});}export function restoreItem(_x14,_x15){return _restoreItem.apply(this,arguments);}function _restoreItem(){_restoreItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(item,showLoader){var _this13=this;var loading;return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:if(!showLoader){_context25.next=5;break;}_context25.next=3;return loadingController.create({message:\"\"});case 3:loading=_context25.sent;loading.present();case 5:if(item.type==\"file\"){this.fileExists(item.name,item.parent,/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(err,exists,existsUUID){var res;return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:if(!err){_context23.next=4;break;}console.log(err);if(showLoader){loading.dismiss();}return _context23.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"apiRequestError\")));case 4:if(!exists){_context23.next=7;break;}if(showLoader){loading.dismiss();}return _context23.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"fileExistsAtRestoreDestination\",true,[\"__NAME__\"],[item.name])));case 7:_context23.prev=7;_context23.next=10;return utils.apiRequest(\"POST\",\"/v1/file/restore\",{apiKey:_this13.state.userAPIKey,uuid:item.uuid});case 10:res=_context23.sent;_context23.next=18;break;case 13:_context23.prev=13;_context23.t0=_context23[\"catch\"](7);console.log(_context23.t0);if(showLoader){loading.dismiss();}return _context23.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"apiRequestError\")));case 18:if(res.status){_context23.next=21;break;}if(showLoader){loading.dismiss();}return _context23.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"couldNotRestoreItem\",true,[\"__NAME__\"],[item.name])));case 21:if(showLoader){loading.dismiss();}clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){_this13.updateItemList();},500);return _context23.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"itemRestored\",true,[\"__NAME__\"],[item.name])));case 25:case\"end\":return _context23.stop();}}},_callee23,null,[[7,13]]);}));return function(_x48,_x49,_x50){return _ref12.apply(this,arguments);};}());}else{this.dirExists(item.name,item.parent,/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(err,exists,existsUUID){var res;return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:if(!err){_context24.next=4;break;}console.log(err);if(showLoader){loading.dismiss();}return _context24.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"apiRequestError\")));case 4:if(!exists){_context24.next=7;break;}if(showLoader){loading.dismiss();}return _context24.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"folderExistsAtRestoreDestination\",true,[\"__NAME__\"],[item.name])));case 7:_context24.prev=7;_context24.next=10;return utils.apiRequest(\"POST\",\"/v1/dir/restore\",{apiKey:_this13.state.userAPIKey,uuid:item.uuid});case 10:res=_context24.sent;_context24.next=18;break;case 13:_context24.prev=13;_context24.t0=_context24[\"catch\"](7);console.log(_context24.t0);if(showLoader){loading.dismiss();}return _context24.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"apiRequestError\")));case 18:if(res.status){_context24.next=21;break;}if(showLoader){loading.dismiss();}return _context24.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"couldNotRestoreItem\",true,[\"__NAME__\"],[item.name])));case 21:if(showLoader){loading.dismiss();}clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){_this13.updateItemList();},500);return _context24.abrupt(\"return\",_this13.spawnToast(language.get(_this13.state.lang,\"itemRestored\",true,[\"__NAME__\"],[item.name])));case 25:case\"end\":return _context24.stop();}}},_callee24,null,[[7,13]]);}));return function(_x51,_x52,_x53){return _ref13.apply(this,arguments);};}());}case 6:case\"end\":return _context25.stop();}}},_callee25,this);}));return _restoreItem.apply(this,arguments);}export function trashItem(_x16,_x17){return _trashItem.apply(this,arguments);}function _trashItem(){_trashItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee26(item,showLoader){var _this14=this;var loading,res;return _regeneratorRuntime.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:if(!(utils.currentParentFolder()==\"base\")){_context26.next=3;break;}if(!(item.uuid==\"default\"||item.name.toLowerCase()==\"filen sync\")){_context26.next=3;break;}return _context26.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"cannotTrashItem\",true,[\"__NAME__\"],[item.name])));case 3:if(!showLoader){_context26.next=8;break;}_context26.next=6;return loadingController.create({message:\"\"});case 6:loading=_context26.sent;loading.present();case 8:_context26.prev=8;if(!(item.type==\"file\")){_context26.next=15;break;}_context26.next=12;return utils.apiRequest(\"POST\",\"/v1/file/trash\",{apiKey:this.state.userAPIKey,uuid:item.uuid});case 12:res=_context26.sent;_context26.next=18;break;case 15:_context26.next=17;return utils.apiRequest(\"POST\",\"/v1/dir/trash\",{apiKey:this.state.userAPIKey,uuid:item.uuid});case 17:res=_context26.sent;case 18:_context26.next=25;break;case 20:_context26.prev=20;_context26.t0=_context26[\"catch\"](8);console.log(_context26.t0);if(showLoader){loading.dismiss();}return _context26.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"apiRequestError\")));case 25:if(res.status){_context26.next=28;break;}if(showLoader){loading.dismiss();}return _context26.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"couldNotTrashItem\",true,[\"__NAME__\"],[item.name])));case 28:if(showLoader){loading.dismiss();}clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){_this14.updateItemList();},500);return _context26.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"itemTrashed\",true,[\"__NAME__\"],[item.name])));case 32:case\"end\":return _context26.stop();}}},_callee26,this,[[8,20]]);}));return _trashItem.apply(this,arguments);}export function shareItemWithEmail(_x18,_x19,_x20,_x21){return _shareItemWithEmail.apply(this,arguments);}function _shareItemWithEmail(){_shareItemWithEmail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee27(email,uuid,type,callback){var loading,res,userPubKey,usrPubKey,fileName,fileSize,fileMime,fileKey,encrypted,shareItems,files,folders,i,metadata,_i11,dirName,itemsShared,_i12,item,itemMetadata;return _regeneratorRuntime.wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:if(!(email==this.state.userEmail)){_context27.next=2;break;}return _context27.abrupt(\"return\",callback(language.get(this.state.lang,\"cannotShareWithSelf\")));case 2:_context27.next=4;return loadingController.create({message:\"\"});case 4:loading=_context27.sent;loading.present();_context27.prev=6;_context27.next=9;return utils.apiRequest(\"POST\",\"/v1/user/publicKey/get\",{email:email});case 9:res=_context27.sent;_context27.next=16;break;case 12:_context27.prev=12;_context27.t0=_context27[\"catch\"](6);loading.dismiss();return _context27.abrupt(\"return\",callback(_context27.t0));case 16:if(res.status){_context27.next=19;break;}loading.dismiss();return _context27.abrupt(\"return\",callback(res.message));case 19:userPubKey=res.data.publicKey;if(!(userPubKey==null)){_context27.next=23;break;}loading.dismiss();return _context27.abrupt(\"return\",callback(language.get(this.state.lang,\"shareItemUserNotFound\",true,[\"__EMAIL__\"],[email])));case 23:if(!(userPubKey.length<=1)){_context27.next=26;break;}loading.dismiss();return _context27.abrupt(\"return\",callback(language.get(this.state.lang,\"shareItemUserNotFound\",true,[\"__EMAIL__\"],[email])));case 26:_context27.prev=26;_context27.next=29;return window.crypto.subtle.importKey(\"spki\",utils._base64ToArrayBuffer(userPubKey),{name:\"RSA-OAEP\",hash:\"SHA-512\"},true,[\"encrypt\"]);case 29:usrPubKey=_context27.sent;_context27.next=36;break;case 32:_context27.prev=32;_context27.t1=_context27[\"catch\"](26);loading.dismiss();return _context27.abrupt(\"return\",callback(_context27.t1));case 36:if(!(type==\"file\")){_context27.next=71;break;}if(!(typeof window.customVariables.cachedFiles[uuid]==\"undefined\")){_context27.next=40;break;}loading.dismiss();return _context27.abrupt(\"return\",callback(language.get(this.state.lang,\"shareItemFileNotFound\",true,[\"__NAME__\"],[uuid])));case 40:fileName=window.customVariables.cachedFiles[uuid].name;fileSize=window.customVariables.cachedFiles[uuid].size;fileMime=window.customVariables.cachedFiles[uuid].mime;fileKey=window.customVariables.cachedFiles[uuid].key;_context27.prev=44;_context27.next=47;return window.crypto.subtle.encrypt({name:\"RSA-OAEP\"},usrPubKey,new TextEncoder().encode(JSON.stringify({name:fileName,size:fileSize,mime:fileMime,key:fileKey})));case 47:encrypted=_context27.sent;_context27.next=54;break;case 50:_context27.prev=50;_context27.t2=_context27[\"catch\"](44);loading.dismiss();return _context27.abrupt(\"return\",console.log(_context27.t2));case 54:_context27.prev=54;_context27.next=57;return utils.apiRequest(\"POST\",\"/v1/share\",{apiKey:this.state.userAPIKey,uuid:uuid,parent:\"none\",email:email,type:\"file\",metadata:utils.base64ArrayBuffer(encrypted)});case 57:res=_context27.sent;_context27.next=64;break;case 60:_context27.prev=60;_context27.t3=_context27[\"catch\"](54);loading.dismiss();return _context27.abrupt(\"return\",callback(_context27.t3));case 64:if(res.status){_context27.next=67;break;}loading.dismiss();return _context27.abrupt(\"return\",callback(res.message));case 67:loading.dismiss();return _context27.abrupt(\"return\",callback(null));case 71:_context27.prev=71;_context27.next=74;return utils.apiRequest(\"POST\",\"/v1/download/dir\",{apiKey:this.state.userAPIKey,uuid:uuid});case 74:res=_context27.sent;_context27.next=81;break;case 77:_context27.prev=77;_context27.t4=_context27[\"catch\"](71);loading.dismiss();return _context27.abrupt(\"return\",callback(_context27.t4));case 81:if(res.status){_context27.next=84;break;}loading.dismiss();return _context27.abrupt(\"return\",callback(res.message));case 84:shareItems=[];files=res.data.files;folders=res.data.folders;if(!(files.length+folders.length>1000)){_context27.next=90;break;}loading.dismiss();return _context27.abrupt(\"return\",callback(language.get(this.state.lang,\"shareTooBigForApp\")));case 90:for(i=0;i<files.length;i++){metadata=utils.decryptFileMetadata(files[i].metadata,this.state.userMasterKeys,files[i].uuid);if(metadata.key.length>0){shareItems.push({uuid:files[i].uuid,parent:files[i].parent,metadata:{name:metadata.name,size:parseInt(metadata.size),mime:metadata.mime,key:metadata.key},type:\"file\"});}}for(_i11=0;_i11<folders.length;_i11++){dirName=utils.decryptCryptoJSFolderName(folders[_i11].name,this.state.userMasterKeys,folders[_i11].uuid);if(dirName!==\"CON_NO_DECRYPT_POSSIBLE_NO_NAME_FOUND_FOR_FOLDER\"){shareItems.push({uuid:folders[_i11].uuid,parent:_i11==0?\"none\":folders[_i11].parent,metadata:dirName,type:\"folder\"});}}itemsShared=0;_i12=0;case 94:if(!(_i12<shareItems.length)){_context27.next=125;break;}item=shareItems[_i12];itemMetadata=\"\";if(item.type==\"file\"){itemMetadata=JSON.stringify(item.metadata);}else{itemMetadata=JSON.stringify({name:item.metadata});}_context27.prev=98;_context27.next=101;return window.crypto.subtle.encrypt({name:\"RSA-OAEP\"},usrPubKey,new TextEncoder().encode(itemMetadata));case 101:encrypted=_context27.sent;_context27.next=108;break;case 104:_context27.prev=104;_context27.t5=_context27[\"catch\"](98);loading.dismiss();return _context27.abrupt(\"return\",callback(_context27.t5));case 108:_context27.prev=108;_context27.next=111;return utils.apiRequest(\"POST\",\"/v1/share\",{apiKey:this.state.userAPIKey,uuid:item.uuid,parent:item.parent,email:email,type:item.type,metadata:utils.base64ArrayBuffer(encrypted)});case 111:res=_context27.sent;_context27.next=117;break;case 114:_context27.prev=114;_context27.t6=_context27[\"catch\"](108);console.log(_context27.t6);case 117:if(!res.status){console.log(res.message);}itemsShared+=1;if(!(itemsShared==shareItems.length)){_context27.next=122;break;}loading.dismiss();return _context27.abrupt(\"return\",callback(null));case 122:_i12++;_context27.next=94;break;case 125:case\"end\":return _context27.stop();}}},_callee27,this,[[6,12],[26,32],[44,50],[54,60],[71,77],[98,104],[108,114]]);}));return _shareItemWithEmail.apply(this,arguments);}export function shareSelectedItems(){return _shareSelectedItems.apply(this,arguments);}function _shareSelectedItems(){_shareSelectedItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee29(){var _this15=this;var items,alert;return _regeneratorRuntime.wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:_context29.next=2;return this.getSelectedItems();case 2:items=_context29.sent;window.customFunctions.dismissPopover();window.customFunctions.unselectAllItems();_context29.next=7;return alertController.create({header:language.get(this.state.lang,\"shareItems\"),inputs:[{type:\"text\",id:\"share-items-email-input\",name:\"share-items-email-input\",placeholder:language.get(this.state.lang,\"receiverEmail\")}],buttons:[{text:language.get(this.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(this.state.lang,\"alertOkButton\"),handler:function(){var _handler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee28(inputs){var email,itemsShared,i,item;return _regeneratorRuntime.wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:email=inputs['share-items-email-input'];itemsShared=0;for(i=0;i<items.length;i++){item=items[i];if(item.type==\"folder\"&&item.uuid==\"default\"){_this15.spawnToast(language.get(_this15.state.lang,\"cannotShareDefaultFolder\"));}else{_this15.shareItemWithEmail(email,item.uuid,item.type,function(err){if(err){console.log(err);_this15.spawnToast(err.toString());}itemsShared+=1;if(itemsShared>=items.length){return _this15.spawnToast(language.get(_this15.state.lang,\"itemsShared\",true,[\"__COUNT__\",\"__EMAIL__\"],[items.length,email]));}});}}case 3:case\"end\":return _context28.stop();}}},_callee28);}));function handler(_x54){return _handler.apply(this,arguments);}return handler;}()}]});case 7:alert=_context29.sent;_context29.next=10;return alert.present();case 10:setTimeout(function(){try{document.querySelector(\"ion-alert input\").focus();}catch(e){}},500);return _context29.abrupt(\"return\",true);case 12:case\"end\":return _context29.stop();}}},_callee29,this);}));return _shareSelectedItems.apply(this,arguments);}export function shareItem(_x22){return _shareItem.apply(this,arguments);}function _shareItem(){_shareItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee30(item){var _this16=this;var alert;return _regeneratorRuntime.wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:if(!(item.type==\"folder\"&&item.uuid==\"default\")){_context30.next=2;break;}return _context30.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"cannotShareDefaultFolder\")));case 2:_context30.next=4;return alertController.create({header:item.type==\"file\"?language.get(this.state.lang,\"shareFile\"):language.get(this.state.lang,\"shareFolder\"),inputs:[{type:\"text\",id:\"share-item-email-input\",name:\"share-item-email-input\",placeholder:language.get(this.state.lang,\"receiverEmail\")}],buttons:[{text:language.get(this.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(this.state.lang,\"alertOkButton\"),handler:function handler(inputs){var email=inputs['share-item-email-input'];_this16.shareItemWithEmail(email,item.uuid,item.type,function(err){if(err){console.log(err);return _this16.spawnToast(err.toString());}return _this16.spawnToast(language.get(_this16.state.lang,\"itemShared\",true,[\"__NAME__\",\"__WITH__\"],[item.name,email]));});}}]});case 4:alert=_context30.sent;_context30.next=7;return alert.present();case 7:setTimeout(function(){try{document.querySelector(\"ion-alert input\").focus();}catch(e){}},500);return _context30.abrupt(\"return\",true);case 9:case\"end\":return _context30.stop();}}},_callee30,this);}));return _shareItem.apply(this,arguments);}export function openPublicLinkModal(_x23){return _openPublicLinkModal.apply(this,arguments);}function _openPublicLinkModal(){_openPublicLinkModal=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee31(item){var loading,res,appLang,appDarkMode,modalId,modal;return _regeneratorRuntime.wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_context31.next=2;return loadingController.create({message:\"\"});case 2:loading=_context31.sent;loading.present();_context31.prev=4;_context31.next=7;return utils.apiRequest(\"POST\",\"/v1/link/status\",{apiKey:this.state.userAPIKey,fileUUID:item.uuid});case 7:res=_context31.sent;_context31.next=15;break;case 10:_context31.prev=10;_context31.t0=_context31[\"catch\"](4);console.log(_context31.t0);loading.dismiss();return _context31.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"apiRequestError\")));case 15:if(res.status){_context31.next=19;break;}console.log(res.message);loading.dismiss();return _context31.abrupt(\"return\",this.spawnToast(res.message));case 19:loading.dismiss();appLang=this.state.lang;appDarkMode=this.state.darkMode;modalId=\"public-link-modal-\"+utils.generateRandomClassName();customElements.define(modalId,/*#__PURE__*/function(_HTMLElement3){_inherits(ModalContent,_HTMLElement3);var _super3=_createSuper(ModalContent);function ModalContent(){_classCallCheck(this,ModalContent);return _super3.apply(this,arguments);}_createClass(ModalContent,[{key:\"connectedCallback\",value:function connectedCallback(){this.innerHTML=\"\\n\\t\\t\\t\\t<ion-header>\\n\\t\\t\\t\\t\\t<ion-toolbar>\\n\\t\\t\\t\\t\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ion-button onClick=\\\"window.customFunctions.dismissModal()\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t</ion-button>\\n\\t\\t\\t\\t\\t\\t</ion-buttons>\\n\\t\\t\\t\\t\\t\\t<ion-title>\\n\\t\\t\\t\\t\\t\\t\\t\"+language.get(appLang,\"publicLinkHeader\",true,[\"__NAME__\"],[item.name])+\"\\n\\t\\t\\t\\t\\t\\t</ion-title>\\n\\t\\t\\t\\t\\t</ion-toolbar>\\n\\t\\t\\t\\t</ion-header>\\n\\t\\t\\t\\t<ion-content style=\\\"--background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\" fullscreen>\\n\\t\\t\\t\\t\\t<div id=\\\"enable-public-link-content\\\" \"+(res.data.enabled&&\"style=\\\"display: none;\\\"\")+\">\\n\\t\\t\\t\\t\\t\\t<div style=\\\"position: absolute; left: 50%; top: 32%; transform: translate(-50%, -50%); width: 100%;\\\"> \\n\\t\\t\\t\\t\\t\\t\\t<center>\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-icon icon=\\\"\"+Ionicons.link+\"\\\" style=\\\"font-size: 65pt; color: \"+(appDarkMode?\"white\":\"gray\")+\";\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t\\t\\t\\t\\t<ion-button color=\\\"primary\\\" fill=\\\"solid\\\" onClick=\\\"window.customFunctions.editItemPublicLink('\"+window.btoa(JSON.stringify(item))+\"', 'enable')\\\">\"+language.get(appLang,\"enablePublicLink\")+\"</ion-button>\\t\\n\\t\\t\\t\\t\\t\\t\\t</center>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div id=\\\"public-link-enabled-content\\\" \"+(!res.data.enabled&&\"style=\\\"display: none;\\\"\")+\">\\n\\t\\t\\t\\t\\t\\t<ion-item lines=\\\"none\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ion-label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+language.get(appLang,\"publicLinkEnabled\")+\"\\n\\t\\t\\t\\t\\t\\t\\t</ion-label>\\n\\t\\t\\t\\t\\t\\t\\t<ion-toggle slot=\\\"end\\\" id=\\\"public-link-enabled-toggle\\\" onClick=\\\"window.customFunctions.editItemPublicLink('\"+window.btoa(JSON.stringify(item))+\"', 'disable')\\\" checked></ion-toggle>\\n\\t\\t\\t\\t\\t\\t</ion-item>\\n\\t\\t\\t\\t\\t\\t<ion-item lines=\\\"none\\\">\\n\\t\\t\\t\\t\\t\\t\\t<ion-input type=\\\"text\\\" id=\\\"public-link-input\\\" onClick=\\\"window.customFunctions.copyPublicLinkToClipboard()\\\" value=\\\"https://filen.io/d/\"+res.data.uuid+\"#!\"+item.key+\"\\\" disabled></ion-input>\\n                            <ion-buttons slot=\\\"end\\\" onClick=\\\"window.customFunctions.copyPublicLinkToClipboard()\\\">\\n                                <ion-button fill=\\\"solid\\\" color=\\\"\"+(appDarkMode?\"dark\":\"light\")+\"\\\">\\n                                    \"+language.get(appLang,\"copy\")+\"\\n                                </ion-button>\\n                            </ion-buttons>\\n                        </ion-item>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</ion-content>\\n\\t\\t\\t\";}}]);return ModalContent;}(/*#__PURE__*/_wrapNativeSuper(HTMLElement)));_context31.next=26;return modalController.create({component:modalId,swipeToClose:false,showBackdrop:false,backdropDismiss:false,cssClass:\"modal-fullscreen\"});case 26:modal=_context31.sent;return _context31.abrupt(\"return\",modal.present());case 28:case\"end\":return _context31.stop();}}},_callee31,this,[[4,10]]);}));return _openPublicLinkModal.apply(this,arguments);}export function makeItemAvailableOffline(offline,item){var _this4=this;if(!offline){this.getDownloadDir(true,item.uuid,/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(err,dirObj){var items,windowItems,i,_i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!err){_context2.next=3;break;}console.log(err);return _context2.abrupt(\"return\",_this4.spawnToast(language.get(_this4.state.lang,\"couldNotGetDownloadDir\")));case 3:_context2.prev=3;_context2.next=6;return Plugins.Filesystem.rmdir({path:dirObj.path,directory:dirObj.directory,recursive:true});case 6:delete window.customVariables.offlineSavedFiles[item.uuid];_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](3);console.log(_context2.t0);return _context2.abrupt(\"return\",_this4.spawnToast(language.get(_this4.state.lang,\"couldNotDeleteDownloadedFile\",true,[\"__NAME__\"],[item.name])));case 13:items=_this4.state.itemList;windowItems=window.customVariables.itemList;for(i=0;i<items.length;i++){if(items[i].uuid==item.uuid){items[i].offline=false;}}for(_i=0;_i<windowItems.length;_i++){if(windowItems[_i].uuid==item.uuid){windowItems[_i].offline=false;}}_this4.setState({itemList:items});window.customVariables.itemList=windowItems;if(typeof window.customVariables.cachedFiles[item.uuid]!==\"undefined\"){window.customVariables.cachedFiles[item.uuid].offline=false;}_this4.spawnToast(language.get(_this4.state.lang,\"fileDeletedFromOfflineStorage\",true,[\"__NAME__\"],[item.name]));window.customFunctions.saveOfflineSavedFiles();return _context2.abrupt(\"return\",_this4.forceUpdate());case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[3,9]]);}));return function(_x24,_x25){return _ref2.apply(this,arguments);};}());}else{var nItem=item;nItem.makeOffline=true;return this.queueFileDownload(nItem);}}export function removeSharedInItem(_x26,_x27){return _removeSharedInItem.apply(this,arguments);}function _removeSharedInItem(){_removeSharedInItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee32(item,showLoader){var _this17=this;var loading,res;return _regeneratorRuntime.wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:if(!showLoader){_context32.next=5;break;}_context32.next=3;return loadingController.create({message:\"\"});case 3:loading=_context32.sent;loading.present();case 5:_context32.prev=5;_context32.next=8;return utils.apiRequest(\"POST\",\"/v1/user/shared/item/in/remove\",{apiKey:this.state.userAPIKey,uuid:item.uuid,receiverId:0});case 8:res=_context32.sent;_context32.next=16;break;case 11:_context32.prev=11;_context32.t0=_context32[\"catch\"](5);console.log(_context32.t0);if(showLoader){loading.dismiss();}return _context32.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"apiRequestError\")));case 16:if(res.status){_context32.next=20;break;}console.log(res.message);if(showLoader){loading.dismiss();}return _context32.abrupt(\"return\",this.spawnToast(res.message));case 20:if(showLoader){loading.dismiss();}clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){_this17.updateItemList();},500);return _context32.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"itemRemovedFromSharedIn\",true,[\"__NAME__\"],[item.name])));case 24:case\"end\":return _context32.stop();}}},_callee32,this,[[5,11]]);}));return _removeSharedInItem.apply(this,arguments);}export function stopSharingItem(_x28,_x29){return _stopSharingItem.apply(this,arguments);}function _stopSharingItem(){_stopSharingItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee33(item,showLoader){var _this18=this;var loading,res;return _regeneratorRuntime.wrap(function _callee33$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:if(!showLoader){_context33.next=5;break;}_context33.next=3;return loadingController.create({message:\"\"});case 3:loading=_context33.sent;loading.present();case 5:_context33.prev=5;_context33.next=8;return utils.apiRequest(\"POST\",\"/v1/user/shared/item/out/remove\",{apiKey:this.state.userAPIKey,uuid:item.uuid,receiverId:item.receiverId});case 8:res=_context33.sent;_context33.next=16;break;case 11:_context33.prev=11;_context33.t0=_context33[\"catch\"](5);console.log(_context33.t0);if(showLoader){loading.dismiss();}return _context33.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"apiRequestError\")));case 16:if(res.status){_context33.next=20;break;}console.log(res.message);if(showLoader){loading.dismiss();}return _context33.abrupt(\"return\",this.spawnToast(res.message));case 20:if(showLoader){loading.dismiss();}clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){_this18.updateItemList();},500);return _context33.abrupt(\"return\",this.spawnToast(language.get(this.state.lang,\"itemStoppedSharing\",true,[\"__NAME__\"],[item.name])));case 24:case\"end\":return _context33.stop();}}},_callee33,this,[[5,11]]);}));return _stopSharingItem.apply(this,arguments);}export function removeSelectedItemsFromSharedIn(){return _removeSelectedItemsFromSharedIn.apply(this,arguments);}function _removeSelectedItemsFromSharedIn(){_removeSelectedItemsFromSharedIn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee34(){var items,i,item;return _regeneratorRuntime.wrap(function _callee34$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_context34.next=2;return this.getSelectedItems();case 2:items=_context34.sent;window.customFunctions.dismissPopover();window.customFunctions.unselectAllItems();for(i=0;i<items.length;i++){item=items[i];this.removeSharedInItem(item,false);}return _context34.abrupt(\"return\",true);case 7:case\"end\":return _context34.stop();}}},_callee34,this);}));return _removeSelectedItemsFromSharedIn.apply(this,arguments);}export function stopSharingSelectedItems(){return _stopSharingSelectedItems.apply(this,arguments);}function _stopSharingSelectedItems(){_stopSharingSelectedItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee35(){var items,i,item;return _regeneratorRuntime.wrap(function _callee35$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:_context35.next=2;return this.getSelectedItems();case 2:items=_context35.sent;window.customFunctions.dismissPopover();window.customFunctions.unselectAllItems();for(i=0;i<items.length;i++){item=items[i];this.stopSharingItem(item,false);}return _context35.abrupt(\"return\",true);case 7:case\"end\":return _context35.stop();}}},_callee35,this);}));return _stopSharingSelectedItems.apply(this,arguments);}export function downloadSelectedItems(){return _downloadSelectedItems.apply(this,arguments);}function _downloadSelectedItems(){_downloadSelectedItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee36(){var items,i,item;return _regeneratorRuntime.wrap(function _callee36$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:_context36.next=2;return this.getSelectedItems();case 2:items=_context36.sent;window.customFunctions.dismissPopover();window.customFunctions.unselectAllItems();for(i=0;i<items.length;i++){item=items[i];if(item.type==\"file\"){this.queueFileDownload(item);}}return _context36.abrupt(\"return\",true);case 7:case\"end\":return _context36.stop();}}},_callee36,this);}));return _downloadSelectedItems.apply(this,arguments);}export function storeSelectedItemsOffline(){return _storeSelectedItemsOffline.apply(this,arguments);}function _storeSelectedItemsOffline(){_storeSelectedItemsOffline=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee37(){var items,i,item;return _regeneratorRuntime.wrap(function _callee37$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_context37.next=2;return this.getSelectedItems();case 2:items=_context37.sent;window.customFunctions.dismissPopover();window.customFunctions.unselectAllItems();for(i=0;i<items.length;i++){item=items[i];if(item.type==\"file\"){item.makeOffline=true;this.queueFileDownload(item);}}return _context37.abrupt(\"return\",true);case 7:case\"end\":return _context37.stop();}}},_callee37,this);}));return _storeSelectedItemsOffline.apply(this,arguments);}export function spawnItemActionSheet(_x30){return _spawnItemActionSheet.apply(this,arguments);}function _spawnItemActionSheet(){_spawnItemActionSheet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee38(item){var _this19=this;var buttons,headerName,actionSheet;return _regeneratorRuntime.wrap(function _callee38$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:buttons=undefined;if(item.type==\"folder\"){if(window.location.href.indexOf(\"shared-in\")!==-1){buttons=[{text:language.get(this.state.lang,\"removeFromShared\"),icon:Ionicons.stopCircle,handler:function handler(){_this19.removeSharedInItem(item,false);}},{text:language.get(this.state.lang,\"cancel\"),icon:Ionicons.close,handler:function handler(){return actionSheet.dismiss();}}];}else if(window.location.href.indexOf(\"shared-out\")!==-1){buttons=[{text:language.get(this.state.lang,\"stopSharing\"),icon:Ionicons.stopCircle,handler:function handler(){_this19.stopSharingItem(item,false);}},{text:language.get(this.state.lang,\"cancel\"),icon:Ionicons.close,handler:function handler(){return actionSheet.dismiss();}}];}else if(window.location.href.indexOf(\"trash\")!==-1){buttons=[{text:language.get(this.state.lang,\"restoreItem\"),icon:Ionicons.bagAdd,handler:function handler(){return _this19.restoreItem(item,false);}},{text:language.get(this.state.lang,\"cancel\"),icon:Ionicons.close,handler:function handler(){return actionSheet.dismiss();}}];}else{buttons=[{text:language.get(this.state.lang,\"shareItem\"),icon:Ionicons.shareSocial,handler:function handler(){return _this19.shareItem(item);}},{text:language.get(this.state.lang,\"moveItem\"),icon:Ionicons.move,handler:function handler(){return _this19.moveItem(item);}},{text:language.get(this.state.lang,\"renameItem\"),icon:Ionicons.text,handler:function handler(){return _this19.renameItem(item);}},{text:language.get(this.state.lang,\"trashItem\"),icon:Ionicons.trash,handler:function handler(){return _this19.trashItem(item,false);}},{text:language.get(this.state.lang,\"cancel\"),icon:Ionicons.close,handler:function handler(){return actionSheet.dismiss();}}];}}else{if(window.location.href.indexOf(\"shared-in\")!==-1){buttons=[{text:language.get(this.state.lang,\"downloadItem\"),icon:Ionicons.download,handler:function handler(){window.customFunctions.dismissModal();return _this19.queueFileDownload(item);}},{text:item.offline?language.get(this.state.lang,\"removeItemFromOffline\"):language.get(this.state.lang,\"makeItemAvailableOffline\"),icon:Ionicons.save,handler:function handler(){window.customFunctions.dismissModal();if(item.offline){return _this19.makeItemAvailableOffline(false,item);}else{return _this19.makeItemAvailableOffline(true,item);}}},{text:language.get(this.state.lang,\"removeFromShared\"),icon:Ionicons.stopCircle,handler:function handler(){_this19.removeSharedInItem(item,false);}},{text:language.get(this.state.lang,\"cancel\"),icon:Ionicons.close,handler:function handler(){return actionSheet.dismiss();}}];}else if(window.location.href.indexOf(\"shared-out\")!==-1){buttons=[{text:language.get(this.state.lang,\"downloadItem\"),icon:Ionicons.download,handler:function handler(){window.customFunctions.dismissModal();return _this19.queueFileDownload(item);}},{text:item.offline?language.get(this.state.lang,\"removeItemFromOffline\"):language.get(this.state.lang,\"makeItemAvailableOffline\"),icon:Ionicons.save,handler:function handler(){window.customFunctions.dismissModal();if(item.offline){return _this19.makeItemAvailableOffline(false,item);}else{return _this19.makeItemAvailableOffline(true,item);}}},{text:language.get(this.state.lang,\"stopSharing\"),icon:Ionicons.stopCircle,handler:function handler(){_this19.stopSharingItem(item,false);}},{text:language.get(this.state.lang,\"cancel\"),icon:Ionicons.close,handler:function handler(){return actionSheet.dismiss();}}];}else if(window.location.href.indexOf(\"trash\")!==-1){buttons=[{text:language.get(this.state.lang,\"downloadItem\"),icon:Ionicons.download,handler:function handler(){window.customFunctions.dismissModal();return _this19.queueFileDownload(item);}},{text:language.get(this.state.lang,\"restoreItem\"),icon:Ionicons.bagAdd,handler:function handler(){window.customFunctions.dismissModal();return _this19.restoreItem(item,false);}},{text:language.get(this.state.lang,\"cancel\"),icon:Ionicons.close,handler:function handler(){return actionSheet.dismiss();}}];}else{buttons=[{text:language.get(this.state.lang,\"shareItem\"),icon:Ionicons.shareSocial,handler:function handler(){window.customFunctions.dismissModal();return _this19.shareItem(item);}},{text:language.get(this.state.lang,\"itemPublicLink\"),icon:Ionicons.link,handler:function handler(){window.customFunctions.dismissModal();return _this19.openPublicLinkModal(item);}},{text:language.get(this.state.lang,\"downloadItem\"),icon:Ionicons.download,handler:function handler(){window.customFunctions.dismissModal();return _this19.queueFileDownload(item);}},{text:item.offline?language.get(this.state.lang,\"removeItemFromOffline\"):language.get(this.state.lang,\"makeItemAvailableOffline\"),icon:Ionicons.save,handler:function handler(){window.customFunctions.dismissModal();if(item.offline){return _this19.makeItemAvailableOffline(false,item);}else{return _this19.makeItemAvailableOffline(true,item);}}},{text:language.get(this.state.lang,\"moveItem\"),icon:Ionicons.move,handler:function handler(){window.customFunctions.dismissModal();return _this19.moveItem(item);}},{text:language.get(this.state.lang,\"renameItem\"),icon:Ionicons.text,handler:function handler(){window.customFunctions.dismissModal();return _this19.renameItem(item);}},{text:language.get(this.state.lang,\"trashItem\"),icon:Ionicons.trash,handler:function handler(){window.customFunctions.dismissModal();return _this19.trashItem(item,false);}},{text:language.get(this.state.lang,\"cancel\"),icon:Ionicons.close,handler:function handler(){return actionSheet.dismiss();}}];}}headerName=item.name;if(headerName.length>=32){headerName=headerName.substring(0,32)+\"...\";}_context38.next=6;return actionSheetController.create({header:headerName,buttons:buttons});case 6:actionSheet=_context38.sent;_context38.next=9;return actionSheet.present();case 9:if(Capacitor.isNative){setTimeout(function(){Capacitor.Plugins.Keyboard.hide();},500);}return _context38.abrupt(\"return\",true);case 11:case\"end\":return _context38.stop();}}},_callee38,this);}));return _spawnItemActionSheet.apply(this,arguments);}","map":{"version":3,"sources":["/Users/jan/Documents/filen/app/src/components/items.js"],"names":["language","loadingController","modalController","popoverController","alertController","actionSheetController","Ionicons","Capacitor","HapticsImpactStyle","Plugins","FileOpener","utils","require","updateItemList","state","isLoggedIn","showLogin","userAPIKey","length","isNative","Keyboard","hide","SplashScreen","setState","searchbarOpen","mainSearchTerm","routeEx","window","location","hash","split","parent","create","message","loading","present","customVariables","currentThumbnailURL","href","items","apiRequest","apiKey","res","console","log","customFunctions","dismissLoader","header","subHeader","get","lang","buttons","toUpperCase","alert","status","push","type","uuid","name","date","timestamp","Date","receiverId","receiverEmail","sharerId","sharerEmail","i","data","folders","folder","folderName","decryptCryptoJSFolderName","userMasterKeys","uploadDate","toString","item","sanitizeHTML","cachedFolders","iItems","toLowerCase","crypto","subtle","importKey","_base64ToArrayBuffer","userPrivateKey","usrPrivKey","JSON","stringify","page","app","decryptFolderNamePrivateKey","metadata","uploads","file","decryptFileMetadataPrivateKey","decryptedMetadata","offline","offlineSavedFiles","mime","size","parseInt","key","bucket","region","rm","chunks","thumbnail","thumbnailBlobCache","undefined","cachedFiles","currentReceiverId","decryptFileMetadata","orderItemsByType","orderBy","itemList","scrollTo","scrollToIndex","dismiss","forceUpdate","getFileThumbnail","saveCachedItems","saveThumbnailCache","thumbURL","index","indexOf","getThumbnailErrors","intervalTimer","getRandomArbitrary","document","getElementById","onScreenInterval","setInterval","clearInterval","ext","canShowThumbnail","getThumbnail","saveGetThumbnailErrors","updateItemsSemaphore","acquire","newItems","release","refreshMainList","event","detail","complete","selectItem","selectedItems","selected","Haptics","impact","Light","clearSelectedItems","selectItemsAction","persist","appLang","customElementId","generateRandomClassName","selectedItemsDoesNotContainFolder","inner","customElements","define","innerHTML","HTMLElement","component","popover","previewItem","lastModalPreviewType","settings","onlyWifi","Network","getStatus","networkStatus","connectionType","spawnToast","getDownloadDir","err","dirObj","open","uri","then","catch","nameEx","previewType","getFilePreviewType","dismissModal","spawnItemActionSheet","gotPreviewData","dataArray","blob","Blob","currentPreviewURL","urlCreator","revokeObjectURL","createObjectURL","previewModalContent","arrowBack","btoa","ellipsisVertical","text","TextDecoder","decode","join","setupBars","setupStatusbar","getTop","modal","onDidDismiss","setupSlider","lastPreviewType","slider","getPrevOrNextItem","step","max","tries","getItemRecursive","listIndex","thisNameEx","thisPreviewType","options","freeMode","offset","offsetY","xDown","yDown","addEventListener","e","firstTouch","getTouch","clientX","clientY","xUp","yUp","xDiff","yDiff","xDiffAbs","Math","abs","yDiffAbs","nextItem","prevItem","changedTouches","loadPdf","renderPage","renderPages","pdfDoc","loader","numPages","getPage","viewport","getViewport","scale","canvas","createElement","ctx","getContext","renderContext","canvasContext","height","width","canvasContainer","appendChild","render","pdfjsLib","GlobalWorkerOptions","workerSrc","loadingTask","getDocument","promise","currentModal","querySelectorAll","childNodes","modalId","swipeToClose","showBackdrop","backdropDismiss","cssClass","style","backgroundColor","downloadPreview","chunksDone","dirExists","callback","nameHashed","hashFn","exists","moveFolder","destination","showLoader","currentParentFolder","existsUUID","folderUUID","checkIfItemParentIsBeingShared","clearTimeout","reloadAfterActionTimeout","setTimeout","moveFile","fileExists","fileUUID","moveItem","spawnMoveToast","cancelled","renameItem","spawnRenamePrompt","newName","removeIllegalCharsFromString","nameRegex","checkIfNameIsBanned","fileNameValidationRegex","fileExt","renameWithDot","cryptoJSEncrypt","metaData","checkIfItemIsBeingSharedForRename","Filesystem","rename","from","to","directory","folderNameRegex","moveSelectedItems","getSelectedItems","dismissPopover","unselectAllItems","trashSelectedItems","role","handler","forEach","trashItem","restoreSelectedItems","restoreItem","Promise","resolve","reject","filter","shareItemWithEmail","email","userEmail","userPubKey","publicKey","usrPubKey","fileName","fileSize","fileMime","fileKey","encrypt","TextEncoder","encode","encrypted","base64ArrayBuffer","shareItems","files","dirName","itemsShared","itemMetadata","shareSelectedItems","inputs","id","placeholder","querySelector","focus","shareItem","openPublicLinkModal","appDarkMode","darkMode","enabled","link","makeItemAvailableOffline","rmdir","path","recursive","windowItems","saveOfflineSavedFiles","nItem","makeOffline","queueFileDownload","removeSharedInItem","stopSharingItem","removeSelectedItemsFromSharedIn","stopSharingSelectedItems","downloadSelectedItems","storeSelectedItemsOffline","icon","stopCircle","close","actionSheet","bagAdd","shareSocial","move","trash","download","save","headerName","substring"],"mappings":"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","sourcesContent":["import * as language from \"../utils/language\"\r\nimport { loadingController, modalController, popoverController, alertController, actionSheetController } from \"@ionic/core\"\r\nimport * as Ionicons from 'ionicons/icons'\r\nimport { Capacitor, HapticsImpactStyle, Plugins } from \"@capacitor/core\"\r\nimport { FileOpener } from \"@ionic-native/file-opener\"\r\n\r\nconst utils = require(\"../utils/utils\")\r\n\r\nexport async function updateItemList(){\r\n\tif(!this.state.isLoggedIn){\r\n\t\treturn this.showLogin()\r\n\t}\r\n\t\r\n\tif(this.state.userAPIKey.length <= 16){\r\n\t\treturn this.showLogin()\r\n\t}\r\n\r\n\tif(Capacitor.isNative){\r\n\t\tCapacitor.Plugins.Keyboard.hide()\r\n\t\tPlugins.SplashScreen.hide()\r\n\t}\r\n\r\n\tthis.setState({\r\n        searchbarOpen: false,\r\n        mainSearchTerm: \"\"\r\n    })\r\n\r\n\tlet routeEx = window.location.hash.split(\"/\")\r\n\tlet parent = routeEx[routeEx.length - 1]\r\n\r\n    let loading = await loadingController.create({\r\n        message: \"\"\r\n    })\r\n\r\n\tloading.present()\r\n\r\n\twindow.customVariables.currentThumbnailURL = window.location.href\r\n\r\n\tlet items = []\r\n\t\r\n\tif(parent == \"base\"){\r\n\t\ttry{\r\n\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/user/baseFolders\", {\r\n\t\t\t\tapiKey: this.state.userAPIKey\r\n\t\t\t})\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\tconsole.log(e)\r\n\t\r\n\t\t\twindow.customFunctions.dismissLoader()\r\n\t\r\n\t\t\tlet alert = await alertController.create({\r\n\t\t\t\theader: \"\",\r\n\t\t\t\tsubHeader: \"\",\r\n\t\t\t\tmessage: language.get(this.state.lang, \"apiRequestError\"),\r\n\t\t\t\tbuttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n\t\t\t})\r\n\t\r\n\t\t\treturn alert.present()\r\n\t\t}\r\n\r\n\t\tif(!res.status){\r\n\t\t\tconsole.log(res.message)\r\n\t\r\n\t\t\twindow.customFunctions.dismissLoader()\r\n\t\r\n\t\t\tlet alert = await alertController.create({\r\n\t\t\t\theader: \"\",\r\n\t\t\t\tsubHeader: \"\",\r\n\t\t\t\tmessage: language.get(this.state.lang, \"apiRequestError\"),\r\n\t\t\t\tbuttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n\t\t\t})\r\n\t\r\n\t\t\treturn alert.present()\r\n\t\t}\r\n\r\n\t\titems.push({\r\n\t\t\ttype: \"folder\",\r\n\t\t\tuuid: \"default\",\r\n\t\t\tname: \"Default\",\r\n\t\t\tdate: language.get(this.state.lang, \"defaultFolder\"),\r\n\t\t\ttimestamp: (((+new Date()) / 1000) - (86400 * 3650)),\r\n\t\t\tparent: \"base\",\r\n\t\t\treceiverId: 0,\r\n\t\t\treceiverEmail: \"\",\r\n\t\t\tsharerId: 0,\r\n\t\t\tsharerEmail: \"\"\r\n\t\t})\r\n\r\n\t\tfor(let i = 0; i < res.data.folders.length; i++){\r\n\t\t\tlet folder = res.data.folders[i]\r\n\r\n\t\t\tlet folderName = utils.decryptCryptoJSFolderName(folder.name, this.state.userMasterKeys, folder.uuid)\r\n\t\t\tlet uploadDate = (new Date(folder.timestamp * 1000)).toString().split(\" \")\r\n\r\n\t\t\tlet item = {\r\n\t\t\t\ttype: \"folder\",\r\n\t\t\t\tuuid: folder.uuid,\r\n\t\t\t\tname: utils.sanitizeHTML(folderName),\r\n\t\t\t\tdate: uploadDate[1] + \" \" + uploadDate[2] + \" \" + uploadDate[3] + \" \" + uploadDate[4],\r\n\t\t\t\ttimestamp: folder.timestamp,\r\n\t\t\t\tparent: \"base\",\r\n\t\t\t\treceiverId: 0,\r\n\t\t\t\treceiverEmail: \"\",\r\n\t\t\t\tsharerId: 0,\r\n\t\t\t\tsharerEmail: \"\"\r\n\t\t\t}\r\n\r\n\t\t\titems.push(item)\r\n\r\n\t\t\twindow.customVariables.cachedFolders[folder.uuid] = item\r\n\t\t}\r\n\r\n\t\tlet iItems = []\r\n\r\n\t\tiItems.push(items[0])\r\n\r\n\t\tfor(let i = 0; i < items.length; i++){\r\n\t\t\tif(items[i].name.toLowerCase() == \"filen sync\" && items[i].uuid !== \"default\"){\r\n\t\t\t\tiItems.push(items[i])\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(let i = 0; i < items.length; i++){\r\n\t\t\tif(items[i].name.toLowerCase() !== \"filen sync\" && items[i].uuid !== \"default\"){\r\n\t\t\t\tiItems.push(items[i])\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\titems = iItems\r\n\t}\r\n\telse{\r\n\t\tif(routeEx[1] == \"shared-in\"){\r\n\t\t\ttry{\r\n\t\t\t\tvar usrPrivKey = await window.crypto.subtle.importKey(\"pkcs8\", utils._base64ToArrayBuffer(this.state.userPrivateKey), {\r\n\t\t\t\t\tname: \"RSA-OAEP\",\r\n\t\t\t\t\thash: \"SHA-512\"\r\n\t\t\t\t}, true, [\"decrypt\"])\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\r\n\t\t\t\twindow.customFunctions.dismissLoader()\r\n\t\t\r\n\t\t\t\tlet alert = await alertController.create({\r\n\t\t\t\t\theader: \"\",\r\n\t\t\t\t\tsubHeader: \"\",\r\n\t\t\t\t\tmessage: language.get(this.state.lang, \"unknownDeviceError\"),\r\n\t\t\t\t\tbuttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n\t\t\t\t})\r\n\t\t\r\n\t\t\t\treturn alert.present()\r\n\t\t\t}\r\n\r\n\t\t\ttry{\r\n\t\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/user/shared/in\", {\r\n\t\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\t\tuuid: parent,\r\n\t\t\t\t\tfolders: JSON.stringify([\"shred-in\"]),\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tapp: \"true\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\r\n\t\t\t\twindow.customFunctions.dismissLoader()\r\n\t\t\r\n\t\t\t\tlet alert = await alertController.create({\r\n\t\t\t\t\theader: \"\",\r\n\t\t\t\t\tsubHeader: \"\",\r\n\t\t\t\t\tmessage: language.get(this.state.lang, \"apiRequestError\"),\r\n\t\t\t\t\tbuttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n\t\t\t\t})\r\n\t\t\r\n\t\t\t\treturn alert.present()\r\n\t\t\t}\r\n\r\n\t\t\tif(!res.status){\r\n\t\t\t\tconsole.log(res.message)\r\n\t\t\r\n\t\t\t\twindow.customFunctions.dismissLoader()\r\n\t\t\r\n\t\t\t\tlet alert = await alertController.create({\r\n\t\t\t\t\theader: \"\",\r\n\t\t\t\t\tsubHeader: \"\",\r\n\t\t\t\t\tmessage: language.get(this.state.lang, \"apiRequestError\"),\r\n\t\t\t\t\tbuttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n\t\t\t\t})\r\n\t\t\r\n\t\t\t\treturn alert.present()\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; i < res.data.folders.length; i++){\r\n\t\t\t\tlet folder = res.data.folders[i]\r\n\r\n\t\t\t\tlet folderName = await utils.decryptFolderNamePrivateKey(folder.metadata, usrPrivKey, folder.uuid)\r\n\t\t\t\tlet uploadDate = (new Date(folder.timestamp * 1000)).toString().split(\" \")\r\n\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\ttype: \"folder\",\r\n\t\t\t\t\tuuid: folder.uuid,\r\n\t\t\t\t\tname: utils.sanitizeHTML(folderName),\r\n\t\t\t\t\tdate: uploadDate[1] + \" \" + uploadDate[2] + \" \" + uploadDate[3] + \" \" + uploadDate[4],\r\n\t\t\t\t\ttimestamp: folder.timestamp,\r\n\t\t\t\t\tparent: folder.parent,\r\n\t\t\t\t\treceiverId: 0,\r\n\t\t\t\t\treceiverEmail: \"\",\r\n\t\t\t\t\tsharerId: folder.sharerId,\r\n\t\t\t\t\tsharerEmail: folder.sharerEmail\r\n\t\t\t\t}\r\n\r\n\t\t\t\titems.push(item)\r\n\r\n\t\t\t\twindow.customVariables.cachedFolders[folder.uuid] = item\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; i < res.data.uploads.length; i++){\r\n\t\t\t\tlet file = res.data.uploads[i]\r\n\r\n\t\t\t\tlet decryptedMetadata = await utils.decryptFileMetadataPrivateKey(file.metadata, usrPrivKey, file.uuid)\r\n\t\t\t\tlet uploadDate = (new Date(file.timestamp * 1000)).toString().split(\" \")\r\n\r\n\t\t\t\tlet offline = false\r\n\r\n\t\t\t\tif(typeof window.customVariables.offlineSavedFiles[file.uuid] !== \"undefined\"){\r\n\t\t\t\t\toffline = true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\ttype: \"file\",\r\n\t\t\t\t\tuuid: file.uuid,\r\n\t\t\t\t\tname: utils.sanitizeHTML(decryptedMetadata.name),\r\n\t\t\t\t\tmime: utils.sanitizeHTML(decryptedMetadata.mime),\r\n\t\t\t\t\tsize: parseInt(decryptedMetadata.size),\r\n\t\t\t\t\tkey: utils.sanitizeHTML(decryptedMetadata.key),\r\n\t\t\t\t\tbucket: file.bucket,\r\n\t\t\t\t\tregion: file.region,\r\n\t\t\t\t\tparent: file.parent,\r\n\t\t\t\t\trm: file.rm,\r\n\t\t\t\t\tchunks: file.chunks,\r\n\t\t\t\t\tdate: uploadDate[1] + \" \" + uploadDate[2] + \" \" + uploadDate[3] + \" \" + uploadDate[4],\r\n\t\t\t\t\ttimestamp: file.timestamp,\r\n\t\t\t\t\treceiverId: 0,\r\n\t\t\t\t\treceiverEmail: \"\",\r\n\t\t\t\t\tsharerId: file.sharerId,\r\n\t\t\t\t\tsharerEmail: file.sharerEmail,\r\n\t\t\t\t\toffline: offline,\r\n\t\t\t\t\tthumbnail: (typeof window.customVariables.thumbnailBlobCache[file.uuid] !== \"undefined\" ? window.customVariables.thumbnailBlobCache[file.uuid] : undefined)\r\n\t\t\t\t}\r\n\r\n\t\t\t\titems.push(item)\r\n\r\n\t\t\t\twindow.customVariables.cachedFiles[file.uuid] = item\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(routeEx[1] == \"shared-out\"){\r\n\t\t\ttry{\r\n\t\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/user/shared/out\", {\r\n\t\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\t\tuuid: parent,\r\n\t\t\t\t\tfolders: JSON.stringify([\"default\"]),\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tapp: \"true\",\r\n\t\t\t\t\treceiverId: this.state.currentReceiverId\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\r\n\t\t\t\twindow.customFunctions.dismissLoader()\r\n\t\t\r\n\t\t\t\tlet alert = await alertController.create({\r\n\t\t\t\t\theader: \"\",\r\n\t\t\t\t\tsubHeader: \"\",\r\n\t\t\t\t\tmessage: language.get(this.state.lang, \"apiRequestError\"),\r\n\t\t\t\t\tbuttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n\t\t\t\t})\r\n\t\t\r\n\t\t\t\treturn alert.present()\r\n\t\t\t}\r\n\r\n\t\t\tif(!res.status){\r\n\t\t\t\tconsole.log(res.message)\r\n\t\t\r\n\t\t\t\twindow.customFunctions.dismissLoader()\r\n\t\t\r\n\t\t\t\tlet alert = await alertController.create({\r\n\t\t\t\t\theader: \"\",\r\n\t\t\t\t\tsubHeader: \"\",\r\n\t\t\t\t\tmessage: language.get(this.state.lang, \"apiRequestError\"),\r\n\t\t\t\t\tbuttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n\t\t\t\t})\r\n\t\t\r\n\t\t\t\treturn alert.present()\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; i < res.data.folders.length; i++){\r\n\t\t\t\tlet folder = res.data.folders[i]\r\n\r\n\t\t\t\tlet folderName = utils.decryptCryptoJSFolderName(folder.metadata, this.state.userMasterKeys, folder.uuid)\r\n\t\t\t\tlet uploadDate = (new Date(folder.timestamp * 1000)).toString().split(\" \")\r\n\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\ttype: \"folder\",\r\n\t\t\t\t\tuuid: folder.uuid,\r\n\t\t\t\t\tname: utils.sanitizeHTML(folderName),\r\n\t\t\t\t\tdate: uploadDate[1] + \" \" + uploadDate[2] + \" \" + uploadDate[3] + \" \" + uploadDate[4],\r\n\t\t\t\t\ttimestamp: folder.timestamp,\r\n\t\t\t\t\tparent: folder.parent,\r\n\t\t\t\t\treceiverId: folder.receiverId,\r\n\t\t\t\t\treceiverEmail: folder.receiverEmail,\r\n\t\t\t\t\tsharerId: 0,\r\n\t\t\t\t\tsharerEmail: \"\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\titems.push(item)\r\n\r\n\t\t\t\twindow.customVariables.cachedFolders[folder.uuid] = item\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; i < res.data.uploads.length; i++){\r\n\t\t\t\tlet file = res.data.uploads[i]\r\n\r\n\t\t\t\tlet metadata = utils.decryptFileMetadata(file.metadata, this.state.userMasterKeys, file.uuid)\r\n\t\t\t\tlet uploadDate = (new Date(file.timestamp * 1000)).toString().split(\" \")\r\n\r\n\t\t\t\tlet offline = false\r\n\r\n\t\t\t\tif(typeof window.customVariables.offlineSavedFiles[file.uuid] !== \"undefined\"){\r\n\t\t\t\t\toffline = true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\ttype: \"file\",\r\n\t\t\t\t\tuuid: file.uuid,\r\n\t\t\t\t\tname: utils.sanitizeHTML(metadata.name),\r\n\t\t\t\t\tmime: utils.sanitizeHTML(metadata.mime),\r\n\t\t\t\t\tsize: parseInt(metadata.size),\r\n\t\t\t\t\tkey: utils.sanitizeHTML(metadata.key),\r\n\t\t\t\t\tbucket: file.bucket,\r\n\t\t\t\t\tregion: file.region,\r\n\t\t\t\t\tparent: file.parent,\r\n\t\t\t\t\trm: file.rm,\r\n\t\t\t\t\tchunks: file.chunks,\r\n\t\t\t\t\tdate: uploadDate[1] + \" \" + uploadDate[2] + \" \" + uploadDate[3] + \" \" + uploadDate[4],\r\n\t\t\t\t\ttimestamp: file.timestamp,\r\n\t\t\t\t\treceiverId: file.receiverId,\r\n\t\t\t\t\treceiverEmail: file.receiverEmail,\r\n\t\t\t\t\tsharerId: 0,\r\n\t\t\t\t\tsharerEmail: \"\",\r\n\t\t\t\t\toffline: offline,\r\n\t\t\t\t\tthumbnail: (typeof window.customVariables.thumbnailBlobCache[file.uuid] !== \"undefined\" ? window.customVariables.thumbnailBlobCache[file.uuid] : undefined)\r\n\t\t\t\t}\r\n\r\n\t\t\t\titems.push(item)\r\n\r\n\t\t\t\twindow.customVariables.cachedFiles[file.uuid] = item\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\ttry{\r\n\t\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/dir/content\", {\r\n\t\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\t\tuuid: parent,\r\n\t\t\t\t\tfolders: JSON.stringify([\"default\"]),\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tapp: \"true\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\r\n\t\t\t\twindow.customFunctions.dismissLoader()\r\n\t\t\r\n\t\t\t\tlet alert = await alertController.create({\r\n\t\t\t\t\theader: \"\",\r\n\t\t\t\t\tsubHeader: \"\",\r\n\t\t\t\t\tmessage: language.get(this.state.lang, \"apiRequestError\"),\r\n\t\t\t\t\tbuttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n\t\t\t\t})\r\n\t\t\r\n\t\t\t\treturn alert.present()\r\n\t\t\t}\r\n\r\n\t\t\tif(!res.status){\r\n\t\t\t\tconsole.log(res.message)\r\n\t\t\r\n\t\t\t\twindow.customFunctions.dismissLoader()\r\n\t\t\r\n\t\t\t\tlet alert = await alertController.create({\r\n\t\t\t\t\theader: \"\",\r\n\t\t\t\t\tsubHeader: \"\",\r\n\t\t\t\t\tmessage: language.get(this.state.lang, \"apiRequestError\"),\r\n\t\t\t\t\tbuttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n\t\t\t\t})\r\n\t\t\r\n\t\t\t\treturn alert.present()\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; i < res.data.folders.length; i++){\r\n\t\t\t\tlet folder = res.data.folders[i]\r\n\r\n\t\t\t\tlet folderName = utils.decryptCryptoJSFolderName(folder.name, this.state.userMasterKeys, folder.uuid)\r\n\t\t\t\tlet uploadDate = (new Date(folder.timestamp * 1000)).toString().split(\" \")\r\n\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\ttype: \"folder\",\r\n\t\t\t\t\tuuid: folder.uuid,\r\n\t\t\t\t\tname: utils.sanitizeHTML(folderName),\r\n\t\t\t\t\tdate: uploadDate[1] + \" \" + uploadDate[2] + \" \" + uploadDate[3] + \" \" + uploadDate[4],\r\n\t\t\t\t\ttimestamp: folder.timestamp,\r\n\t\t\t\t\tparent: folder.parent,\r\n\t\t\t\t\treceiverId: 0,\r\n\t\t\t\t\treceiverEmail: \"\",\r\n\t\t\t\t\tsharerId: 0,\r\n\t\t\t\t\tsharerEmail: \"\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\titems.push(item)\r\n\r\n\t\t\t\twindow.customVariables.cachedFolders[folder.uuid] = item\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; i < res.data.uploads.length; i++){\r\n\t\t\t\tlet file = res.data.uploads[i]\r\n\r\n\t\t\t\tlet metadata = utils.decryptFileMetadata(file.metadata, this.state.userMasterKeys, file.uuid)\r\n\t\t\t\tlet uploadDate = (new Date(file.timestamp * 1000)).toString().split(\" \")\r\n\r\n\t\t\t\tlet offline = false\r\n\r\n\t\t\t\tif(typeof window.customVariables.offlineSavedFiles[file.uuid] !== \"undefined\"){\r\n\t\t\t\t\toffline = true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\ttype: \"file\",\r\n\t\t\t\t\tuuid: file.uuid,\r\n\t\t\t\t\tname: utils.sanitizeHTML(metadata.name),\r\n\t\t\t\t\tmime: utils.sanitizeHTML(metadata.mime),\r\n\t\t\t\t\tsize: parseInt(metadata.size),\r\n\t\t\t\t\tkey: utils.sanitizeHTML(metadata.key),\r\n\t\t\t\t\tbucket: file.bucket,\r\n\t\t\t\t\tregion: file.region,\r\n\t\t\t\t\tparent: file.parent,\r\n\t\t\t\t\trm: file.rm,\r\n\t\t\t\t\tchunks: file.chunks,\r\n\t\t\t\t\tdate: uploadDate[1] + \" \" + uploadDate[2] + \" \" + uploadDate[3] + \" \" + uploadDate[4],\r\n\t\t\t\t\ttimestamp: file.timestamp,\r\n\t\t\t\t\treceiverId: 0,\r\n\t\t\t\t\treceiverEmail: \"\",\r\n\t\t\t\t\tsharerId: 0,\r\n\t\t\t\t\tsharerEmail: \"\",\r\n\t\t\t\t\toffline: offline,\r\n\t\t\t\t\tthumbnail: (typeof window.customVariables.thumbnailBlobCache[file.uuid] !== \"undefined\" ? window.customVariables.thumbnailBlobCache[file.uuid] : undefined)\r\n\t\t\t\t}\r\n\r\n\t\t\t\titems.push(item)\r\n\r\n\t\t\t\twindow.customVariables.cachedFiles[file.uuid] = item\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\titems = utils.orderItemsByType(items, window.customVariables.orderBy)\r\n\r\n\twindow.customVariables.itemList = items\r\n\r\n\tlet scrollTo = 0\r\n\r\n\tif(typeof window.customVariables.scrollToIndex[parent] !== \"undefined\"){\r\n\t\tscrollTo = window.customVariables.scrollToIndex[parent]\r\n\r\n\t\tdelete window.customVariables.scrollToIndex[parent]\r\n\t}\r\n\r\n\treturn this.setState({\r\n\t\titemList: items,\r\n\t\tscrollToIndex: scrollTo\r\n\t}, () => {\r\n\t\tloading.dismiss()\r\n\r\n\t\tthis.forceUpdate()\r\n\r\n\t\twindow.customVariables.currentThumbnailURL = window.location.href\r\n\r\n\t\tfor(let i = 0; i < items.length; i++){\r\n\t\t\tthis.getFileThumbnail(items[i], window.customVariables.currentThumbnailURL, i)\r\n\t\t}\r\n\r\n\t\twindow.customFunctions.saveCachedItems()\r\n\t\twindow.customFunctions.saveThumbnailCache()\r\n\t})\r\n}\r\n\r\nexport function getFileThumbnail(file, thumbURL, index){\r\n\tif(file.type !== \"file\" || file.name.indexOf(\".\") == -1 || typeof file.thumbnail !== \"undefined\"){\r\n\t\treturn false\r\n\t}\r\n\r\n\tif(typeof window.customVariables.getThumbnailErrors[file.uuid] !== \"undefined\"){\r\n\t\tif(window.customVariables.getThumbnailErrors[file.uuid] >= 16){\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tlet intervalTimer = utils.getRandomArbitrary(10, 50)\r\n\r\n\tif(document.getElementById(\"item-thumbnail-\" + file.uuid) !== null){\r\n\t\tintervalTimer = 1\r\n\t}\r\n\r\n\tlet onScreenInterval = setInterval(async () => {\r\n\t\tif(thumbURL !== window.location.href){\r\n\t\t\treturn clearInterval(onScreenInterval)\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(document.getElementById(\"item-thumbnail-\" + file.uuid) !== null){\r\n\t\t\t\tclearInterval(onScreenInterval)\r\n\r\n\t\t\t\tlet ext = file.name.split(\".\")\r\n\t\t\t\text = ext[ext.length - 1]\r\n\r\n\t\t\t\tlet thumbnail = undefined\r\n\t\t\r\n\t\t\t\tif(utils.canShowThumbnail(ext)){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tthumbnail = await this.getThumbnail(file, thumbURL, ext)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\r\n\t\t\t\t\t\tif(e.indexOf(\"url changed\") == -1){\r\n\t\t\t\t\t\t\tif(typeof window.customVariables.getThumbnailErrors[file.uuid] !== \"undefined\"){\r\n\t\t\t\t\t\t\t\twindow.customVariables.getThumbnailErrors[file.uuid] = window.customVariables.getThumbnailErrors[file.uuid] + 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\twindow.customVariables.getThumbnailErrors[file.uuid] = 1\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\twindow.customFunctions.saveGetThumbnailErrors()\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof thumbnail !== \"undefined\"){\r\n\t\t\t\t\tawait window.customVariables.updateItemsSemaphore.acquire()\r\n\r\n\t\t\t\t\tlet newItems = this.state.itemList\r\n\r\n\t\t\t\t\tfor(let i = 0; i < newItems.length; i++){\r\n\t\t\t\t\t\tif(newItems[i].uuid == file.uuid){\r\n\t\t\t\t\t\t\tnewItems[i].thumbnail = thumbnail\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twindow.customVariables.itemList = newItems\r\n\r\n\t\t\t\t\tif(thumbURL == window.location.href){\r\n\t\t\t\t\t\treturn this.setState({\r\n\t\t\t\t\t\t\titemList: newItems\r\n\t\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\t\tthis.forceUpdate()\r\n\r\n\t\t\t\t\t\t\twindow.customVariables.updateItemsSemaphore.release()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\twindow.customVariables.updateItemsSemaphore.release()\r\n\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, intervalTimer)\r\n}\r\n\r\nexport async function refreshMainList(event){\r\n    await this.updateItemList()\r\n\r\n    return event.detail.complete()\r\n}\r\n\r\nexport function selectItem(type, index){\r\n    let items = this.state.itemList\r\n    let selectedItems = this.state.selectedItems\r\n\r\n    if(type){\r\n        if(!items[index].selected){\r\n            items[index].selected = type\r\n            selectedItems = selectedItems + 1\r\n\t\t}\r\n\t\t\r\n\t\tif(selectedItems == 1 && Capacitor.isNative){\r\n\t\t\tPlugins.Haptics.impact(HapticsImpactStyle.Light)\r\n\t\t}\r\n    }\r\n    else{\r\n        if(items[index].selected){\r\n            items[index].selected = type\r\n            selectedItems = selectedItems - 1\r\n        }\r\n    }\r\n\r\n    return this.setState({\r\n        itemList: items,\r\n        selectedItems\r\n    })\r\n}\r\n\r\nexport function clearSelectedItems(){\r\n    let items = this.state.itemList\r\n\r\n    for(let i = 0; i < items.length; i++){\r\n        items[i].selected = false\r\n    }\r\n\r\n    return this.setState({\r\n        itemList: items,\r\n        selectedItems: 0\r\n    })\r\n}\r\n\r\nexport async function selectItemsAction(event){\r\n    event.persist()\r\n\r\n\tlet appLang = this.state.lang\r\n\tlet customElementId = utils.generateRandomClassName()\r\n\tlet selectedItemsDoesNotContainFolder = utils.selectedItemsDoesNotContainFolder(this.state.itemList)\r\n\t\r\n\tlet inner = \"\"\r\n\r\n\tif(window.location.href.indexOf(\"shared-in\") !== -1){\r\n\t\tinner = `\r\n\t\t\t<ion-list>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.selectAllItems()\">` + language.get(appLang, \"selectAll\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.unselectAllItems()\">` + language.get(appLang, \"unselectAll\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.removeSelectedItemsFromSharedIn()\">` + language.get(appLang, \"removeFromShared\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.dismissPopover()\">` + language.get(appLang, \"close\") + `</ion-item>\r\n\t\t\t</ion-list>\r\n\t\t`\r\n\t}\r\n\telse if(window.location.href.indexOf(\"shared-out\") !== -1){\r\n\t\tinner = `\r\n\t\t\t<ion-list>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.selectAllItems()\">` + language.get(appLang, \"selectAll\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.unselectAllItems()\">` + language.get(appLang, \"unselectAll\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.stopSharingSelectedItems()\">` + language.get(appLang, \"stopSharing\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.dismissPopover()\">` + language.get(appLang, \"close\") + `</ion-item>\r\n\t\t\t</ion-list>\r\n\t\t`\r\n\t}\r\n\telse if(window.location.href.indexOf(\"trash\") !== -1){\r\n\t\tinner = `\r\n\t\t\t<ion-list>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.selectAllItems()\">` + language.get(appLang, \"selectAll\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.unselectAllItems()\">` + language.get(appLang, \"unselectAll\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.restoreSelectedItems()\">` + language.get(appLang, \"restoreItem\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.dismissPopover()\">` + language.get(appLang, \"close\") + `</ion-item>\r\n\t\t\t</ion-list>\r\n\t\t`\r\n\t}\r\n\telse{\r\n\t\tinner = `\r\n\t\t\t<ion-list>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.selectAllItems()\">` + language.get(appLang, \"selectAll\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.unselectAllItems()\">` + language.get(appLang, \"unselectAll\") + `</ion-item>\r\n\t\t\t\t` + (selectedItemsDoesNotContainFolder ? `<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.storeSelectedItemsOffline()\">` + language.get(appLang, \"storeSelectedItemsOffline\") + `</ion-item>` : ``) + `\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.moveSelectedItems()\">` + language.get(appLang, \"moveItem\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.trashSelectedItems()\">` + language.get(appLang, \"trashItem\") + `</ion-item>\r\n\t\t\t\t<ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.dismissPopover()\">` + language.get(appLang, \"close\") + `</ion-item>\r\n\t\t\t</ion-list>\r\n\t\t`\r\n\t}\r\n\r\n    window.customElements.define(customElementId, class ModalContent extends HTMLElement {\r\n        connectedCallback(){\r\n            this.innerHTML = inner\r\n        }\r\n    })\r\n\r\n    let popover = await popoverController.create({\r\n        component: customElementId,\r\n        event: event\r\n    })\r\n\r\n    return popover.present()\r\n}\r\n\r\nexport async function previewItem(item, lastModalPreviewType = undefined){\r\n    if(item.type !== \"file\"){\r\n\t\treturn false\r\n\t}\r\n\r\n\tif(Capacitor.isNative && typeof lastModalPreviewType == \"undefined\"){\r\n        if(this.state.settings.onlyWifi){\r\n            let networkStatus = await Plugins.Network.getStatus()\r\n\r\n            if(networkStatus.connectionType !== \"wifi\"){\r\n                return this.spawnToast(language.get(this.state.lang, \"onlyWifiError\"))\r\n            }\r\n        }\r\n    }\r\n\r\n\tif(typeof window.customVariables.offlineSavedFiles[item.uuid] !== \"undefined\" && typeof lastModalPreviewType == \"undefined\"){\r\n\t\tthis.getDownloadDir(true, item.uuid, (err, dirObj) => {\r\n\t\t\tif(err){\r\n\t\t\t\tconsole.log(err)\r\n\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotGetDownloadDir\"))\r\n\t\t\t}\r\n\r\n\t\t\tFileOpener.open(dirObj.uri.uri + \"/\" + item.name, item.mime).then(() => {\r\n\t\t\t\tconsole.log(dirObj.uri.uri + \"/\" + item.name, item.mime)\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t\tconsole.log(dirObj.uri.uri + \"/\" + item.name, item.mime)\r\n\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"noAppFoundToOpenFile\", true, [\"__NAME__\"], [item.name]))\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\telse{\r\n\t\tlet nameEx = item.name.split(\".\")\r\n\t\tlet previewType = utils.getFilePreviewType(nameEx[nameEx.length - 1])\r\n\r\n\t\tif(previewType == \"none\"){\r\n\t\t\tif(typeof lastModalPreviewType !== \"undefined\"){\r\n\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\t\t}\r\n\r\n\t\t\treturn this.spawnItemActionSheet(item)\r\n\t\t}\r\n\r\n\t\tif(item.size > ((1024 * 1024) * 64)){\r\n\t\t\tif(typeof lastModalPreviewType !== \"undefined\"){\r\n\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\t\t}\r\n\r\n\t\t\treturn this.spawnItemActionSheet(item)\r\n\t\t}\r\n\r\n\t\tconst gotPreviewData = async (dataArray) => {\r\n\t\t\tlet blob = new Blob([dataArray], {\r\n\t\t\t\ttype: item.mime,\r\n\t\t\t\tname: item.name\r\n\t\t\t})\r\n\r\n\t\t\tif(typeof window.customVariables.currentPreviewURL !== \"undefined\"){\r\n\t\t\t\twindow.customVariables.urlCreator.revokeObjectURL(window.customVariables.currentPreviewURL)\r\n\t\t\t}\r\n\r\n\t\t\twindow.customVariables.currentPreviewURL = window.customVariables.urlCreator.createObjectURL(blob)\r\n\r\n\t\t\tlet previewModalContent = ``\r\n\r\n\t\t\tif(previewType == \"image\"){\r\n\t\t\t\tpreviewModalContent = `\r\n\t\t\t\t\t<ion-header class=\"ion-header-no-shadow preview-header-hidden\" style=\"position: absolute; display: none;\" onClick=\"window.customFunctions.togglePreviewHeader(true)\">\r\n\t\t\t\t\t\t<ion-toolbar style=\"--background: black; color: white;\">\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"start\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.dismissModal()\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\" style=\"color: white;\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t\t<ion-title>\r\n\t\t\t\t\t\t\t\t` + item.name + `\r\n\t\t\t\t\t\t\t</ion-title>\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"end\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.openItemActionSheetFromJSON('` + window.btoa(JSON.stringify(item)) + `')\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.ellipsisVertical + `\" style=\"color: white;\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t</ion-toolbar>\r\n\t\t\t\t\t</ion-header>\r\n\t\t\t\t\t<ion-content style=\"--background: black;\" fullscreen>\r\n\t\t\t\t\t\t<ion-slides pager=\"false\" style=\"height: 100%; width: 100vw;\" id=\"slider\" scrollbar=\"false\">\r\n\t\t\t\t\t\t\t<ion-slide>\r\n\t\t\t\t\t\t\t\t<center>\r\n\t\t\t\t\t\t\t\t\t<img id=\"preview-img\" src=\"` + window.customVariables.currentPreviewURL + `\" style=\"width: auto; height: auto; max-width: 100vw; max-height: 100vh;\">\r\n\t\t\t\t\t\t\t\t<center>\r\n\t\t\t\t\t\t\t</ion-slide>\r\n\t\t\t\t\t\t</ion-slides>\r\n\t\t\t\t\t</ion-content>\r\n\t\t\t\t`\r\n\t\t\t}\r\n\t\t\telse if(previewType == \"video\"){\r\n\t\t\t\tpreviewModalContent = `\r\n\t\t\t\t\t<ion-header class=\"ion-header-no-shadow\" style=\"position: absolute;\">\r\n\t\t\t\t\t\t<ion-toolbar style=\"--background: black; color: white;\">\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"start\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.dismissModal()\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\" style=\"color: white;\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t\t<ion-title>\r\n\t\t\t\t\t\t\t\t` + item.name + `\r\n\t\t\t\t\t\t\t</ion-title>\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"end\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.openItemActionSheetFromJSON('` + window.btoa(JSON.stringify(item)) + `')\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.ellipsisVertical + `\" style=\"color: white;\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t</ion-toolbar>\r\n\t\t\t\t\t</ion-header>\r\n\t\t\t\t\t<ion-content style=\"--background: black;\" fullscreen>\r\n\t\t\t\t\t\t<ion-slides pager=\"false\" style=\"height: 100%; width: 100vw;\" id=\"slider\" scrollbar=\"false\">\r\n\t\t\t\t\t\t\t<ion-slide>\r\n\t\t\t\t\t\t\t\t<center>\r\n\t\t\t\t\t\t\t\t\t<video id=\"preview-video\" style=\"width: auto; height: auto; max-width: 100vw; max-height: 100vh; margin-top: 56px;\" src=\"` + window.customVariables.currentPreviewURL + `\" autoplay preload controls></video>\r\n\t\t\t\t\t\t\t\t</center>\r\n\t\t\t\t\t\t\t</ion-slide>\r\n\t\t\t\t\t\t</ion-slides>\r\n\t\t\t\t\t</ion-content>\r\n\t\t\t\t`\r\n\t\t\t}\r\n\t\t\telse if(previewType == \"audio\"){\r\n\t\t\t\tpreviewModalContent = `\r\n\t\t\t\t\t<ion-header class=\"ion-header-no-shadow\" style=\"position: absolute;\">\r\n\t\t\t\t\t\t<ion-toolbar style=\"--background: transparent; color: white;\">\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"start\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.dismissModal()\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\" style=\"color: white;\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t\t<ion-title>\r\n\t\t\t\t\t\t\t\t` + item.name + `\r\n\t\t\t\t\t\t\t</ion-title>\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"end\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.openItemActionSheetFromJSON('` + window.btoa(JSON.stringify(item)) + `')\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.ellipsisVertical + `\" style=\"color: white;\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t</ion-toolbar>\r\n\t\t\t\t\t</ion-header>\r\n\t\t\t\t\t<ion-content style=\"--background: black;\" fullscreen>\r\n\t\t\t\t\t\t<ion-slides pager=\"false\" style=\"height: 100%; width: 100vw;\" id=\"slider\" scrollbar=\"false\">\r\n\t\t\t\t\t\t\t<ion-slide>\r\n\t\t\t\t\t\t\t\t<audio autoplay preload controls>\r\n\t\t\t\t\t\t\t\t\t<source src=\"` + window.customVariables.currentPreviewURL + `\" type=\"audio/mpeg\">\r\n\t\t\t\t\t\t\t\t</audio>\r\n\t\t\t\t\t\t\t</ion-slide>\r\n\t\t\t\t\t\t</ion-slides>\r\n\t\t\t\t\t</ion-content>\r\n\t\t\t\t`\r\n\t\t\t}\r\n\t\t\telse if(previewType == \"code\" || previewType == \"text\"){\r\n\t\t\t\tlet text = new TextDecoder().decode(dataArray).split(\"<\").join(\"&lt;\")\r\n\r\n\t\t\t\tpreviewModalContent = `\r\n\t\t\t\t\t<ion-header>\r\n\t\t\t\t\t\t<ion-toolbar>\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"start\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.dismissModal()\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t\t<ion-title>\r\n\t\t\t\t\t\t\t\t` + item.name + `\r\n\t\t\t\t\t\t\t</ion-title>\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"end\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.openItemActionSheetFromJSON('` + window.btoa(JSON.stringify(item)) + `')\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.ellipsisVertical + `\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t</ion-toolbar>\r\n\t\t\t\t\t</ion-header>\r\n\t\t\t\t\t<ion-content fullscreen style=\"-webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text;\">\r\n\t\t\t\t\t\t<pre style=\"width: 100vw; height: 100%; margin-top: 0px; padding: 10px; -webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text;\">` + text + `</pre>\r\n\t\t\t\t\t</ion-content>\r\n\t\t\t\t`\r\n\t\t\t}\r\n\t\t\telse if(previewType == \"pdf\"){\r\n\t\t\t\tpreviewModalContent = `\r\n\t\t\t\t\t<ion-header>\r\n\t\t\t\t\t\t<ion-toolbar>\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"start\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.dismissModal()\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t\t<ion-title>\r\n\t\t\t\t\t\t\t\t` + item.name + `\r\n\t\t\t\t\t\t\t</ion-title>\r\n\t\t\t\t\t\t\t<ion-buttons slot=\"end\">\r\n\t\t\t\t\t\t\t\t<ion-button onclick=\"window.customFunctions.openItemActionSheetFromJSON('` + window.btoa(JSON.stringify(item)) + `')\">\r\n\t\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.ellipsisVertical + `\"></ion-icon>\r\n\t\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t</ion-toolbar>\r\n\t\t\t\t\t</ion-header>\r\n\t\t\t\t\t<ion-content fullscreen>\r\n\t\t\t\t\t\t<div id=\"pdf-viewer\" style=\"width: 100%; height: 100%; overflow: scroll;\"></div>\r\n\t\t\t\t\t</ion-content>\r\n\t\t\t\t`\r\n\t\t\t}\r\n\r\n\t\t\tif(previewModalContent.length <= 8){\r\n\t\t\t\tif(typeof lastModalPreviewType !== \"undefined\"){\r\n\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.spawnItemActionSheet(item)\r\n\t\t\t}\r\n\r\n\t\t\tconst setupBars = async () => {\r\n\t\t\t\tif(previewType == \"image\" || previewType == \"video\" || previewType == \"audio\"){\r\n\t\t\t\t\tthis.setupStatusbar(\"image/video\")\r\n\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tlet modal = await modalController.getTop()\r\n\t\r\n\t\t\t\t\t\tmodal.onDidDismiss().then(() => {\r\n\t\t\t\t\t\t\tthis.setupStatusbar()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst setupSlider = (lastPreviewType) => {\r\n\t\t\t\tlet slider = document.getElementById(\"slider\")\r\n\r\n\t\t\t\tif(slider == null){\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet itemList = this.state.itemList\r\n\r\n\t\t\t\tconst getPrevOrNextItem = (type) => {\r\n\t\t\t\t\tlet step = 1\r\n\t\t\t\t\tlet max = 128\r\n\t\t\t\t\tlet tries = 0\r\n\r\n\t\t\t\t\tconst getItemRecursive = (type) => {\r\n\t\t\t\t\t\tif(tries > max){\r\n\t\t\t\t\t\t\treturn undefined\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttries += 1\r\n\r\n\t\t\t\t\t\tfor(let i = 0; i < itemList.length; i++){\r\n\t\t\t\t\t\t\tif(itemList[i].uuid == item.uuid){\r\n\t\t\t\t\t\t\t\tlet item = undefined\r\n\t\t\t\t\t\t\t\tlet listIndex = undefined\r\n\r\n\t\t\t\t\t\t\t\tif(type == \"prev\"){\r\n\t\t\t\t\t\t\t\t\tlistIndex = (i - step)\r\n\r\n\t\t\t\t\t\t\t\t\titem = itemList[listIndex]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tlistIndex = (i + step)\r\n\r\n\t\t\t\t\t\t\t\t\titem = itemList[listIndex]\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif(typeof item == \"undefined\"){\r\n\t\t\t\t\t\t\t\t\tstep += 1\r\n\r\n\t\t\t\t\t\t\t\t\treturn getItemRecursive(type)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tlet thisNameEx = item.name.split(\".\")\r\n\t\t\t\t\t\t\t\t\tlet thisPreviewType = utils.getFilePreviewType(thisNameEx[thisNameEx.length - 1])\r\n\r\n\t\t\t\t\t\t\t\t\tif(thisPreviewType == lastPreviewType){\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\titem,\r\n\t\t\t\t\t\t\t\t\t\t\tlistIndex\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\tstep += 1\r\n\r\n\t\t\t\t\t\t\t\t\t\treturn getItemRecursive(type)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn getItemRecursive(type)\r\n\t\t\t\t}\r\n        \r\n\t\t\t\tslider.options = {\r\n\t\t\t\t\tfreeMode: false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet offset = 75\r\n\t\t\t\tlet offsetY = 150\r\n\t\t\t\tlet xDown, yDown\r\n\r\n\t\t\t\tslider.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\t\tlet firstTouch = getTouch(e)\r\n\r\n\t\t\t\t\txDown = firstTouch.clientX\r\n\t\t\t\t\tyDown = firstTouch.clientY\r\n\t\t\t\t})\r\n\r\n\t\t\t\tslider.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\t\tif(!xDown || !yDown){\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tclientX: xUp,\r\n\t\t\t\t\t\tclientY: yUp\r\n\t\t\t\t\t} = getTouch(e)\r\n\r\n\t\t\t\t\tlet xDiff = xDown - xUp\r\n\t\t\t\t\tlet yDiff = yDown - yUp\r\n\t\t\t\t\tlet xDiffAbs = Math.abs(xDown - xUp)\r\n\t\t\t\t\tlet yDiffAbs = Math.abs(yDown - yUp)\r\n\r\n\t\t\t\t\tif(Math.max(xDiffAbs, yDiffAbs) < offset){\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(xDiffAbs > yDiffAbs){\r\n\t\t\t\t\t\tif(xDiff > 0){\r\n\t\t\t\t\t\t\tlet nextItem = getPrevOrNextItem(\"next\")\r\n\r\n\t\t\t\t\t\t\tif(typeof nextItem == \"undefined\"){\r\n\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tscrollToIndex: nextItem.listIndex\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\treturn this.previewItem(nextItem.item, lastPreviewType)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tlet prevItem = getPrevOrNextItem(\"prev\")\r\n\r\n\t\t\t\t\t\t\tif(typeof prevItem == \"undefined\"){\r\n\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tscrollToIndex: prevItem.listIndex\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\treturn this.previewItem(prevItem.item, lastPreviewType)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(xDiffAbs < yDiffAbs && Math.max(xDiffAbs, yDiffAbs) > offsetY){\r\n\t\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconst getTouch = (e) => {\r\n\t\t\t\t\treturn e.changedTouches[0]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst loadPdf = async () => {\r\n\t\t\t\tlet canvasContainer = document.getElementById(\"pdf-viewer\")\r\n\r\n\t\t\t\tif(typeof window.pdfjsLib == \"undefined\"){\r\n\t\t\t\t\treturn window.customFunctions.dismissModal()\r\n\t\t\t\t}\r\n\r\n\t\t\t\twindow.pdfjsLib.GlobalWorkerOptions.workerSrc = \"assets/pdf/build/pdf.worker.js\"\r\n\r\n\t\t\t\tlet loader = await loadingController.create({\r\n\t\t\t\t\tmessage: \"\"\r\n\t\t\t\t})\r\n\r\n\t\t\t\tloader.present()\r\n        \r\n\t\t\t\tfunction renderPage(page){\r\n\t\t\t\t\tlet viewport = page.getViewport({\r\n\t\t\t\t\t\tscale: 2\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tlet canvas = document.createElement('canvas')\r\n\t\t\t\t\tlet ctx = canvas.getContext('2d')\r\n\r\n\t\t\t\t\tlet renderContext = {\r\n\t\t\t\t\t\tcanvasContext: ctx,\r\n\t\t\t\t\t\tviewport: viewport\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcanvas.height = viewport.height\r\n\t\t\t\t\tcanvas.width = viewport.width\r\n\r\n\t\t\t\t\tcanvasContainer.appendChild(canvas)\r\n\t\t\t\t\t\r\n\t\t\t\t\tpage.render(renderContext)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfunction renderPages(pdfDoc){\r\n\t\t\t\t\tif(typeof loader !== \"undefined\"){\r\n\t\t\t\t\t\tloader.dismiss()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(let i = 1; i <= pdfDoc.numPages; i++){\r\n\t\t\t\t\t\tpdfDoc.getPage(i).then(renderPage)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet loadingTask = window.pdfjsLib.getDocument({\r\n\t\t\t\t\tdata: dataArray\r\n\t\t\t\t})\r\n\r\n\t\t\t\tloadingTask.promise.then(renderPages).catch((err) => {\r\n\t\t\t\t\tconsole.log(err)\r\n\r\n\t\t\t\t\treturn window.customFunctions.dismissModal()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof lastModalPreviewType !== \"undefined\"){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar currentModal = document.querySelectorAll(\".modal-fullscreen > .modal-wrapper\")[0].childNodes[0]\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e){\r\n\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\r\n\t\t\t\t\treturn this.spawnItemActionSheet(item)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentModal.innerHTML = previewModalContent\r\n\r\n\t\t\t\tif(previewType == \"pdf\"){\r\n\t\t\t\t\tloadPdf()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetupBars()\r\n\t\t\t\tsetupSlider(previewType)\r\n\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tlet modalId = \"preview-modal-\" + utils.generateRandomClassName()\r\n\r\n\t\t\t\tcustomElements.define(modalId, class ModalContent extends HTMLElement {\r\n\t\t\t\t\tconnectedCallback() {\r\n\t\t\t\t\t\tthis.innerHTML = previewModalContent\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tvar modal = await modalController.create({\r\n\t\t\t\t\tcomponent: modalId,\r\n\t\t\t\t\tswipeToClose: true,\r\n\t\t\t\t\tshowBackdrop: false,\r\n\t\t\t\t\tbackdropDismiss: false,\r\n\t\t\t\t\tcssClass: \"modal-fullscreen\"\r\n\t\t\t\t})\r\n\r\n\t\t\t\tawait modal.present()\r\n\r\n\t\t\t\tif(Capacitor.isNative){\r\n\t\t\t\t\tCapacitor.Plugins.Keyboard.hide()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(previewType == \"image\" || previewType == \"video\" || previewType == \"audio\"){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tdocument.querySelectorAll(\".modal-fullscreen > .modal-wrapper\")[0].childNodes[0].style.backgroundColor = \"black\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(previewType == \"pdf\"){\r\n\t\t\t\t\tloadPdf()\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tsetupBars()\r\n\t\t\t\tsetupSlider(previewType)\r\n\t\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet loading = await loadingController.create({\r\n\t\t\tmessage: \"\" //language.get(this.state.lang, \"loadingPreview\")\r\n\t\t})\r\n\r\n\t\tloading.present()\r\n\r\n\t\tthis.downloadPreview(item, (chunksDone) => {\r\n\t\t\t//console.log(chunksDone)\r\n\t\t}, (err, dataArray) => {\r\n\t\t\tloading.dismiss()\r\n\r\n\t\t\tif(err){\r\n\t\t\t\tconsole.log(err)\r\n\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"fileNoPreviewAvailable\", true, [\"__NAME__\"], [item.name]))\r\n\t\t\t}\r\n\r\n\t\t\treturn gotPreviewData(dataArray)\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport async function dirExists(name, parent, callback){\r\n\tif(parent == null){\r\n\t\tparent = \"base\"\r\n\t}\r\n\r\n\ttry{\r\n\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/dir/exists\", {\r\n\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\tparent,\r\n\t\t\tnameHashed: utils.hashFn(name.toLowerCase())\r\n\t\t})\r\n\t}\r\n\tcatch(e){\r\n\t\treturn callback(e)\r\n\t}\r\n\r\n\tif(!res.status){\r\n\t\treturn callback(res.message)\r\n\t}\r\n\r\n\treturn callback(null, res.data.exists, res.data.uuid)\r\n}\r\n\r\nexport async function moveFolder(folder, destination, showLoader){\r\n\tif(folder.parent == destination){\r\n\t\treturn this.spawnToast(language.get(this.state.lang, \"moveFileOrFolderSameDestination\"))\r\n\t}\r\n\r\n\tif(utils.currentParentFolder() == \"base\"){\r\n\t\tif(folder.uuid == \"default\" || folder.name.toLowerCase() == \"filen sync\"){\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"thisFolderCannotBeMoved\")) \r\n\t\t}\r\n\t}\r\n\r\n\tif(showLoader){\r\n\t\tvar loading = await loadingController.create({\r\n\t\t\tmessage: \"\"\r\n\t\t})\r\n\t\r\n\t\tloading.present()\r\n\t}\r\n\r\n\tthis.dirExists(folder.name, destination, async (err, exists, existsUUID) => {\r\n\t\tif(err){\r\n\t\t\tif(showLoader){\r\n\t\t\t\tloading.dismiss()\r\n\t\t\t}\r\n\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t}\r\n\r\n\t\tif(exists){\r\n\t\t\tif(showLoader){\r\n\t\t\t\tloading.dismiss()\r\n\t\t\t}\r\n\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"folderMoveAlreadyExistsHere\", true, [\"__NAME__\"], [folder.name]))\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/dir/move\", {\r\n\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\tuuid: folder.uuid,\r\n\t\t\t\tfolderUUID: destination\r\n\t\t\t})\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\tif(showLoader){\r\n\t\t\t\tloading.dismiss()\r\n\t\t\t}\r\n\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t}\r\n\r\n\t\tif(showLoader){\r\n\t\t\tloading.dismiss()\r\n\t\t}\r\n\r\n\t\tif(!res.status){\r\n\t\t\treturn this.spawnToast(res.message)\r\n\t\t}\r\n\r\n\t\tthis.spawnToast(language.get(this.state.lang, \"folderMoved\", true, [\"__NAME__\"], [folder.name]))\r\n\r\n\t\tutils.checkIfItemParentIsBeingShared(destination, \"folder\", {\r\n\t\t\tname: folder.name\r\n\t\t})\r\n\r\n\t\tclearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\r\n\t\twindow.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n\t\t\tif(utils.currentParentFolder() == destination){\r\n\t\t\t\tthis.updateItemList()\r\n\t\t\t}\r\n\t\t}, 500)\r\n\r\n\t\treturn true\r\n\t})\r\n}\r\n\r\nexport async function moveFile(file, destination, showLoader){\r\n\tif(file.parent == destination){\r\n\t\treturn this.spawnToast(language.get(this.state.lang, \"moveFileOrFolderSameDestination\"))\r\n\t}\r\n\r\n\tif(destination == \"trash\" || destination == \"base\" || destination == \"shared-in\" || destination == \"shared-out\"){\r\n\t\treturn this.spawnToast(language.get(this.state.lang, \"cannotMoveFileHere\"))\r\n\t}\r\n\r\n\tif(showLoader){\r\n\t\tvar loading = await loadingController.create({\r\n\t\t\tmessage: \"\"\r\n\t\t})\r\n\t\r\n\t\tloading.present()\r\n\t}\r\n\r\n\tthis.fileExists(file.name, destination, async (err, exists, existsUUID) => {\r\n\t\tif(err){\r\n\t\t\tif(showLoader){\r\n\t\t\t\tloading.dismiss()\r\n\t\t\t}\r\n\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t}\r\n\r\n\t\tif(exists){\r\n\t\t\tif(showLoader){\r\n\t\t\t\tloading.dismiss()\r\n\t\t\t}\r\n\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"fileMoveAlreadyExistsHere\", true, [\"__NAME__\"], [file.name]))\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/file/move\", {\r\n\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\tfileUUID: file.uuid,\r\n\t\t\t\tfolderUUID: destination\r\n\t\t\t})\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\tif(showLoader){\r\n\t\t\t\tloading.dismiss()\r\n\t\t\t}\r\n\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t}\r\n\r\n\t\tif(showLoader){\r\n\t\t\tloading.dismiss()\r\n\t\t}\r\n\r\n\t\tif(!res.status){\r\n\t\t\treturn this.spawnToast(res.message)\r\n\t\t}\r\n\r\n\t\tthis.spawnToast(language.get(this.state.lang, \"fileMoved\", true, [\"__NAME__\"], [file.name]))\r\n\r\n\t\tutils.checkIfItemParentIsBeingShared(destination, \"file\", {\r\n\t\t\tuuid: file.uuid,\r\n\t\t\tname: file.name,\r\n\t\t\tsize: parseInt(file.size),\r\n\t\t\tmime: file.mime,\r\n\t\t\tkey: file.key\r\n\t\t})\r\n\r\n\t\tclearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\r\n\t\twindow.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n\t\t\tif(utils.currentParentFolder() == destination){\r\n\t\t\t\tthis.updateItemList()\r\n\t\t\t}\r\n\t\t}, 500)\r\n\r\n\t\treturn true\r\n\t})\r\n}\r\n\r\nexport function moveItem(item){\r\n\tthis.spawnMoveToast((cancelled, destination) => {\r\n\t\tif(cancelled){\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tif(item.type == \"file\"){\r\n\t\t\treturn this.moveFile(item, destination, true)\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn this.moveFolder(item, destination, true)\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport async function renameItem(item){\r\n\tlet parent = utils.currentParentFolder()\r\n\r\n\tif(parent == \"base\"){\r\n\t\tif(item.uuid == \"default\" || item.name.toLowerCase() == \"filen sync\"){\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"cannotRenameItem\", true, [\"__NAME__\"], [item.name]))\r\n\t\t}\r\n\t}\r\n\r\n\tthis.spawnRenamePrompt(item, async (cancelled, newName) => {\r\n\t\tif(cancelled){\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tif(item.name == newName){\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tvar loading = await loadingController.create({\r\n\t\t\tmessage: \"\"\r\n\t\t})\r\n\t\r\n\t\tloading.present()\r\n\r\n\t\tif(item.type == \"file\"){\r\n\t\t\tnewName = utils.removeIllegalCharsFromString(newName)\r\n\r\n\t\t\tif(utils.nameRegex(newName) || utils.checkIfNameIsBanned(newName) || utils.fileNameValidationRegex(newName)){\r\n\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"invalidFileName\"))\r\n\t\t\t}\r\n\r\n\t\t\tlet nameEx = item.name.split(\".\")\r\n\t\t\tlet fileExt = nameEx[nameEx.length - 1]\r\n\t\t\tlet renameWithDot = false\r\n\r\n\t\t\tif(item.name.indexOf(\".\") !== -1){\r\n\t\t\t\trenameWithDot = true\r\n\t\t\t}\r\n\r\n\t\t\tthis.fileExists(newName, parent, async (err, exists, existsUUID) => {\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tconsole.log(err)\r\n\r\n\t\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(exists){\r\n\t\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"fileRenameAlreadyExists\", true, [\"__NAME__\"], [item.name]))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(renameWithDot){\r\n\t\t\t\t\tnewName = newName + \".\" + fileExt\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/file/rename\", {\r\n\t\t\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\t\t\tuuid: item.uuid,\r\n\t\t\t\t\t\tname: utils.cryptoJSEncrypt(newName, item.key),\r\n\t\t\t\t\t\tnameHashed: utils.hashFn(newName.toLowerCase()),\r\n\t\t\t\t\t\tmetaData: utils.cryptoJSEncrypt(JSON.stringify({\r\n\t\t\t\t\t\t\tname: newName,\r\n\t\t\t\t\t\t\tsize: parseInt(item.size),\r\n\t\t\t\t\t\t\tmime: item.mime,\r\n\t\t\t\t\t\t\tkey: item.key\r\n\t\t\t\t\t\t}), this.state.userMasterKeys[this.state.userMasterKeys.length - 1])\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e){\r\n\t\t\t\t\tconsole.log(e)\r\n\r\n\t\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!res.status){\r\n\t\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotRenameFile\"))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\tthis.spawnToast(language.get(this.state.lang, \"fileRenamed\", true, [\"__NAME__\", \"__TO__\"], [item.name, newName]))\r\n\r\n\t\t\t\tutils.checkIfItemIsBeingSharedForRename(\"file\", parent, {\r\n\t\t\t\t\tname: newName,\r\n\t\t\t\t\tsize: parseInt(item.size),\r\n\t\t\t\t\tmime: item.mime,\r\n\t\t\t\t\tkey: item.key\r\n\t\t\t\t})\r\n\r\n\t\t\t\tdelete window.customVariables.cachedFiles[item.uuid]\r\n\r\n\t\t\t\tclearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\r\n\t\t\t\twindow.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n\t\t\t\t\tif(utils.currentParentFolder() == parent){\r\n\t\t\t\t\t\tthis.updateItemList()\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500)\r\n\r\n\t\t\t\tif(typeof window.customVariables.offlineSavedFiles !== \"undefined\" && Capacitor.isNative){\r\n\t\t\t\t\tthis.getDownloadDir(true, item.uuid, async (err, dirObj) => {\r\n\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\tconsole.log(err)\r\n\r\n\t\t\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotGetDownloadDir\"))\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tawait Plugins.Filesystem.rename({\r\n\t\t\t\t\t\t\t\tfrom: dirObj + \"/\" + item.name,\r\n\t\t\t\t\t\t\t\tto: dirObj + \"/\" +  newName,\r\n\t\t\t\t\t\t\t\tdirectory: dirObj.directory\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcatch(e){\r\n\t\t\t\t\t\t\tconsole.log(err)\r\n\r\n\t\t\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotRenameFileLocally\"))\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn console.log(\"File renamed locally\")\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tnewName = utils.removeIllegalCharsFromString(newName)\r\n\r\n\t\t\tif(utils.checkIfNameIsBanned(newName) || utils.folderNameRegex(newName) || utils.fileNameValidationRegex(newName)){\r\n\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"invalidFolderName\"))\r\n\t\t\t}\r\n\r\n\t\t\tthis.dirExists(newName, parent, async (err, exists, existsUUID) => {\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(exists){\r\n\t\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"folderRenameAlreadyExists\", true, [\"__NAME__\"], [item.name]))\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/dir/rename\", {\r\n\t\t\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\t\t\tuuid: item.uuid,\r\n\t\t\t\t\t\tname: utils.cryptoJSEncrypt(JSON.stringify({\r\n\t\t\t\t\t\t\tname: newName,\r\n\t\t\t\t\t\t}), this.state.userMasterKeys[this.state.userMasterKeys.length - 1]),\r\n\t\t\t\t\t\tnameHashed: utils.hashFn(newName.toLowerCase())\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e){\r\n\t\t\t\t\tconsole.log(e)\r\n\r\n\t\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!res.status){\r\n\t\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotRenameFolder\"))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\tthis.spawnToast(language.get(this.state.lang, \"folderRenamed\", true, [\"__NAME__\", \"__TO__\"], [item.name, newName]))\r\n\r\n\t\t\t\tutils.checkIfItemIsBeingSharedForRename(\"folder\", parent, {\r\n\t\t\t\t\tname: newName\r\n\t\t\t\t})\r\n\r\n\t\t\t\tdelete window.customVariables.cachedFolders[item.uuid]\r\n\r\n\t\t\t\tclearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\r\n\t\t\t\twindow.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n\t\t\t\t\tif(utils.currentParentFolder() == parent){\r\n\t\t\t\t\t\tthis.updateItemList()\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500)\r\n\r\n\t\t\t\treturn true\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport async function moveSelectedItems(){\r\n\tlet items = await this.getSelectedItems()\r\n\r\n\twindow.customFunctions.dismissPopover()\r\n\twindow.customFunctions.unselectAllItems()\r\n\r\n\tthis.spawnMoveToast((cancelled, destination) => {\r\n\t\tif(cancelled){\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tfor(let i = 0; i < items.length; i++){\r\n\t\t\tif(items[i].type == \"file\"){\r\n\t\t\t\tthis.moveFile(items[i], destination, true)\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.moveFolder(items[i], destination, true)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport async function trashSelectedItems(){\r\n\tlet items = await this.getSelectedItems()\r\n\r\n\twindow.customFunctions.dismissPopover()\r\n\twindow.customFunctions.unselectAllItems()\r\n\r\n\tlet alert = await alertController.create({\r\n\t\theader: language.get(this.state.lang, \"trashItemHeader\"),\r\n\t\tmessage: language.get(this.state.lang, \"trashItemsConfirmMessage\", true, [\"__COUNT__\"], [items.length]),\r\n\t\tbuttons: [\r\n\t\t\t{\r\n\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\trole: \"cancel\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: language.get(this.state.lang, \"alertOkButton\"),\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\titems.forEach((item) => {\r\n\t\t\t\t\t\tthis.trashItem(item, false)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\t})\r\n\r\n\treturn alert.present()\r\n}\r\n\r\nexport async function restoreSelectedItems(){\r\n\tlet items = await this.getSelectedItems()\r\n\r\n\twindow.customFunctions.dismissPopover()\r\n\twindow.customFunctions.unselectAllItems()\r\n\r\n\tlet alert = await alertController.create({\r\n\t\theader: language.get(this.state.lang, \"restoreItemsHeader\"),\r\n\t\tmessage: language.get(this.state.lang, \"restoreItemsConfirmMessage\", true, [\"__COUNT__\"], [items.length]),\r\n\t\tbuttons: [\r\n\t\t\t{\r\n\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\trole: \"cancel\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: language.get(this.state.lang, \"alertOkButton\"),\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\titems.forEach((item) => {\r\n\t\t\t\t\t\tthis.restoreItem(item, false)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\t})\r\n\r\n\treturn alert.present()\r\n}\r\n\r\nexport function getSelectedItems(){\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlet items = this.state.itemList.filter((item) => {\r\n\t\t\treturn item.selected === true\r\n\t\t})\r\n\r\n\t\treturn resolve(items)\r\n\t})\r\n}\r\n\r\nexport async function restoreItem(item, showLoader){\r\n\tif(showLoader){\r\n\t\tvar loading = await loadingController.create({\r\n\t\t\tmessage: \"\"\r\n\t\t})\r\n\t\r\n\t\tloading.present()\r\n\t}\r\n\r\n\tif(item.type == \"file\"){\r\n\t\tthis.fileExists(item.name, item.parent, async (err, exists, existsUUID) => {\r\n\t\t\tif(err){\r\n\t\t\t\tconsole.log(err)\r\n\t\t\r\n\t\t\t\tif(showLoader){\r\n\t\t\t\t\tloading.dismiss()\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t\t}\r\n\r\n\t\t\tif(exists){\r\n\t\t\t\tif(showLoader){\r\n\t\t\t\t\tloading.dismiss()\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"fileExistsAtRestoreDestination\", true, [\"__NAME__\"], [item.name]))\r\n\t\t\t}\r\n\r\n\t\t\ttry{\r\n\t\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/file/restore\", {\r\n\t\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\t\tuuid: item.uuid\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\r\n\t\t\t\tif(showLoader){\r\n\t\t\t\t\tloading.dismiss()\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t\t}\r\n\t\t\r\n\t\t\tif(!res.status){\r\n\t\t\t\tif(showLoader){\r\n\t\t\t\t\tloading.dismiss()\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotRestoreItem\", true, [\"__NAME__\"], [item.name]))\r\n\t\t\t}\r\n\t\t\r\n\t\t\tif(showLoader){\r\n\t\t\t\tloading.dismiss()\r\n\t\t\t}\r\n\t\t\r\n\t\t\tclearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\t\t\r\n\t\t\twindow.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n\t\t\t\tthis.updateItemList()\r\n\t\t\t}, 500)\r\n\t\t\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"itemRestored\", true, [\"__NAME__\"], [item.name]))\r\n\t\t})\r\n\t}\r\n\telse{\r\n\t\tthis.dirExists(item.name, item.parent, async (err, exists, existsUUID) => {\r\n\t\t\tif(err){\r\n\t\t\t\tconsole.log(err)\r\n\t\t\r\n\t\t\t\tif(showLoader){\r\n\t\t\t\t\tloading.dismiss()\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t\t}\r\n\r\n\t\t\tif(exists){\r\n\t\t\t\tif(showLoader){\r\n\t\t\t\t\tloading.dismiss()\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"folderExistsAtRestoreDestination\", true, [\"__NAME__\"], [item.name]))\r\n\t\t\t}\r\n\r\n\t\t\ttry{\r\n\t\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/dir/restore\", {\r\n\t\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\t\tuuid: item.uuid\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\r\n\t\t\t\tif(showLoader){\r\n\t\t\t\t\tloading.dismiss()\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t\t\t}\r\n\t\t\r\n\t\t\tif(!res.status){\r\n\t\t\t\tif(showLoader){\r\n\t\t\t\t\tloading.dismiss()\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotRestoreItem\", true, [\"__NAME__\"], [item.name]))\r\n\t\t\t}\r\n\t\t\r\n\t\t\tif(showLoader){\r\n\t\t\t\tloading.dismiss()\r\n\t\t\t}\r\n\t\t\r\n\t\t\tclearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\t\t\r\n\t\t\twindow.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n\t\t\t\tthis.updateItemList()\r\n\t\t\t}, 500)\r\n\t\t\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"itemRestored\", true, [\"__NAME__\"], [item.name]))\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport async function trashItem(item, showLoader){\r\n\tif(utils.currentParentFolder() == \"base\"){\r\n\t\tif(item.uuid == \"default\" || item.name.toLowerCase() == \"filen sync\"){\r\n\t\t\treturn this.spawnToast(language.get(this.state.lang, \"cannotTrashItem\", true, [\"__NAME__\"], [item.name]))\r\n\t\t}\r\n\t}\r\n\r\n\tif(showLoader){\r\n\t\tvar loading = await loadingController.create({\r\n\t\t\tmessage: \"\"\r\n\t\t})\r\n\t\r\n\t\tloading.present()\r\n\t}\r\n\r\n\ttry{\r\n\t\tif(item.type == \"file\"){\r\n\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/file/trash\", {\r\n\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\tuuid: item.uuid\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/dir/trash\", {\r\n\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\tuuid: item.uuid\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tcatch(e){\r\n\t\tconsole.log(e)\r\n\r\n\t\tif(showLoader){\r\n\t\t\tloading.dismiss()\r\n\t\t}\r\n\r\n\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t}\r\n\r\n\tif(!res.status){\r\n\t\tif(showLoader){\r\n\t\t\tloading.dismiss()\r\n\t\t}\r\n\r\n\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotTrashItem\", true, [\"__NAME__\"], [item.name]))\r\n\t}\r\n\r\n\tif(showLoader){\r\n\t\tloading.dismiss()\r\n\t}\r\n\r\n\tclearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\r\n\twindow.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n\t\tthis.updateItemList()\r\n\t}, 500)\r\n\r\n\treturn this.spawnToast(language.get(this.state.lang, \"itemTrashed\", true, [\"__NAME__\"], [item.name]))\r\n}\r\n\r\nexport async function shareItemWithEmail(email, uuid, type, callback){\r\n\tif(email == this.state.userEmail){\r\n\t\treturn callback(language.get(this.state.lang, \"cannotShareWithSelf\"))\r\n\t}\r\n\r\n\tlet loading = await loadingController.create({\r\n\t\tmessage: \"\"\r\n\t})\r\n\r\n\tloading.present()\r\n\r\n\ttry{\r\n\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/user/publicKey/get\", {\r\n\t\t\temail\r\n\t\t})\r\n\t}\r\n\tcatch(e){\r\n\t\tloading.dismiss()\r\n\r\n\t\treturn callback(e)\r\n\t}\r\n\r\n\tif(!res.status){\r\n\t\tloading.dismiss()\r\n\r\n\t\treturn callback(res.message)\r\n\t}\r\n\r\n\tlet userPubKey = res.data.publicKey\r\n\r\n\tif(userPubKey == null){\r\n\t\tloading.dismiss()\r\n\r\n\t\treturn callback(language.get(this.state.lang, \"shareItemUserNotFound\", true, [\"__EMAIL__\"], [email]))\r\n\t}\r\n\r\n\tif(userPubKey.length <= 1){\r\n\t\tloading.dismiss()\r\n\r\n\t\treturn callback(language.get(this.state.lang, \"shareItemUserNotFound\", true, [\"__EMAIL__\"], [email]))\r\n\t}\r\n\r\n\ttry{\r\n\t\tvar usrPubKey = await window.crypto.subtle.importKey(\"spki\", utils._base64ToArrayBuffer(userPubKey), {\r\n\t\t\tname: \"RSA-OAEP\",\r\n\t\t  \thash: \"SHA-512\"\r\n\t  \t}, true, [\"encrypt\"])\r\n\t}\r\n\tcatch(e){\r\n\t\tloading.dismiss()\r\n\r\n\t\treturn callback(e)\r\n\t}\r\n\r\n\tif(type == \"file\"){\r\n\t\tif(typeof window.customVariables.cachedFiles[uuid] == \"undefined\"){\r\n\t\t\tloading.dismiss()\r\n\r\n\t\t\treturn callback(language.get(this.state.lang, \"shareItemFileNotFound\", true, [\"__NAME__\"], [uuid]))\r\n\t\t}\r\n\r\n\t\tlet fileName = window.customVariables.cachedFiles[uuid].name\r\n\t\tlet fileSize = window.customVariables.cachedFiles[uuid].size\r\n\t\tlet fileMime = window.customVariables.cachedFiles[uuid].mime\r\n\t\tlet fileKey = window.customVariables.cachedFiles[uuid].key\r\n\r\n\t\ttry{\r\n\t\t\tvar encrypted = await window.crypto.subtle.encrypt({\r\n\t\t\t\tname: \"RSA-OAEP\"\r\n\t\t\t}, usrPubKey, new TextEncoder().encode(JSON.stringify({\r\n\t\t\t\tname: fileName,\r\n\t\t\t\tsize: fileSize,\r\n\t\t\t\tmime: fileMime,\r\n\t\t\t\tkey: fileKey\r\n\t\t\t})))\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\tloading.dismiss()\r\n\r\n\t\t\treturn console.log(e)\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/share\", {\r\n\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\tuuid,\r\n\t\t\t\tparent: \"none\",\r\n\t\t\t\temail,\r\n\t\t\t\ttype: \"file\",\r\n\t\t\t\tmetadata: utils.base64ArrayBuffer(encrypted)\r\n\t\t\t})\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\tloading.dismiss()\r\n\r\n\t\t\treturn callback(e)\r\n\t\t}\r\n\r\n\t\tif(!res.status){\r\n\t\t\tloading.dismiss()\r\n\r\n\t\t\treturn callback(res.message)\r\n\t\t}\r\n\r\n\t\tloading.dismiss()\r\n\r\n\t\treturn callback(null)\r\n\t}\r\n\telse{\r\n\t\ttry{\r\n\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/download/dir\", {\r\n\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\tuuid\r\n\t\t\t})\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\tloading.dismiss()\r\n\r\n\t\t\treturn callback(e)\r\n\t\t}\r\n\r\n\t\tif(!res.status){\r\n\t\t\tloading.dismiss()\r\n\r\n\t\t\treturn callback(res.message)\r\n\t\t}\r\n\r\n\t\tlet shareItems = []\r\n\r\n\t\tlet files = res.data.files\r\n\t\tlet folders = res.data.folders\r\n\r\n\t\tif((files.length + folders.length) > 1000){\r\n\t\t\tloading.dismiss()\r\n\r\n\t\t\treturn callback(language.get(this.state.lang, \"shareTooBigForApp\"))\r\n\t\t}\r\n\r\n\t\tfor(let i = 0; i < files.length; i++){\r\n\t\t\tlet metadata = utils.decryptFileMetadata(files[i].metadata, this.state.userMasterKeys, files[i].uuid)\r\n\r\n\t\t\tif(metadata.key.length > 0){\r\n\t\t\t\tshareItems.push({\r\n\t\t\t\t\tuuid: files[i].uuid,\r\n\t\t\t\t\tparent: files[i].parent,\r\n\t\t\t\t\tmetadata: {\r\n\t\t\t\t\t\tname: metadata.name,\r\n\t\t\t\t\t\tsize: parseInt(metadata.size),\r\n\t\t\t\t\t\tmime: metadata.mime,\r\n\t\t\t\t\t\tkey: metadata.key\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype: \"file\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(let i = 0; i < folders.length; i++){\r\n\t\t\tlet dirName = utils.decryptCryptoJSFolderName(folders[i].name, this.state.userMasterKeys, folders[i].uuid)\r\n\r\n\t\t\tif(dirName !== \"CON_NO_DECRYPT_POSSIBLE_NO_NAME_FOUND_FOR_FOLDER\"){\r\n\t\t\t\tshareItems.push({\r\n\t\t\t\t\tuuid: folders[i].uuid,\r\n\t\t\t\t\tparent: (i == 0 ? \"none\" : folders[i].parent),\r\n\t\t\t\t\tmetadata: dirName,\r\n\t\t\t\t\ttype: \"folder\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet itemsShared = 0\r\n\r\n\t\tfor(let i = 0; i < shareItems.length; i++){\r\n\t\t\tlet item = shareItems[i]\r\n\t\t\tlet itemMetadata = \"\"\r\n\r\n\t\t\tif(item.type == \"file\"){\r\n\t\t\t\titemMetadata = JSON.stringify(item.metadata)\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\titemMetadata = JSON.stringify({\r\n\t\t\t\t\tname: item.metadata\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\ttry{\r\n\t\t\t\tvar encrypted = await window.crypto.subtle.encrypt({\r\n\t\t\t\t\tname: \"RSA-OAEP\"\r\n\t\t\t\t}, usrPubKey, new TextEncoder().encode(itemMetadata))\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\treturn callback(e)\r\n\t\t\t}\r\n\r\n\t\t\ttry{\r\n\t\t\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/share\", {\r\n\t\t\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\t\t\tuuid: item.uuid,\r\n\t\t\t\t\tparent: item.parent,\r\n\t\t\t\t\temail: email,\r\n\t\t\t\t\ttype: item.type,\r\n\t\t\t\t\tmetadata: utils.base64ArrayBuffer(encrypted)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\r\n\t\t\tif(!res.status){\r\n\t\t\t\tconsole.log(res.message)\r\n\t\t\t}\r\n\r\n\t\t\titemsShared += 1\r\n\r\n\t\t\tif(itemsShared == shareItems.length){\r\n\t\t\t\tloading.dismiss()\r\n\r\n\t\t\t\treturn callback(null)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport async function shareSelectedItems(){\r\n\tlet items = await this.getSelectedItems()\r\n\r\n\twindow.customFunctions.dismissPopover()\r\n\twindow.customFunctions.unselectAllItems()\r\n\r\n\tlet alert = await alertController.create({\r\n        header: language.get(this.state.lang, \"shareItems\"),\r\n        inputs: [\r\n            {\r\n                type: \"text\",\r\n                id: \"share-items-email-input\",\r\n\t\t\t\tname: \"share-items-email-input\",\r\n\t\t\t\tplaceholder: language.get(this.state.lang, \"receiverEmail\")\r\n            }\r\n        ],\r\n        buttons: [\r\n            {\r\n                text: language.get(this.state.lang, \"cancel\"),\r\n                role: \"cancel\",\r\n                handler: () => {\r\n                    return false\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"alertOkButton\"),\r\n                handler: async (inputs) => {\r\n\t\t\t\t\tlet email = inputs['share-items-email-input']\r\n\r\n\t\t\t\t\tlet itemsShared = 0\r\n\r\n\t\t\t\t\tfor(let i = 0; i < items.length; i++){\r\n\t\t\t\t\t\tlet item = items[i]\r\n\r\n\t\t\t\t\t\tif(item.type == \"folder\" && item.uuid == \"default\"){\r\n\t\t\t\t\t\t\tthis.spawnToast(language.get(this.state.lang, \"cannotShareDefaultFolder\"))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tthis.shareItemWithEmail(email, item.uuid, item.type, (err) => {\r\n\t\t\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\t\t\tconsole.log(err)\r\n\t\r\n\t\t\t\t\t\t\t\t\tthis.spawnToast(err.toString())\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t\titemsShared += 1\r\n\t\r\n\t\t\t\t\t\t\t\tif(itemsShared >= items.length){\r\n\t\t\t\t\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"itemsShared\", true, [\"__COUNT__\", \"__EMAIL__\"], [items.length, email]))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n                }\r\n            }\r\n        ]\r\n    })\r\n\r\n    await alert.present()\r\n\r\n\tsetTimeout(() => {\r\n\t\ttry{\r\n\t\t\tdocument.querySelector(\"ion-alert input\").focus()\r\n\t\t} catch(e){ }\r\n\t}, 500)\r\n\r\n\treturn true\r\n}\r\n\r\nexport async function shareItem(item){\r\n\tif(item.type == \"folder\" && item.uuid == \"default\"){\r\n\t\treturn this.spawnToast(language.get(this.state.lang, \"cannotShareDefaultFolder\"))\r\n\t}\r\n\r\n\tlet alert = await alertController.create({\r\n        header: item.type == \"file\" ? language.get(this.state.lang, \"shareFile\") : language.get(this.state.lang, \"shareFolder\"),\r\n        inputs: [\r\n            {\r\n                type: \"text\",\r\n                id: \"share-item-email-input\",\r\n\t\t\t\tname: \"share-item-email-input\",\r\n\t\t\t\tplaceholder: language.get(this.state.lang, \"receiverEmail\")\r\n            }\r\n        ],\r\n        buttons: [\r\n            {\r\n                text: language.get(this.state.lang, \"cancel\"),\r\n                role: \"cancel\",\r\n                handler: () => {\r\n                    return false\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"alertOkButton\"),\r\n                handler: (inputs) => {\r\n\t\t\t\t\tlet email = inputs['share-item-email-input']\r\n\r\n                    this.shareItemWithEmail(email, item.uuid, item.type, (err) => {\r\n\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\tconsole.log(err)\r\n\r\n\t\t\t\t\t\t\treturn this.spawnToast(err.toString())\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"itemShared\", true, [\"__NAME__\", \"__WITH__\"], [item.name, email]))\r\n\t\t\t\t\t})\r\n                }\r\n            }\r\n        ]\r\n    })\r\n\r\n    await alert.present()\r\n\r\n\tsetTimeout(() => {\r\n\t\ttry{\r\n\t\t\tdocument.querySelector(\"ion-alert input\").focus()\r\n\t\t} catch(e){ }\r\n\t}, 500)\r\n\r\n\treturn true\r\n}\r\n\r\nexport async function openPublicLinkModal(item){\r\n\tlet loading = await loadingController.create({\r\n\t\tmessage: \"\"\r\n\t})\r\n\r\n\tloading.present()\r\n\r\n\ttry{\r\n\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/link/status\", {\r\n\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\tfileUUID: item.uuid\r\n\t\t})\r\n\t}\r\n\tcatch(e){\r\n\t\tconsole.log(e)\r\n\r\n\t\tloading.dismiss()\r\n\r\n\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t}\r\n\r\n\tif(!res.status){\r\n\t\tconsole.log(res.message)\r\n\r\n\t\tloading.dismiss()\r\n\r\n\t\treturn this.spawnToast(res.message)\r\n\t}\r\n\r\n\tloading.dismiss()\r\n\r\n\tlet appLang = this.state.lang\r\n\tlet appDarkMode = this.state.darkMode\r\n\tlet modalId = \"public-link-modal-\" + utils.generateRandomClassName()\r\n\r\n\tcustomElements.define(modalId, class ModalContent extends HTMLElement {\r\n\t\tconnectedCallback(){\r\n\t\t\tthis.innerHTML = `\r\n\t\t\t\t<ion-header>\r\n\t\t\t\t\t<ion-toolbar>\r\n\t\t\t\t\t\t<ion-buttons slot=\"start\">\r\n\t\t\t\t\t\t\t<ion-button onClick=\"window.customFunctions.dismissModal()\">\r\n\t\t\t\t\t\t\t\t<ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\"></ion-icon>\r\n\t\t\t\t\t\t\t</ion-button>\r\n\t\t\t\t\t\t</ion-buttons>\r\n\t\t\t\t\t\t<ion-title>\r\n\t\t\t\t\t\t\t` + language.get(appLang, \"publicLinkHeader\", true, [\"__NAME__\"], [item.name]) + `\r\n\t\t\t\t\t\t</ion-title>\r\n\t\t\t\t\t</ion-toolbar>\r\n\t\t\t\t</ion-header>\r\n\t\t\t\t<ion-content style=\"--background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\" fullscreen>\r\n\t\t\t\t\t<div id=\"enable-public-link-content\" ` + (res.data.enabled && `style=\"display: none;\"`) + `>\r\n\t\t\t\t\t\t<div style=\"position: absolute; left: 50%; top: 32%; transform: translate(-50%, -50%); width: 100%;\"> \r\n\t\t\t\t\t\t\t<center>\r\n\t\t\t\t\t\t\t\t<ion-icon icon=\"` + Ionicons.link + `\" style=\"font-size: 65pt; color: ` + (appDarkMode ? \"white\" : \"gray\") + `;\"></ion-icon>\r\n\t\t\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t\t\t<ion-button color=\"primary\" fill=\"solid\" onClick=\"window.customFunctions.editItemPublicLink('` + window.btoa(JSON.stringify(item)) + `', 'enable')\">` + language.get(appLang, \"enablePublicLink\") + `</ion-button>\t\r\n\t\t\t\t\t\t\t</center>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"public-link-enabled-content\" ` + (!res.data.enabled && `style=\"display: none;\"`) + `>\r\n\t\t\t\t\t\t<ion-item lines=\"none\">\r\n\t\t\t\t\t\t\t<ion-label>\r\n\t\t\t\t\t\t\t\t` + language.get(appLang, \"publicLinkEnabled\") + `\r\n\t\t\t\t\t\t\t</ion-label>\r\n\t\t\t\t\t\t\t<ion-toggle slot=\"end\" id=\"public-link-enabled-toggle\" onClick=\"window.customFunctions.editItemPublicLink('` + window.btoa(JSON.stringify(item)) + `', 'disable')\" checked></ion-toggle>\r\n\t\t\t\t\t\t</ion-item>\r\n\t\t\t\t\t\t<ion-item lines=\"none\">\r\n\t\t\t\t\t\t\t<ion-input type=\"text\" id=\"public-link-input\" onClick=\"window.customFunctions.copyPublicLinkToClipboard()\" value=\"https://filen.io/d/` + res.data.uuid + `#!` + item.key + `\" disabled></ion-input>\r\n                            <ion-buttons slot=\"end\" onClick=\"window.customFunctions.copyPublicLinkToClipboard()\">\r\n                                <ion-button fill=\"solid\" color=\"` + (appDarkMode ? `dark` : `light`) + `\">\r\n                                    ` + language.get(appLang, \"copy\") + `\r\n                                </ion-button>\r\n                            </ion-buttons>\r\n                        </ion-item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</ion-content>\r\n\t\t\t`\r\n\t\t}\r\n\t})\r\n\r\n\tlet modal = await modalController.create({\r\n\t\tcomponent: modalId,\r\n\t\tswipeToClose: false,\r\n\t\tshowBackdrop: false,\r\n\t\tbackdropDismiss: false,\r\n\t\tcssClass: \"modal-fullscreen\"\r\n\t})\r\n\r\n\treturn modal.present()\r\n}\r\n\r\nexport function makeItemAvailableOffline(offline, item){\r\n\tif(!offline){\r\n\t\tthis.getDownloadDir(true, item.uuid, async (err, dirObj) => {\r\n\t\t\tif(err){\r\n\t\t\t\tconsole.log(err)\r\n\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotGetDownloadDir\"))\r\n\t\t\t}\r\n\r\n\t\t\ttry{\r\n\t\t\t\tawait Plugins.Filesystem.rmdir({\r\n\t\t\t\t\tpath: dirObj.path,\r\n\t\t\t\t\tdirectory: dirObj.directory,\r\n\t\t\t\t\trecursive: true\r\n\t\t\t\t})\r\n\r\n\t\t\t\tdelete window.customVariables.offlineSavedFiles[item.uuid]\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\r\n\t\t\t\treturn this.spawnToast(language.get(this.state.lang, \"couldNotDeleteDownloadedFile\", true, [\"__NAME__\"], [item.name]))\r\n\t\t\t}\r\n\r\n\t\t\tlet items = this.state.itemList\r\n\t\t\tlet windowItems = window.customVariables.itemList\r\n\r\n\t\t\tfor(let i = 0; i < items.length; i++){\r\n\t\t\t\tif(items[i].uuid == item.uuid){\r\n\t\t\t\t\titems[i].offline = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; i < windowItems.length; i++){\r\n\t\t\t\tif(windowItems[i].uuid == item.uuid){\r\n\t\t\t\t\twindowItems[i].offline = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\titemList: items\r\n\t\t\t})\r\n\r\n\t\t\twindow.customVariables.itemList = windowItems\r\n\t\t\t\r\n\t\t\tif(typeof window.customVariables.cachedFiles[item.uuid] !== \"undefined\"){\r\n\t\t\t\twindow.customVariables.cachedFiles[item.uuid].offline = false\r\n\t\t\t}\r\n\r\n\t\t\tthis.spawnToast(language.get(this.state.lang, \"fileDeletedFromOfflineStorage\", true, [\"__NAME__\"], [item.name]))\r\n\r\n\t\t\twindow.customFunctions.saveOfflineSavedFiles()\r\n\r\n\t\t\treturn this.forceUpdate()\r\n\t\t})\r\n\t}\r\n\telse{\r\n\t\tlet nItem = item\r\n\r\n\t\tnItem.makeOffline = true\r\n\r\n\t\treturn this.queueFileDownload(nItem)\r\n\t}\r\n}\r\n\r\nexport async function removeSharedInItem(item, showLoader){\r\n\tif(showLoader){\r\n\t\tvar loading = await loadingController.create({\r\n\t\t\tmessage: \"\"\r\n\t\t})\r\n\r\n\t\tloading.present()\r\n\t}\r\n\r\n\ttry{\r\n\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/user/shared/item/in/remove\", {\r\n\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\tuuid: item.uuid,\r\n\t\t\treceiverId: 0\r\n\t\t})\r\n\t}\r\n\tcatch(e){\r\n\t\tconsole.log(e)\r\n\r\n\t\tif(showLoader){\r\n\t\t\tloading.dismiss()\r\n\t\t}\r\n\r\n\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t}\r\n\r\n\tif(!res.status){\r\n\t\tconsole.log(res.message)\r\n\r\n\t\tif(showLoader){\r\n\t\t\tloading.dismiss()\r\n\t\t}\r\n\r\n\t\treturn this.spawnToast(res.message)\r\n\t}\r\n\r\n\tif(showLoader){\r\n\t\tloading.dismiss()\r\n\t}\r\n\r\n\tclearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\r\n\twindow.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n\t\tthis.updateItemList()\r\n\t}, 500)\r\n\r\n\treturn this.spawnToast(language.get(this.state.lang, \"itemRemovedFromSharedIn\", true, [\"__NAME__\"], [item.name]))\r\n}\r\n\r\nexport async function stopSharingItem(item, showLoader){\r\n\tif(showLoader){\r\n\t\tvar loading = await loadingController.create({\r\n\t\t\tmessage: \"\"\r\n\t\t})\r\n\r\n\t\tloading.present()\r\n\t}\r\n\r\n\ttry{\r\n\t\tvar res = await utils.apiRequest(\"POST\", \"/v1/user/shared/item/out/remove\", {\r\n\t\t\tapiKey: this.state.userAPIKey,\r\n\t\t\tuuid: item.uuid,\r\n\t\t\treceiverId: item.receiverId\r\n\t\t})\r\n\t}\r\n\tcatch(e){\r\n\t\tconsole.log(e)\r\n\r\n\t\tif(showLoader){\r\n\t\t\tloading.dismiss()\r\n\t\t}\r\n\r\n\t\treturn this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n\t}\r\n\r\n\tif(!res.status){\r\n\t\tconsole.log(res.message)\r\n\r\n\t\tif(showLoader){\r\n\t\t\tloading.dismiss()\r\n\t\t}\r\n\r\n\t\treturn this.spawnToast(res.message)\r\n\t}\r\n\r\n\tif(showLoader){\r\n\t\tloading.dismiss()\r\n\t}\r\n\r\n\tclearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\r\n\twindow.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n\t\tthis.updateItemList()\r\n\t}, 500)\r\n\r\n\treturn this.spawnToast(language.get(this.state.lang, \"itemStoppedSharing\", true, [\"__NAME__\"], [item.name]))\r\n}\r\n\r\nexport async function removeSelectedItemsFromSharedIn(){\r\n\tlet items = await this.getSelectedItems()\r\n\r\n\twindow.customFunctions.dismissPopover()\r\n\twindow.customFunctions.unselectAllItems()\r\n\r\n\tfor(let i = 0; i < items.length; i++){\r\n\t\tlet item = items[i]\r\n\r\n\t\tthis.removeSharedInItem(item, false)\r\n\t}\r\n\r\n\treturn true\r\n}\r\n\r\nexport async function stopSharingSelectedItems(){\r\n\tlet items = await this.getSelectedItems()\r\n\r\n\twindow.customFunctions.dismissPopover()\r\n\twindow.customFunctions.unselectAllItems()\r\n\r\n\tfor(let i = 0; i < items.length; i++){\r\n\t\tlet item = items[i]\r\n\r\n\t\tthis.stopSharingItem(item, false)\r\n\t}\r\n\r\n\treturn true\r\n}\r\n\r\nexport async function downloadSelectedItems(){\r\n\tlet items = await this.getSelectedItems()\r\n\r\n\twindow.customFunctions.dismissPopover()\r\n\twindow.customFunctions.unselectAllItems()\r\n\r\n\tfor(let i = 0; i < items.length; i++){\r\n\t\tlet item = items[i]\r\n\r\n\t\tif(item.type == \"file\"){\r\n\t\t\tthis.queueFileDownload(item)\r\n\t\t}\r\n\t}\r\n\r\n\treturn true\r\n}\r\n\r\nexport async function storeSelectedItemsOffline(){\r\n\tlet items = await this.getSelectedItems()\r\n\r\n\twindow.customFunctions.dismissPopover()\r\n\twindow.customFunctions.unselectAllItems()\r\n\r\n\tfor(let i = 0; i < items.length; i++){\r\n\t\tlet item = items[i]\r\n\r\n\t\tif(item.type == \"file\"){\r\n\t\t\titem.makeOffline = true\r\n\r\n\t\t\tthis.queueFileDownload(item)\r\n\t\t}\r\n\t}\r\n\r\n\treturn true\r\n}\r\n\r\nexport async function spawnItemActionSheet(item){\r\n\tlet buttons = undefined\r\n\r\n\tif(item.type == \"folder\"){\r\n\t\tif(window.location.href.indexOf(\"shared-in\") !== -1){\r\n\t\t\tbuttons = [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"removeFromShared\"),\r\n\t\t\t\t\ticon: Ionicons.stopCircle,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.removeSharedInItem(item, false)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\t\ticon: Ionicons.close,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn actionSheet.dismiss()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\telse if(window.location.href.indexOf(\"shared-out\") !== -1){\r\n\t\t\tbuttons = [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"stopSharing\"),\r\n\t\t\t\t\ticon: Ionicons.stopCircle,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.stopSharingItem(item, false)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\t\ticon: Ionicons.close,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn actionSheet.dismiss()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\telse if(window.location.href.indexOf(\"trash\") !== -1){\r\n\t\t\tbuttons = [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"restoreItem\"),\r\n\t\t\t\t\ticon: Ionicons.bagAdd,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn this.restoreItem(item, false)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\t\ticon: Ionicons.close,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn actionSheet.dismiss()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\telse{\r\n\t\t\tbuttons = [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"shareItem\"),\r\n\t\t\t\t\ticon: Ionicons.shareSocial,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn this.shareItem(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"moveItem\"),\r\n\t\t\t\t\ticon: Ionicons.move,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn this.moveItem(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"renameItem\"),\r\n\t\t\t\t\ticon: Ionicons.text,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn this.renameItem(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"trashItem\"),\r\n\t\t\t\t\ticon: Ionicons.trash,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn this.trashItem(item, false)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\t\ticon: Ionicons.close,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn actionSheet.dismiss()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\telse{\r\n\t\tif(window.location.href.indexOf(\"shared-in\") !== -1){\r\n\t\t\tbuttons = [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"downloadItem\"),\r\n\t\t\t\t\ticon: Ionicons.download,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.queueFileDownload(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: item.offline ? language.get(this.state.lang, \"removeItemFromOffline\") : language.get(this.state.lang, \"makeItemAvailableOffline\"),\r\n\t\t\t\t\ticon: Ionicons.save,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\tif(item.offline){\r\n\t\t\t\t\t\t\treturn this.makeItemAvailableOffline(false, item)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn this.makeItemAvailableOffline(true, item)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"removeFromShared\"),\r\n\t\t\t\t\ticon: Ionicons.stopCircle,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.removeSharedInItem(item, false)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\t\ticon: Ionicons.close,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn actionSheet.dismiss()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\telse if(window.location.href.indexOf(\"shared-out\") !== -1){\r\n\t\t\tbuttons = [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"downloadItem\"),\r\n\t\t\t\t\ticon: Ionicons.download,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.queueFileDownload(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: item.offline ? language.get(this.state.lang, \"removeItemFromOffline\") : language.get(this.state.lang, \"makeItemAvailableOffline\"),\r\n\t\t\t\t\ticon: Ionicons.save,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\tif(item.offline){\r\n\t\t\t\t\t\t\treturn this.makeItemAvailableOffline(false, item)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn this.makeItemAvailableOffline(true, item)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"stopSharing\"),\r\n\t\t\t\t\ticon: Ionicons.stopCircle,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.stopSharingItem(item, false)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\t\ticon: Ionicons.close,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn actionSheet.dismiss()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\telse if(window.location.href.indexOf(\"trash\") !== -1){\r\n\t\t\tbuttons = [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"downloadItem\"),\r\n\t\t\t\t\ticon: Ionicons.download,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.queueFileDownload(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"restoreItem\"),\r\n\t\t\t\t\ticon: Ionicons.bagAdd,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.restoreItem(item, false)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\t\ticon: Ionicons.close,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn actionSheet.dismiss()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\telse{\r\n\t\t\tbuttons = [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"shareItem\"),\r\n\t\t\t\t\ticon: Ionicons.shareSocial,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.shareItem(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"itemPublicLink\"),\r\n\t\t\t\t\ticon: Ionicons.link,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.openPublicLinkModal(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"downloadItem\"),\r\n\t\t\t\t\ticon: Ionicons.download,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.queueFileDownload(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: item.offline ? language.get(this.state.lang, \"removeItemFromOffline\") : language.get(this.state.lang, \"makeItemAvailableOffline\"),\r\n\t\t\t\t\ticon: Ionicons.save,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\tif(item.offline){\r\n\t\t\t\t\t\t\treturn this.makeItemAvailableOffline(false, item)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn this.makeItemAvailableOffline(true, item)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"moveItem\"),\r\n\t\t\t\t\ticon: Ionicons.move,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.moveItem(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"renameItem\"),\r\n\t\t\t\t\ticon: Ionicons.text,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.renameItem(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"trashItem\"),\r\n\t\t\t\t\ticon: Ionicons.trash,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\twindow.customFunctions.dismissModal()\r\n\t\r\n\t\t\t\t\t\treturn this.trashItem(item, false)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: language.get(this.state.lang, \"cancel\"),\r\n\t\t\t\t\ticon: Ionicons.close,\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\treturn actionSheet.dismiss()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\r\n\tlet headerName = item.name\r\n\r\n\tif(headerName.length >= 32){\r\n\t\theaderName = headerName.substring(0, 32) + \"...\"\r\n\t}\r\n\r\n    let actionSheet = await actionSheetController.create({\r\n        header: headerName,\r\n        buttons\r\n    })\r\n\r\n\tawait actionSheet.present()\r\n\t\r\n\tif(Capacitor.isNative){\r\n\t\tsetTimeout(() => {\r\n\t\t\tCapacitor.Plugins.Keyboard.hide()\r\n\t\t}, 500)\r\n\t}\r\n\r\n\treturn true\r\n}"]},"metadata":{},"sourceType":"module"}