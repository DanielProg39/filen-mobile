{"ast":null,"code":"'use strict';\n\nvar attrs = ['top', 'left', 'right', 'bottom'];\nvar inited;\nvar elementComputedStyle = {};\nvar support;\n\nfunction getSupport() {\n  if (!('CSS' in window) || typeof CSS.supports != 'function') {\n    support = '';\n  } else if (CSS.supports('top: env(safe-area-inset-top)')) {\n    support = 'env';\n  } else if (CSS.supports('top: constant(safe-area-inset-top)')) {\n    support = 'constant';\n  } else {\n    support = '';\n  }\n\n  return support;\n}\n\nfunction init() {\n  support = typeof support === 'string' ? support : getSupport();\n\n  if (!support) {\n    attrs.forEach(function (attr) {\n      elementComputedStyle[attr] = 0;\n    });\n    return;\n  }\n\n  function setStyle(el, style) {\n    var elStyle = el.style;\n    Object.keys(style).forEach(function (key) {\n      var val = style[key];\n      elStyle[key] = val;\n    });\n  }\n\n  var cbs = [];\n\n  function parentReady(callback) {\n    if (callback) {\n      cbs.push(callback);\n    } else {\n      cbs.forEach(function (cb) {\n        cb();\n      });\n    }\n  }\n\n  var passiveEvents = false;\n\n  try {\n    var opts = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passiveEvents = {\n          passive: true\n        };\n      }\n    });\n    window.addEventListener('test', null, opts);\n  } catch (e) {}\n\n  function addChild(parent, attr) {\n    var a1 = document.createElement('div');\n    var a2 = document.createElement('div');\n    var a1Children = document.createElement('div');\n    var a2Children = document.createElement('div');\n    var W = 100;\n    var MAX = 10000;\n    var aStyle = {\n      position: 'absolute',\n      width: W + 'px',\n      height: '200px',\n      boxSizing: 'border-box',\n      overflow: 'hidden',\n      paddingBottom: support + \"(safe-area-inset-\" + attr + \")\"\n    };\n    setStyle(a1, aStyle);\n    setStyle(a2, aStyle);\n    setStyle(a1Children, {\n      transition: '0s',\n      animation: 'none',\n      width: '400px',\n      height: '400px'\n    });\n    setStyle(a2Children, {\n      transition: '0s',\n      animation: 'none',\n      width: '250%',\n      height: '250%'\n    });\n    a1.appendChild(a1Children);\n    a2.appendChild(a2Children);\n    parent.appendChild(a1);\n    parent.appendChild(a2);\n    parentReady(function () {\n      a1.scrollTop = a2.scrollTop = MAX;\n      var a1LastScrollTop = a1.scrollTop;\n      var a2LastScrollTop = a2.scrollTop;\n\n      function onScroll() {\n        if (this.scrollTop === (this === a1 ? a1LastScrollTop : a2LastScrollTop)) {\n          return;\n        }\n\n        a1.scrollTop = a2.scrollTop = MAX;\n        a1LastScrollTop = a1.scrollTop;\n        a2LastScrollTop = a2.scrollTop;\n        attrChange(attr);\n      }\n\n      a1.addEventListener('scroll', onScroll, passiveEvents);\n      a2.addEventListener('scroll', onScroll, passiveEvents);\n    });\n    var computedStyle = getComputedStyle(a1);\n    Object.defineProperty(elementComputedStyle, attr, {\n      configurable: true,\n      get: function () {\n        return parseFloat(computedStyle.paddingBottom);\n      }\n    });\n  }\n\n  var parentDiv = document.createElement('div');\n  setStyle(parentDiv, {\n    position: 'absolute',\n    left: '0',\n    top: '0',\n    width: '0',\n    height: '0',\n    zIndex: '-1',\n    overflow: 'hidden',\n    visibility: 'hidden'\n  });\n  attrs.forEach(function (key) {\n    addChild(parentDiv, key);\n  });\n  document.body.appendChild(parentDiv);\n  parentReady();\n  inited = true;\n}\n\nfunction getAttr(attr) {\n  if (!inited) {\n    init();\n  }\n\n  return elementComputedStyle[attr];\n}\n\nvar changeAttrs = [];\n\nfunction attrChange(attr) {\n  if (!changeAttrs.length) {\n    setTimeout(function () {\n      var style = {};\n      changeAttrs.forEach(function (attr) {\n        style[attr] = elementComputedStyle[attr];\n      });\n      changeAttrs.length = 0;\n      callbacks.forEach(function (callback) {\n        callback(style);\n      });\n    }, 0);\n  }\n\n  changeAttrs.push(attr);\n}\n\nvar callbacks = [];\n\nfunction onChange(callback) {\n  if (!getSupport()) {\n    return;\n  }\n\n  if (!inited) {\n    init();\n  }\n\n  if (typeof callback === 'function') {\n    callbacks.push(callback);\n  }\n}\n\nfunction offChange(callback) {\n  var index = callbacks.indexOf(callback);\n\n  if (index >= 0) {\n    callbacks.splice(index, 1);\n  }\n}\n\nvar safeAreaInsets = {\n  get support() {\n    return (typeof support === 'string' ? support : getSupport()).length != 0;\n  },\n\n  get top() {\n    return getAttr('top');\n  },\n\n  get left() {\n    return getAttr('left');\n  },\n\n  get right() {\n    return getAttr('right');\n  },\n\n  get bottom() {\n    return getAttr('bottom');\n  },\n\n  onChange: onChange,\n  offChange: offChange\n};\nmodule.exports = safeAreaInsets;","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["'use strict';\nvar attrs = ['top', 'left', 'right', 'bottom'];\nvar inited;\nvar elementComputedStyle = {};\nvar support;\nfunction getSupport() {\n    if (!('CSS' in window) || typeof CSS.supports != 'function') {\n        support = '';\n    }\n    else if (CSS.supports('top: env(safe-area-inset-top)')) {\n        support = 'env';\n    }\n    else if (CSS.supports('top: constant(safe-area-inset-top)')) {\n        support = 'constant';\n    }\n    else {\n        support = '';\n    }\n    return support;\n}\nfunction init() {\n    support = typeof support === 'string' ? support : getSupport();\n    if (!support) {\n        attrs.forEach(function (attr) {\n            elementComputedStyle[attr] = 0;\n        });\n        return;\n    }\n    function setStyle(el, style) {\n        var elStyle = el.style;\n        Object.keys(style).forEach(function (key) {\n            var val = style[key];\n            elStyle[key] = val;\n        });\n    }\n    var cbs = [];\n    function parentReady(callback) {\n        if (callback) {\n            cbs.push(callback);\n        }\n        else {\n            cbs.forEach(function (cb) {\n                cb();\n            });\n        }\n    }\n    var passiveEvents = false;\n    try {\n        var opts = Object.defineProperty({}, 'passive', {\n            get: function () {\n                passiveEvents = { passive: true };\n            }\n        });\n        window.addEventListener('test', null, opts);\n    }\n    catch (e) {\n    }\n    function addChild(parent, attr) {\n        var a1 = document.createElement('div');\n        var a2 = document.createElement('div');\n        var a1Children = document.createElement('div');\n        var a2Children = document.createElement('div');\n        var W = 100;\n        var MAX = 10000;\n        var aStyle = {\n            position: 'absolute',\n            width: W + 'px',\n            height: '200px',\n            boxSizing: 'border-box',\n            overflow: 'hidden',\n            paddingBottom: support + \"(safe-area-inset-\" + attr + \")\"\n        };\n        setStyle(a1, aStyle);\n        setStyle(a2, aStyle);\n        setStyle(a1Children, {\n            transition: '0s',\n            animation: 'none',\n            width: '400px',\n            height: '400px'\n        });\n        setStyle(a2Children, {\n            transition: '0s',\n            animation: 'none',\n            width: '250%',\n            height: '250%'\n        });\n        a1.appendChild(a1Children);\n        a2.appendChild(a2Children);\n        parent.appendChild(a1);\n        parent.appendChild(a2);\n        parentReady(function () {\n            a1.scrollTop = a2.scrollTop = MAX;\n            var a1LastScrollTop = a1.scrollTop;\n            var a2LastScrollTop = a2.scrollTop;\n            function onScroll() {\n                if (this.scrollTop === (this === a1 ? a1LastScrollTop : a2LastScrollTop)) {\n                    return;\n                }\n                a1.scrollTop = a2.scrollTop = MAX;\n                a1LastScrollTop = a1.scrollTop;\n                a2LastScrollTop = a2.scrollTop;\n                attrChange(attr);\n            }\n            a1.addEventListener('scroll', onScroll, passiveEvents);\n            a2.addEventListener('scroll', onScroll, passiveEvents);\n        });\n        var computedStyle = getComputedStyle(a1);\n        Object.defineProperty(elementComputedStyle, attr, {\n            configurable: true,\n            get: function () {\n                return parseFloat(computedStyle.paddingBottom);\n            }\n        });\n    }\n    var parentDiv = document.createElement('div');\n    setStyle(parentDiv, {\n        position: 'absolute',\n        left: '0',\n        top: '0',\n        width: '0',\n        height: '0',\n        zIndex: '-1',\n        overflow: 'hidden',\n        visibility: 'hidden',\n    });\n    attrs.forEach(function (key) {\n        addChild(parentDiv, key);\n    });\n    document.body.appendChild(parentDiv);\n    parentReady();\n    inited = true;\n}\nfunction getAttr(attr) {\n    if (!inited) {\n        init();\n    }\n    return elementComputedStyle[attr];\n}\nvar changeAttrs = [];\nfunction attrChange(attr) {\n    if (!changeAttrs.length) {\n        setTimeout(function () {\n            var style = {};\n            changeAttrs.forEach(function (attr) {\n                style[attr] = elementComputedStyle[attr];\n            });\n            changeAttrs.length = 0;\n            callbacks.forEach(function (callback) {\n                callback(style);\n            });\n        }, 0);\n    }\n    changeAttrs.push(attr);\n}\nvar callbacks = [];\nfunction onChange(callback) {\n    if (!getSupport()) {\n        return;\n    }\n    if (!inited) {\n        init();\n    }\n    if (typeof callback === 'function') {\n        callbacks.push(callback);\n    }\n}\nfunction offChange(callback) {\n    var index = callbacks.indexOf(callback);\n    if (index >= 0) {\n        callbacks.splice(index, 1);\n    }\n}\nvar safeAreaInsets = {\n    get support() {\n        return (typeof support === 'string' ? support : getSupport()).length != 0;\n    },\n    get top() {\n        return getAttr('top');\n    },\n    get left() {\n        return getAttr('left');\n    },\n    get right() {\n        return getAttr('right');\n    },\n    get bottom() {\n        return getAttr('bottom');\n    },\n    onChange: onChange,\n    offChange: offChange\n};\nmodule.exports = safeAreaInsets;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}