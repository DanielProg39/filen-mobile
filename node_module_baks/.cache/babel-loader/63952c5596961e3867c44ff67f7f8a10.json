{"ast":null,"code":"import _classCallCheck from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _wrapNativeSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";import _regeneratorRuntime from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Capacitor,Plugins,FilesystemDirectory}from\"@capacitor/core\";import{modalController,popoverController,menuController,alertController,loadingController,actionSheetController}from\"@ionic/core\";import*as language from\"../utils/language\";import*as Ionicons from'ionicons/icons';import{isPlatform,getPlatforms}from\"@ionic/react\";var utils=require(\"../utils/utils\");var safeAreaInsets=require('safe-area-insets');export function windowRouter(){var _this=this;window.onhashchange=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var routeEx,foldersInRoute,lastFolderInRoute;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(window.currentHref!==window.location.href)){_context.next=10;break;}window.currentHref=window.location.href;_this.setState({currentHref:window.currentHref});routeEx=window.location.hash.split(\"/\");if(!_this.state.isLoggedIn){_context.next=10;break;}if(!(routeEx[1]==\"base\"||routeEx[1]==\"shared-in\"||routeEx[1]==\"shared-out\"||routeEx[1]==\"trash\"||routeEx[1]==\"links\")){_context.next=10;break;}_context.next=8;return _this.updateItemList();case 8:foldersInRoute=routeEx.slice(2);if(foldersInRoute.length>0){lastFolderInRoute=foldersInRoute[foldersInRoute.length-1];if(window.customVariables.cachedFolders[lastFolderInRoute]){_this.setState({mainToolbarTitle:window.customVariables.cachedFolders[lastFolderInRoute].name,showMainToolbarBackButton:true});}else{_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"myCloud\"),showMainToolbarBackButton:false});}}else{if(routeEx[1]==\"shared-in\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"sharedInTitle\"),showMainToolbarBackButton:false});}else if(routeEx[1]==\"shared-out\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"sharedOutTitle\"),showMainToolbarBackButton:false});}else if(routeEx[1]==\"trash\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"trashTitle\"),showMainToolbarBackButton:false});}else if(routeEx[1]==\"links\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"linksTitle\"),showMainToolbarBackButton:false});}else{_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"myCloud\"),showMainToolbarBackButton:false});}}case 10:case\"end\":return _context.stop();}}},_callee);}));}export function setupWindowFunctions(){var _this2=this;window.$=undefined;var jQueryScript=document.createElement(\"script\");jQueryScript.type=\"text/javascript\";jQueryScript.src=\"assets/jquery.js\";document.getElementsByTagName(\"head\")[0].appendChild(jQueryScript);var pdfJsScript=document.createElement(\"script\");pdfJsScript.type=\"text/javascript\";pdfJsScript.src=\"assets/pdf/build/pdf.js\";document.getElementsByTagName(\"head\")[0].appendChild(pdfJsScript);window.customFunctions={};window.customVariables={};window.customVariables.itemList=[];window.customVariables.lang=this.state.lang;window.customVariables.cachedFolders={};window.customVariables.cachedFiles={};window.customVariables.cachedMetadata={};window.customVariables.keyUpdateInterval=undefined;window.customVariables.usageUpdateInterval=undefined;window.customVariables.apiKey=\"\";window.customVariables.uploadSemaphore=new utils.Semaphore(3);window.customVariables.uploadChunkSemaphore=new utils.Semaphore(5);window.customVariables.downloadSemaphore=new utils.Semaphore(5);window.customVariables.downloadChunkSemaphore=new utils.Semaphore(30);window.customVariables.shareItemSemaphore=new utils.Semaphore(4);window.customVariables.decryptShareItemSemaphore=new utils.Semaphore(128);window.customVariables.uploads={};window.customVariables.downloads={};window.customVariables.reloadContentAfterUploadTimeout=undefined;window.customVariables.offlineSavedFiles={};window.customVariables.urlCreator=window.URL||window.webkitURL;window.customVariables.currentPreviewURL=undefined;window.customVariables.reloadAfterActionTimeout=undefined;window.customVariables.nextNativeToastAllowed=Math.floor(+new Date()/1000);window.customVariables.apiCache={};window.customVariables.selectLangInterval=undefined;window.customVariables.stoppedUploads={};window.customVariables.stoppedDownloads={};window.customVariables.stoppedUploadsDone={};window.customVariables.stoppedDownloadsDone={};window.customVariables.lastCachedItemsLength=undefined;window.customVariables.lastAPICacheLength=undefined;window.customVariables.thumbnailCache={};window.customVariables.thumbnailBlobCache={};window.customVariables.currentThumbnailURL=undefined;window.customVariables.lastThumbnailCacheLength=undefined;window.customVariables.thumbnailSemaphore=new utils.Semaphore(2);window.customVariables.updateItemsSemaphore=new utils.Semaphore(1);window.customVariables.getNetworkInfoInterval=undefined;window.customVariables.networkStatus=undefined;window.customVariables.orderBy=\"nameAsc\";window.customVariables.getThumbnailErrors={};window.customVariables.lastGetThumbnailErrorsLength=undefined;window.customVariables.scrollToIndex={};window.customVariables.mainSearchbarTimeout=undefined;window.customVariables.mainSearchbarInterval=undefined;window.customVariables.lastMainSearchbarTerm=\"\";window.customVariables.userMasterKeys=[];window.customVariables.isGettingPreviewData=false;window.customVariables.stopGettingPreviewData=false;window.customVariables.cachedAPIItemListRequests={};window.customVariables.deviceHeightAndWidthInterval=undefined;clearInterval(window.customVariables.mainSearchbarInterval);window.customVariables.mainSearchbarInterval=setInterval(function(){if(document.getElementById(\"main-searchbar\")!==null){var term=document.getElementById(\"main-searchbar\").value.trim();if(typeof term==\"string\"){if(term.length>0){if(term!==window.customVariables.lastMainSearchbarTerm){window.customVariables.lastMainSearchbarTerm=term;clearTimeout(window.customVariables.mainSearchbarTimeout);window.customVariables.mainSearchbarTimeout=setTimeout(function(){_this2.setMainSearchTerm(term);},250);}}else{clearTimeout(window.customVariables.mainSearchbarTimeout);_this2.setMainSearchTerm(\"\");}}else{clearTimeout(window.customVariables.mainSearchbarTimeout);_this2.setMainSearchTerm(\"\");}}else{clearTimeout(window.customVariables.mainSearchbarTimeout);}},100);var updateHeightAndWidthState=function updateHeightAndWidthState(){_this2.setState({windowHeight:window.innerHeight,windowWidth:window.innerWidth});};clearInterval(window.customVariables.deviceHeightAndWidthInterval);window.customVariables.deviceHeightAndWidthInterval=setInterval(function(){updateHeightAndWidthState();},250);window.addEventListener(\"orientationchange\",function(){updateHeightAndWidthState();},false);window.addEventListener(\"resize\",function(){updateHeightAndWidthState();},false);document.onclick=function(e){return window.customFunctions.togglePreviewHeader(e);};window.customFunctions.isPlatform=isPlatform;window.customFunctions.safeAreaInsets=safeAreaInsets;window.customFunctions.togglePreviewHeader=function(e){if(typeof e.target==\"undefined\"){return;}if(e.target.innerHTML.indexOf(\"<ion-icon\")!==-1){return false;}if(document.getElementsByClassName(\"preview-header-hidden\").length>0){var header=document.getElementsByClassName(\"preview-header-hidden\")[0];if(header.style.display==\"none\"){header.style.display=\"block\";}else{header.style.display=\"none\";}}};window.customFunctions.getNetworkInfo=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Plugins.Network.getStatus();case 3:window.customVariables.networkStatus=_context2.sent;_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));window.customFunctions.saveOfflineSavedFiles=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Plugins.Storage.set({key:\"offlineSavedFiles\",value:JSON.stringify(window.customVariables.offlineSavedFiles)});case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));window.customFunctions.saveGetThumbnailErrors=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var length;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(typeof window.customVariables.lastGetThumbnailErrorsLength!==\"undefined\")){_context4.next=8;break;}length=JSON.stringify(window.customVariables.getThumbnailErrors);length=length.length;if(!(length==window.customVariables.lastGetThumbnailErrorsLength)){_context4.next=7;break;}return _context4.abrupt(\"return\",false);case 7:window.customVariables.lastGetThumbnailErrorsLength=length;case 8:_context4.prev=8;_context4.next=11;return Plugins.Storage.set({key:\"getThumbnailErrors\",value:JSON.stringify(window.customVariables.getThumbnailErrors)});case 11:_context4.next=16;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](8);console.log(_context4.t0);case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[8,13]]);}));window.customFunctions.saveAPICache=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var length;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(typeof window.customVariables.lastAPICacheLength!==\"undefined\")){_context5.next=8;break;}length=JSON.stringify(window.customVariables.apiCache);length=length.length;if(!(length==window.customVariables.lastAPICacheLength)){_context5.next=7;break;}return _context5.abrupt(\"return\",false);case 7:window.customVariables.lastAPICacheLength=length;case 8:_context5.prev=8;_context5.next=11;return Plugins.Storage.set({key:\"apiCache\",value:JSON.stringify(window.customVariables.apiCache)});case 11:_context5.next=16;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](8);console.log(_context5.t0);case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[8,13]]);}));window.customFunctions.saveThumbnailCache=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var length;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(typeof window.customVariables.lastThumbnailCacheLength!==\"undefined\")){_context6.next=8;break;}length=JSON.stringify(window.customVariables.thumbnailCache);length=length.length;if(!(length==window.customVariables.lastThumbnailCacheLength)){_context6.next=7;break;}return _context6.abrupt(\"return\",false);case 7:window.customVariables.lastThumbnailCacheLength=length;case 8:_context6.prev=8;_context6.next=11;return Plugins.Storage.set({key:\"thumbnailCache\",value:JSON.stringify(window.customVariables.thumbnailCache)});case 11:_context6.next=16;break;case 13:_context6.prev=13;_context6.t0=_context6[\"catch\"](8);console.log(_context6.t0);case 16:case\"end\":return _context6.stop();}}},_callee6,null,[[8,13]]);}));window.customFunctions.saveCachedItems=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var length;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(typeof window.customVariables.lastCachedItemsLength!==\"undefined\")){_context7.next=8;break;}length=JSON.stringify(window.customVariables.cachedFiles)+JSON.stringify(window.customVariables.cachedFolders);length=length.length;if(!(length==window.customVariables.lastCachedItemsLength)){_context7.next=7;break;}return _context7.abrupt(\"return\",false);case 7:window.customVariables.lastCachedItemsLength=length;case 8:_context7.prev=8;_context7.next=11;return Plugins.Storage.set({key:\"cachedFiles\",value:JSON.stringify(window.customVariables.cachedFiles)});case 11:_context7.next=13;return Plugins.Storage.set({key:\"cachedFolders\",value:JSON.stringify(window.customVariables.cachedFolders)});case 13:_context7.next=18;break;case 15:_context7.prev=15;_context7.t0=_context7[\"catch\"](8);console.log(_context7.t0);case 18:case\"end\":return _context7.stop();}}},_callee7,null,[[8,15]]);}));window.customFunctions.dismissActionSheet=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var all,actionSheet,_args8=arguments;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:all=_args8.length>0&&_args8[0]!==undefined?_args8[0]:false;if(!all){_context8.next=11;break;}_context8.prev=2;_context8.next=5;return actionSheetController.dismiss();case 5:return _context8.abrupt(\"return\",true);case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](2);return _context8.abrupt(\"return\",console.log(_context8.t0));case 11:_context8.prev=11;_context8.next=14;return actionSheetController.getTop();case 14:actionSheet=_context8.sent;if(!(typeof actionSheet!==\"undefined\")){_context8.next=17;break;}return _context8.abrupt(\"return\",actionSheet.dismiss());case 17:return _context8.abrupt(\"return\",true);case 20:_context8.prev=20;_context8.t1=_context8[\"catch\"](11);return _context8.abrupt(\"return\",console.log(_context8.t1));case 23:case\"end\":return _context8.stop();}}},_callee8,null,[[2,8],[11,20]]);}));window.customFunctions.dismissPopover=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var all,popover,_args9=arguments;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:all=_args9.length>0&&_args9[0]!==undefined?_args9[0]:false;if(!all){_context9.next=11;break;}_context9.prev=2;_context9.next=5;return popoverController.dismiss();case 5:return _context9.abrupt(\"return\",true);case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](2);return _context9.abrupt(\"return\",console.log(_context9.t0));case 11:_context9.prev=11;_context9.next=14;return popoverController.getTop();case 14:popover=_context9.sent;if(!(typeof popover!==\"undefined\")){_context9.next=17;break;}return _context9.abrupt(\"return\",popover.dismiss());case 17:return _context9.abrupt(\"return\",true);case 20:_context9.prev=20;_context9.t1=_context9[\"catch\"](11);return _context9.abrupt(\"return\",console.log(_context9.t1));case 23:case\"end\":return _context9.stop();}}},_callee9,null,[[2,8],[11,20]]);}));window.customFunctions.dismissModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var all,modal,_args10=arguments;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:all=_args10.length>0&&_args10[0]!==undefined?_args10[0]:false;if(!all){_context10.next=11;break;}_context10.prev=2;_context10.next=5;return modalController.dismiss();case 5:return _context10.abrupt(\"return\",true);case 8:_context10.prev=8;_context10.t0=_context10[\"catch\"](2);return _context10.abrupt(\"return\",console.log(_context10.t0));case 11:_context10.prev=11;_context10.next=14;return modalController.getTop();case 14:modal=_context10.sent;if(!(typeof modal!==\"undefined\")){_context10.next=17;break;}return _context10.abrupt(\"return\",modal.dismiss());case 17:return _context10.abrupt(\"return\",true);case 20:_context10.prev=20;_context10.t1=_context10[\"catch\"](11);return _context10.abrupt(\"return\",console.log(_context10.t1));case 23:case\"end\":return _context10.stop();}}},_callee10,null,[[2,8],[11,20]]);}));window.customFunctions.dismissLoader=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var all,loader,_args11=arguments;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:all=_args11.length>0&&_args11[0]!==undefined?_args11[0]:false;if(!all){_context11.next=11;break;}_context11.prev=2;_context11.next=5;return loadingController.dismiss();case 5:return _context11.abrupt(\"return\",true);case 8:_context11.prev=8;_context11.t0=_context11[\"catch\"](2);return _context11.abrupt(\"return\",console.log(_context11.t0));case 11:_context11.prev=11;_context11.next=14;return loadingController.getTop();case 14:loader=_context11.sent;if(!(typeof loader!==\"undefined\")){_context11.next=17;break;}return _context11.abrupt(\"return\",loader.dismiss());case 17:return _context11.abrupt(\"return\",true);case 20:_context11.prev=20;_context11.t1=_context11[\"catch\"](11);return _context11.abrupt(\"return\",console.log(_context11.t1));case 23:case\"end\":return _context11.stop();}}},_callee11,null,[[2,8],[11,20]]);}));window.customFunctions.dismissAlert=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var all,alert,_args12=arguments;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:all=_args12.length>0&&_args12[0]!==undefined?_args12[0]:false;if(!all){_context12.next=11;break;}_context12.prev=2;_context12.next=5;return alertController.dismiss();case 5:return _context12.abrupt(\"return\",true);case 8:_context12.prev=8;_context12.t0=_context12[\"catch\"](2);return _context12.abrupt(\"return\",console.log(_context12.t0));case 11:_context12.prev=11;_context12.next=14;return alertController.getTop();case 14:alert=_context12.sent;if(!(typeof alert!==\"undefined\")){_context12.next=17;break;}return _context12.abrupt(\"return\",alert.dismiss());case 17:return _context12.abrupt(\"return\",true);case 20:_context12.prev=20;_context12.t1=_context12[\"catch\"](11);return _context12.abrupt(\"return\",console.log(_context12.t1));case 23:case\"end\":return _context12.stop();}}},_callee12,null,[[2,8],[11,20]]);}));window.customFunctions.selectAllItems=function(){var items=[];for(var i=0;i<_this2.state.itemList.length;i++){var item=_this2.state.itemList[i];item.selected=true;items.push(item);}_this2.setState({itemList:items,selectedItems:items.length});return window.customFunctions.dismissPopover();};window.customFunctions.unselectAllItems=function(){var items=[];for(var i=0;i<_this2.state.itemList.length;i++){var item=_this2.state.itemList[i];item.selected=false;items.push(item);}_this2.setState({itemList:items,selectedItems:0});return window.customFunctions.dismissPopover();};window.customFunctions.refreshItemList=function(){_this2.updateItemList();return window.customFunctions.dismissPopover();};window.customFunctions.hideSidebarMenu=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var mainMenu;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return menuController.get(\"sideBarMenu\");case 2:mainMenu=_context13.sent;return _context13.abrupt(\"return\",mainMenu.close());case 4:case\"end\":return _context13.stop();}}},_callee13);}));window.customFunctions.openRegisterModal=function(){return _this2.showRegister();};window.customFunctions.doLogout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return Plugins.Storage.set({key:\"isLoggedIn\",value:\"false\"});case 2:_context14.next=4;return Plugins.Storage.set({key:\"userAPIKey\",value:\"\"});case 4:_context14.next=6;return Plugins.Storage.set({key:\"userEmail\",value:\"\"});case 6:_context14.next=8;return Plugins.Storage.set({key:\"userMasterKeys\",value:JSON.stringify([])});case 8:_context14.next=10;return Plugins.Storage.set({key:\"userPublicKey\",value:\"\"});case 10:_context14.next=12;return Plugins.Storage.set({key:\"userPrivateKey\",value:\"\"});case 12:_this2.setState({isLoggedIn:false});return _context14.abrupt(\"return\",_this2.showLogin());case 14:case\"end\":return _context14.stop();}}},_callee14);}));window.customFunctions.doLogin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){var email,password,twoFactorKey,alert,loading,res,_alert,_alert2,_alert4,_alert5,_alert3;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:email=document.getElementById(\"login-email\").value;password=document.getElementById(\"login-password\").value;twoFactorKey=document.getElementById(\"login-2fa\").value;if(!(!email||!password)){_context15.next=8;break;}_context15.next=6;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginInvalidInputs\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 6:alert=_context15.sent;return _context15.abrupt(\"return\",alert.present());case 8:if(twoFactorKey.length==0){twoFactorKey=\"XXXXXX\";}_context15.next=11;return loadingController.create({message:\"\"});case 11:loading=_context15.sent;loading.present();_context15.prev=13;_context15.next=16;return utils.apiRequest(\"POST\",\"/v1/login\",{email:email,password:password,twoFactorKey:twoFactorKey});case 16:res=_context15.sent;_context15.next=29;break;case 19:_context15.prev=19;_context15.t0=_context15[\"catch\"](13);document.getElementById(\"login-password\").value=\"\";document.getElementById(\"login-2fa\").value=\"\";console.log(_context15.t0);window.customFunctions.dismissLoader();_context15.next=27;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"apiRequestError\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 27:_alert=_context15.sent;return _context15.abrupt(\"return\",_alert.present());case 29:if(res.status){_context15.next=58;break;}if(!(res.message==\"Please enter your Two Factor Authentication code.\")){_context15.next=39;break;}window.customFunctions.dismissLoader();document.getElementById(\"login-2fa-container\").style.display=\"block\";_context15.next=35;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginWith2FACode\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 35:_alert2=_context15.sent;return _context15.abrupt(\"return\",_alert2.present());case 39:document.getElementById(\"login-password\").value=\"\";document.getElementById(\"login-2fa\").value=\"\";window.customFunctions.dismissLoader();if(!(res.message==\"Account not yet activated.\")){_context15.next=49;break;}_context15.next=45;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginAccountNotActivated\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 45:_alert4=_context15.sent;return _context15.abrupt(\"return\",_alert4.present());case 49:if(!(res.message==\"Account not found.\")){_context15.next=54;break;}_context15.next=52;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginAccountNotFound\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 52:_alert5=_context15.sent;return _context15.abrupt(\"return\",_alert5.present());case 54:_context15.next=56;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginWrongCredentials\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 56:_alert3=_context15.sent;return _context15.abrupt(\"return\",_alert3.present());case 58:_context15.next=60;return Plugins.Storage.set({key:\"isLoggedIn\",value:\"true\"});case 60:_context15.next=62;return Plugins.Storage.set({key:\"userAPIKey\",value:res.data.apiKey});case 62:_context15.next=64;return Plugins.Storage.set({key:\"userEmail\",value:email});case 64:_context15.next=66;return Plugins.Storage.set({key:\"userMasterKeys\",value:JSON.stringify([utils.hashFn(password)])});case 66:return _context15.abrupt(\"return\",document.location.href=\"index.html\");case 67:case\"end\":return _context15.stop();}}},_callee15,null,[[13,19]]);}));window.customFunctions.doRegister=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var email,password,passwordRepeat,_alert6,loading,res,_alert7,message,_alert8,alert;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:email=document.getElementById(\"register-email\").value;password=document.getElementById(\"register-password\").value;passwordRepeat=document.getElementById(\"register-password-repeat\").value;if(!(!email||!password||!passwordRepeat)){_context16.next=8;break;}_context16.next=6;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"registerInvalidInputs\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 6:_alert6=_context16.sent;return _context16.abrupt(\"return\",_alert6.present());case 8:_context16.next=10;return loadingController.create({message:\"\"});case 10:loading=_context16.sent;loading.present();_context16.prev=12;_context16.next=15;return utils.apiRequest(\"POST\",\"/v1/register\",{email:email,password:password,passwordRepeat:passwordRepeat});case 15:res=_context16.sent;_context16.next=28;break;case 18:_context16.prev=18;_context16.t0=_context16[\"catch\"](12);document.getElementById(\"register-password\").value=\"\";document.getElementById(\"register-password-repeat\").value=\"\";console.log(_context16.t0);window.customFunctions.dismissLoader();_context16.next=26;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"apiRequestError\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 26:_alert7=_context16.sent;return _context16.abrupt(\"return\",_alert7.present());case 28:if(res.status){_context16.next=38;break;}document.getElementById(\"register-password\").value=\"\";document.getElementById(\"register-password-repeat\").value=\"\";window.customFunctions.dismissLoader();message=\"\";if(res.message.toLowerCase().indexOf(\"invalid email\")!==-1||res.message.toLowerCase().indexOf(\"invalid password\")!==-1||res.message.toLowerCase().indexOf(\"invalid email\")!==-1){message=language.get(_this2.state.lang,\"registerInvalidFields\");}else if(res.message.toLowerCase().indexOf(\"your password needs to be at least 10 characters long\")!==-1){message=language.get(_this2.state.lang,\"registerPasswordAtLeast10Chars\");}else if(res.message.toLowerCase().indexOf(\"passwords do not match\")!==-1){message=language.get(_this2.state.lang,\"registerPasswordsDoNotMatch\");}else if(res.message.toLowerCase().indexOf(\"invalid email\")!==-1){message=language.get(_this2.state.lang,\"registerInvalidEmail\");}else if(res.message.toLowerCase().indexOf(\"database error\")!==-1){message=language.get(_this2.state.lang,\"apiRequestError\");}else if(res.message.toLowerCase().indexOf(\"this email is already registered\")!==-1){message=language.get(_this2.state.lang,\"registerEmailAlreadyRegistered\");}else if(res.message.toLowerCase().indexOf(\"we could not send an email at this time, please try again later\")!==-1){message=language.get(_this2.state.lang,\"registerCouldNotSendEmail\");}_context16.next=36;return alertController.create({header:\"\",subHeader:\"\",message:message,buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 36:_alert8=_context16.sent;return _context16.abrupt(\"return\",_alert8.present());case 38:document.getElementById(\"register-email\").value=\"\";document.getElementById(\"register-password\").value=\"\";document.getElementById(\"register-password-repeat\").value=\"\";window.customFunctions.dismissLoader();_context16.next=44;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"registerSuccess\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 44:alert=_context16.sent;return _context16.abrupt(\"return\",alert.present());case 46:case\"end\":return _context16.stop();}}},_callee16,null,[[12,18]]);}));window.customFunctions.openSettingsModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(){return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:return _context17.abrupt(\"return\",_this2.openSettingsModal());case 1:case\"end\":return _context17.stop();}}},_callee17);}));window.customFunctions.setLang=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var lang,_args18=arguments;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:lang=_args18.length>0&&_args18[0]!==undefined?_args18[0]:\"en\";_context18.next=3;return Plugins.Storage.set({key:\"lang\",value:lang});case 3:return _context18.abrupt(\"return\",document.location.href=\"index.html\");case 4:case\"end\":return _context18.stop();}}},_callee18);}));window.customFunctions.openLanguageModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(){var appLang,appDarkMode,modalId,languagesHTML,langList,prop,modal;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:appLang=_this2.state.lang;appDarkMode=_this2.state.darkMode;modalId=\"language-modal-\"+utils.generateRandomClassName();languagesHTML=\"\";langList=language.list();for(prop in langList){languagesHTML+=\"\\n                <ion-item lines=\\\"none\\\" onClick=\\\"window.customFunctions.setLang('\"+prop+\"')\\\" button>\\n                    <ion-label>\"+language.name(prop)+\"</ion-label>\\n                    <ion-radio slot=\\\"end\\\" value=\\\"\"+prop+\"\\\"></ion-radio>\\n                </ion-item>\\n            \";}customElements.define(modalId,/*#__PURE__*/function(_HTMLElement){_inherits(ModalContent,_HTMLElement);var _super=_createSuper(ModalContent);function ModalContent(){_classCallCheck(this,ModalContent);return _super.apply(this,arguments);}_createClass(ModalContent,[{key:\"connectedCallback\",value:function connectedCallback(){this.innerHTML=\"\\n                    <ion-header style=\\\"margin-top: \"+(isPlatform(\"ipad\")?safeAreaInsets.top:0)+\"px;\\\">\\n                        <ion-toolbar>\\n                            <ion-buttons slot=\\\"start\\\">\\n                                <ion-button onClick=\\\"window.customFunctions.dismissModal()\\\">\\n                                    <ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\"></ion-icon>\\n                                </ion-button>\\n                            </ion-buttons>\\n                            <ion-title>\\n                                \"+language.get(appLang,\"settingsLanguage\")+\"\\n                            </ion-title>\\n                        </ion-toolbar>\\n                    </ion-header>\\n                    <ion-content style=\\\"--background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\" fullscreen>\\n                        <ion-list>\\n                            <ion-radio-group value=\\\"\"+appLang+\"\\\">\\n                                \"+languagesHTML+\"\\n                            </ion-radio-group>\\n                        </ion-list>\\n                    </ion-content>\\n                \";}}]);return ModalContent;}(/*#__PURE__*/_wrapNativeSuper(HTMLElement)));_context19.next=9;return modalController.create({component:modalId,swipeToClose:true,showBackdrop:false,backdropDismiss:false,cssClass:\"modal-fullscreen\"});case 9:modal=_context19.sent;return _context19.abrupt(\"return\",modal.present());case 11:case\"end\":return _context19.stop();}}},_callee19);}));window.customFunctions.openEncryptionModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var appLang,appDarkMode,modalId,modal;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:appLang=_this2.state.lang;appDarkMode=_this2.state.darkMode;modalId=\"encryption-modal-\"+utils.generateRandomClassName();customElements.define(modalId,/*#__PURE__*/function(_HTMLElement2){_inherits(ModalContent,_HTMLElement2);var _super2=_createSuper(ModalContent);function ModalContent(){_classCallCheck(this,ModalContent);return _super2.apply(this,arguments);}_createClass(ModalContent,[{key:\"connectedCallback\",value:function connectedCallback(){this.innerHTML=\"\\n                    <ion-header style=\\\"margin-top: \"+(isPlatform(\"ipad\")?safeAreaInsets.top:0)+\"px;\\\">\\n                        <ion-toolbar>\\n                            <ion-buttons slot=\\\"start\\\">\\n                                <ion-button onClick=\\\"window.customFunctions.dismissModal()\\\">\\n                                    <ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\"></ion-icon>\\n                                </ion-button>\\n                            </ion-buttons>\\n                            <ion-title>\\n                                \"+language.get(appLang,\"encryption\")+\"\\n                            </ion-title>\\n                        </ion-toolbar>\\n                    </ion-header>\\n                    <ion-content style=\\\"--background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\" fullscreen>\\n                        <ion-list>\\n                            <ion-item-divider style=\\\"--background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\">\\n                                <ion-label>\\n                                    \"+language.get(appLang,\"encryptionModalHeader\")+\"\\n                                </ion-label>\\n                            </ion-item-divider>\\n                            <ion-item lines=\\\"none\\\" style=\\\"padding-top: 10px;\\\">\\n                                \"+language.get(appLang,\"encryptionModalFirstText\")+\"\\n                            </ion-item>\\n                            <ion-item-divider style=\\\"padding-top: 15px; --background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\">\\n                                <ion-label>\\n                                    \"+language.get(appLang,\"encryptionModalHeaderHowItWorks\")+\"\\n                                </ion-label>\\n                            </ion-item-divider>\\n                            <ion-item lines=\\\"none\\\" style=\\\"padding-top: 10px;\\\">\\n                                \"+language.get(appLang,\"encryptionModalHowItWorksText\")+\"\\n                            </ion-item>\\n                        </ion-list>\\n                    </ion-content>\\n                \";}}]);return ModalContent;}(/*#__PURE__*/_wrapNativeSuper(HTMLElement)));_context20.next=6;return modalController.create({component:modalId,swipeToClose:true,showBackdrop:false,backdropDismiss:false,cssClass:\"modal-fullscreen\"});case 6:modal=_context20.sent;return _context20.abrupt(\"return\",modal.present());case 8:case\"end\":return _context20.stop();}}},_callee20);}));window.customFunctions.openWebsiteModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){var actionSheet;return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.next=2;return actionSheetController.create({header:language.get(_this2.state.lang,\"website\"),buttons:[{text:language.get(_this2.state.lang,\"website\"),icon:Ionicons.globe,handler:function handler(){window.open(\"https://filen.io/\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"onlineFM\"),icon:Ionicons.grid,handler:function handler(){window.open(\"https://filen.io/my-account/file-manager/default\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"cancel\"),icon:\"close\",role:\"cancel\"}]});case 2:actionSheet=_context21.sent;return _context21.abrupt(\"return\",actionSheet.present());case 4:case\"end\":return _context21.stop();}}},_callee21);}));window.customFunctions.openHelpModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(){var btns,actionSheet;return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:btns=[{text:language.get(_this2.state.lang,\"support\"),icon:Ionicons.helpBuoyOutline,handler:function handler(){window.open(\"https://support.filen.io/\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"faq\"),icon:Ionicons.informationCircle,handler:function handler(){window.open(\"https://filen.io/faq\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"tos\"),icon:Ionicons.informationCircleOutline,handler:function handler(){window.open(\"https://filen.io/terms\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"privacyPolicy\"),icon:Ionicons.informationCircleOutline,handler:function handler(){window.open(\"https://filen.io/privacy\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"cancel\"),icon:\"close\",role:\"cancel\"}];if(isPlatform(\"ios\")){btns=[{text:language.get(_this2.state.lang,\"support\"),icon:Ionicons.helpBuoyOutline,handler:function handler(){window.open(\"https://support.filen.io/\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"cancel\"),icon:\"close\",role:\"cancel\"}];}_context22.next=4;return actionSheetController.create({header:language.get(_this2.state.lang,\"help\"),buttons:btns});case 4:actionSheet=_context22.sent;return _context22.abrupt(\"return\",actionSheet.present());case 6:case\"end\":return _context22.stop();}}},_callee22);}));window.customFunctions.queueFileUpload=this.queueFileUpload;window.customFunctions.queueFileDownload=this.queueFileDownload;window.customFunctions.openItemActionSheetFromJSON=function(itemJSON){var item=JSON.parse(window.atob(itemJSON));return _this2.spawnItemActionSheet(item);};window.customFunctions.moveSelectedItems=function(){return _this2.moveSelectedItems();};window.customFunctions.trashSelectedItems=function(){return _this2.trashSelectedItems();};window.customFunctions.restoreSelectedItems=function(){return _this2.restoreSelectedItems();};window.customFunctions.removeSelectedItemsFromSharedIn=function(){return _this2.removeSelectedItemsFromSharedIn();};window.customFunctions.stopSharingSelectedItems=function(){return _this2.stopSharingSelectedItems();};window.customFunctions.downloadSelectedItems=function(){return _this2.downloadSelectedItems();};window.customFunctions.storeSelectedItemsOffline=function(){return _this2.storeSelectedItemsOffline();};window.customFunctions.shareSelectedItems=function(){return _this2.shareSelectedItems();};window.customFunctions.settingsToggleDarkMode=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(){return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:if(!_this2.state.darkMode){_context23.next=7;break;}_context23.next=3;return Plugins.Storage.set({key:\"darkMode\",value:\"false\"});case 3:document.getElementById(\"settings-dark-mode-toggle\").checked=false;return _context23.abrupt(\"return\",_this2.setState({darkMode:false},function(){document.location.href=\"index.html\";}));case 7:_context23.next=9;return Plugins.Storage.set({key:\"darkMode\",value:\"true\"});case 9:document.getElementById(\"settings-dark-mode-toggle\").checked=true;return _context23.abrupt(\"return\",_this2.setState({darkMode:true},function(){document.location.href=\"index.html\";}));case 11:case\"end\":return _context23.stop();}}},_callee23);}));window.customFunctions.loginToggleDarkMode=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(){return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:if(!_this2.state.darkMode){_context24.next=6;break;}_context24.next=3;return Plugins.Storage.set({key:\"darkMode\",value:\"false\"});case 3:return _context24.abrupt(\"return\",_this2.setState({darkMode:false},function(){document.location.href=\"index.html\";}));case 6:_context24.next=8;return Plugins.Storage.set({key:\"darkMode\",value:\"true\"});case 8:return _context24.abrupt(\"return\",_this2.setState({darkMode:true},function(){document.location.href=\"index.html\";}));case 9:case\"end\":return _context24.stop();}}},_callee24);}));window.customFunctions.saveSettings=/*#__PURE__*/function(){var _ref25=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(newSettings){return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:_context25.next=2;return Plugins.Storage.set({key:\"settings\",value:JSON.stringify(newSettings)});case 2:return _context25.abrupt(\"return\",_this2.setState({settings:newSettings}));case 3:case\"end\":return _context25.stop();}}},_callee25);}));return function(_x){return _ref25.apply(this,arguments);};}();window.customFunctions.toggleOnlyWifi=function(){var newSettings=_this2.state.settings;var newVal=!newSettings.onlyWifi;newSettings.onlyWifi=newVal;document.getElementById(\"settings-only-wifi-toggle\").checked=!newVal;return window.customFunctions.saveSettings(newSettings);};window.customFunctions.logoutUser=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee26(){return _regeneratorRuntime.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_context26.next=2;return Plugins.Storage.remove({key:\"isLoggedIn\"});case 2:_context26.next=4;return Plugins.Storage.remove({key:\"userAPIKey\"});case 4:_context26.next=6;return Plugins.Storage.remove({key:\"userEmail\"});case 6:_context26.next=8;return Plugins.Storage.remove({key:\"userMasterKeys\"});case 8:_context26.next=10;return Plugins.Storage.remove({key:\"userPublicKey\"});case 10:_context26.next=12;return Plugins.Storage.remove({key:\"userPrivateKey\"});case 12:_context26.next=14;return Plugins.Storage.remove({key:\"offlineSavedFiles\"});case 14:_context26.next=16;return Plugins.Storage.remove({key:\"apiCache\"});case 16:return _context26.abrupt(\"return\",document.location.href=\"index.html\");case 17:case\"end\":return _context26.stop();}}},_callee26);}));window.customFunctions.doLogout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee27(){var alert;return _regeneratorRuntime.wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:_context27.next=2;return alertController.create({header:language.get(_this2.state.lang,\"logoutAlertHeader\"),message:language.get(_this2.state.lang,\"logoutConfirmation\"),buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function handler(){return window.customFunctions.logoutUser();}}]});case 2:alert=_context27.sent;return _context27.abrupt(\"return\",alert.present());case 4:case\"end\":return _context27.stop();}}},_callee27);}));window.customFunctions.emptyTrash=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee29(){var alert;return _regeneratorRuntime.wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:_context29.next=2;return alertController.create({header:language.get(_this2.state.lang,\"emptyTrashHeader\"),message:language.get(_this2.state.lang,\"emptyTrashWarning\"),buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function(){var _handler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee28(){var loading,res;return _regeneratorRuntime.wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:_context28.next=2;return loadingController.create({message:\"\"});case 2:loading=_context28.sent;loading.present();_context28.prev=4;_context28.next=7;return utils.apiRequest(\"POST\",\"/v1/trash/empty\",{apiKey:_this2.state.userAPIKey});case 7:res=_context28.sent;_context28.next=15;break;case 10:_context28.prev=10;_context28.t0=_context28[\"catch\"](4);console.log(_context28.t0);loading.dismiss();return _context28.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\")));case 15:if(res.status){_context28.next=19;break;}console.log(res.message);loading.dismiss();return _context28.abrupt(\"return\",_this2.spawnToast(res.message));case 19:loading.dismiss();_this2.updateItemList();return _context28.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"trashEmptied\")));case 22:case\"end\":return _context28.stop();}}},_callee28,null,[[4,10]]);}));function handler(){return _handler.apply(this,arguments);}return handler;}()}]});case 2:alert=_context29.sent;return _context29.abrupt(\"return\",alert.present());case 4:case\"end\":return _context29.stop();}}},_callee29);}));window.customFunctions.changeItemColor=/*#__PURE__*/function(){var _ref29=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee30(itemJSON,color){var item,loading,res;return _regeneratorRuntime.wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:item=JSON.parse(window.atob(itemJSON));_context30.next=3;return loadingController.create({message:\"\"});case 3:loading=_context30.sent;loading.present();_context30.prev=5;_context30.next=8;return utils.apiRequest(\"POST\",\"/v1/dir/color/change\",{apiKey:_this2.state.userAPIKey,uuid:item.uuid,color:color});case 8:res=_context30.sent;_context30.next=16;break;case 11:_context30.prev=11;_context30.t0=_context30[\"catch\"](5);console.log(_context30.t0);loading.dismiss();return _context30.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\")));case 16:if(res.status){_context30.next=20;break;}console.log(res.message);loading.dismiss();return _context30.abrupt(\"return\",_this2.spawnToast(res.message));case 20:loading.dismiss();_context30.prev=21;_context30.next=24;return _this2.updateItemList();case 24:_context30.next=29;break;case 26:_context30.prev=26;_context30.t1=_context30[\"catch\"](21);console.log(_context30.t1);case 29:return _context30.abrupt(\"return\",window.customFunctions.dismissModal());case 30:case\"end\":return _context30.stop();}}},_callee30,null,[[5,11],[21,26]]);}));return function(_x2,_x3){return _ref29.apply(this,arguments);};}();window.customFunctions.editItemPublicLink=/*#__PURE__*/function(){var _ref30=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee36(itemJSON,type){var isEdit,currentLinkUUID,item,linkUUID,loading,expires,password,downloadBtn,res,removeFolderLink,editFolderLink,createFolderLink,_args36=arguments;return _regeneratorRuntime.wrap(function _callee36$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:isEdit=_args36.length>2&&_args36[2]!==undefined?_args36[2]:false;currentLinkUUID=_args36.length>3&&_args36[3]!==undefined?_args36[3]:\"\";item=JSON.parse(window.atob(itemJSON));linkUUID=utils.uuidv4();if(isEdit&&typeof currentLinkUUID==\"string\"){if(currentLinkUUID.length>1){linkUUID=currentLinkUUID;}}_context36.next=7;return loadingController.create({message:\"\"});case 7:loading=_context36.sent;loading.present();expires=\"never\";if(typeof document.getElementById(\"public-link-expires-select\").value==\"string\"){expires=document.getElementById(\"public-link-expires-select\").value;}password=\"empty\";if(typeof document.getElementById(\"public-link-password-input\").value==\"string\"){if(document.getElementById(\"public-link-password-input\").value){password=document.getElementById(\"public-link-password-input\").value;}}downloadBtn=\"enable\";if(document.getElementById(\"public-link-enable-download-btn-toggle\")!==null){if(!document.getElementById(\"public-link-enable-download-btn-toggle\").checked){downloadBtn=\"disable\";}}if(!(item.type==\"file\")){_context36.next=52;break;}_context36.prev=16;_context36.next=19;return utils.apiRequest(\"POST\",\"/v1/link/edit\",{apiKey:_this2.state.userAPIKey,uuid:linkUUID,fileUUID:item.uuid,expiration:expires,password:password,passwordHashed:utils.hashFn(password),downloadBtn:downloadBtn,type:type});case 19:res=_context36.sent;_context36.next=27;break;case 22:_context36.prev=22;_context36.t0=_context36[\"catch\"](16);console.log(_context36.t0);loading.dismiss();return _context36.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\")));case 27:if(res.status){_context36.next=31;break;}console.log(res.message);loading.dismiss();return _context36.abrupt(\"return\",_this2.spawnToast(res.message));case 31:loading.dismiss();document.getElementById(\"public-link-enabled-toggle\").checked=true;document.getElementById(\"public-link-input\").value=\"https://filen.io/d/\"+linkUUID+\"#!\"+item.key;if(!(type==\"enable\")){_context36.next=39;break;}document.getElementById(\"enable-public-link-content\").style.display=\"none\";document.getElementById(\"public-link-enabled-content\").style.display=\"block\";_context36.next=49;break;case 39:document.getElementById(\"enable-public-link-content\").style.display=\"block\";document.getElementById(\"public-link-enabled-content\").style.display=\"none\";_context36.prev=41;_context36.next=44;return _this2.updateItemList();case 44:_context36.next=49;break;case 46:_context36.prev=46;_context36.t1=_context36[\"catch\"](41);console.log(_context36.t1);case 49:return _context36.abrupt(\"return\",true);case 52:removeFolderLink=/*#__PURE__*/function(){var _ref31=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee31(callback){var removeLoading,res;return _regeneratorRuntime.wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_context31.next=2;return loadingController.create({message:\"\"});case 2:removeLoading=_context31.sent;removeLoading.present();_context31.prev=4;_context31.next=7;return utils.apiRequest(\"POST\",\"/v1/dir/link/remove\",{apiKey:_this2.state.userAPIKey,uuid:item.uuid});case 7:res=_context31.sent;_context31.next=15;break;case 10:_context31.prev=10;_context31.t0=_context31[\"catch\"](4);console.log(_context31.t0);removeLoading.dismiss();return _context31.abrupt(\"return\",callback(language.get(_this2.state.lang,\"apiRequestError\")));case 15:if(res.status){_context31.next=19;break;}console.log(res.message);removeLoading.dismiss();return _context31.abrupt(\"return\",callback(res.message));case 19:removeLoading.dismiss();return _context31.abrupt(\"return\",callback(null));case 21:case\"end\":return _context31.stop();}}},_callee31,null,[[4,10]]);}));return function removeFolderLink(_x6){return _ref31.apply(this,arguments);};}();editFolderLink=/*#__PURE__*/function(){var _ref32=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee32(callback){var editLoading,res;return _regeneratorRuntime.wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_context32.next=2;return loadingController.create({message:\"\"});case 2:editLoading=_context32.sent;editLoading.present();_context32.prev=4;_context32.next=7;return utils.apiRequest(\"POST\",\"/v1/dir/link/edit\",{apiKey:_this2.state.userAPIKey,uuid:item.uuid,expiration:expires,password:password,passwordHashed:utils.hashFn(password),downloadBtn:downloadBtn});case 7:res=_context32.sent;_context32.next=15;break;case 10:_context32.prev=10;_context32.t0=_context32[\"catch\"](4);console.log(_context32.t0);editLoading.dismiss();return _context32.abrupt(\"return\",callback(language.get(_this2.state.lang,\"apiRequestError\")));case 15:if(res.status){_context32.next=19;break;}console.log(res.message);editLoading.dismiss();return _context32.abrupt(\"return\",callback(res.message));case 19:editLoading.dismiss();return _context32.abrupt(\"return\",callback(null));case 21:case\"end\":return _context32.stop();}}},_callee32,null,[[4,10]]);}));return function editFolderLink(_x7){return _ref32.apply(this,arguments);};}();createFolderLink=/*#__PURE__*/function(){var _ref33=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee35(callback){var createLoading,res,key,keyEnc,newLinkUUID,totalItems,doneItems,erroredItems,itemAdded,addItemRequest,addItem,i,folder,_i,file,fileMetadata;return _regeneratorRuntime.wrap(function _callee35$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:_context35.next=2;return loadingController.create({message:\"\",backdropDismiss:false});case 2:createLoading=_context35.sent;createLoading.present();_context35.prev=4;_context35.next=7;return utils.apiRequest(\"POST\",\"/v1/download/dir\",{apiKey:_this2.state.userAPIKey,uuid:item.uuid});case 7:res=_context35.sent;_context35.next=15;break;case 10:_context35.prev=10;_context35.t0=_context35[\"catch\"](4);console.log(_context35.t0);createLoading.dismiss();return _context35.abrupt(\"return\",callback(language.get(_this2.state.lang,\"apiRequestError\")));case 15:if(res.status){_context35.next=19;break;}console.log(res.message);createLoading.dismiss();return _context35.abrupt(\"return\",callback(res.message));case 19:key=utils.generateRandomString(32);keyEnc=utils.cryptoJSEncrypt(key,_this2.state.userMasterKeys[_this2.state.userMasterKeys.length-1]);newLinkUUID=utils.uuidv4();totalItems=res.data.folders.length+res.data.files.length;doneItems=0;erroredItems=0;itemAdded=function itemAdded(){doneItems+=1;createLoading.message=language.get(_this2.state.lang,\"folderLinkAddedItemsCount\",true,[\"__ADDED__\",\"__TOTAL__\"],[doneItems,totalItems]);if(doneItems>=totalItems){createLoading.dismiss();if(erroredItems>0){console.log(\"Errored items: \"+erroredItems);}linkUUID=newLinkUUID;return callback(null,{linkUUID:linkUUID,linkKey:key});}};addItemRequest=/*#__PURE__*/function(){var _ref34=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee33(data,tries,maxTries,cb){var res;return _regeneratorRuntime.wrap(function _callee33$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:if(!(tries>=maxTries)){_context33.next=2;break;}return _context33.abrupt(\"return\",cb(language.get(_this2.state.lang,\"apiRequestError\")));case 2:_context33.prev=2;_context33.next=5;return utils.apiRequest(\"POST\",\"/v1/dir/link/add\",data);case 5:res=_context33.sent;_context33.next=12;break;case 8:_context33.prev=8;_context33.t0=_context33[\"catch\"](2);console.log(_context33.t0);return _context33.abrupt(\"return\",setTimeout(function(){addItemRequest(data,tries+1,maxTries,cb);},1000));case 12:return _context33.abrupt(\"return\",cb(null));case 13:case\"end\":return _context33.stop();}}},_callee33,null,[[2,8]]);}));return function addItemRequest(_x9,_x10,_x11,_x12){return _ref34.apply(this,arguments);};}();addItem=/*#__PURE__*/function(){var _ref35=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee34(itemType,itemToAdd){var itemMetadata;return _regeneratorRuntime.wrap(function _callee34$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_context34.next=2;return window.customVariables.shareItemSemaphore.acquire();case 2:itemMetadata=\"\";if(itemType==\"file\"){itemMetadata=utils.cryptoJSEncrypt(JSON.stringify({name:itemToAdd.name,mime:itemToAdd.mime,key:itemToAdd.key,size:parseInt(itemToAdd.size)}),key);}else{itemMetadata=utils.cryptoJSEncrypt(JSON.stringify({name:itemToAdd.name}),key);}addItemRequest({apiKey:window.customVariables.apiKey,uuid:itemToAdd.uuid,parent:itemToAdd.parent,linkUUID:newLinkUUID,type:itemType,metadata:itemMetadata,key:keyEnc,expiration:\"never\",password:\"empty\",passwordHashed:utils.hashFn(\"empty\"),downloadBtn:\"enable\"},0,32,function(err){window.customVariables.shareItemSemaphore.release();if(err){console.log(err);erroredItems+=1;}itemAdded();});case 5:case\"end\":return _context34.stop();}}},_callee34);}));return function addItem(_x13,_x14){return _ref35.apply(this,arguments);};}();i=0;case 29:if(!(i<res.data.folders.length)){_context35.next=38;break;}folder=res.data.folders[i];_context35.next=33;return window.customVariables.decryptShareItemSemaphore.acquire();case 33:addItem(\"folder\",{uuid:folder.uuid,parent:folder.parent,name:utils.decryptCryptoJSFolderName(folder.name,_this2.state.userMasterKeys,folder.uuid)});window.customVariables.decryptShareItemSemaphore.release();case 35:i++;_context35.next=29;break;case 38:_i=0;case 39:if(!(_i<res.data.files.length)){_context35.next=49;break;}file=res.data.files[_i];_context35.next=43;return window.customVariables.decryptShareItemSemaphore.acquire();case 43:fileMetadata=utils.decryptFileMetadata(file.metadata,_this2.state.userMasterKeys,file.uuid);addItem(\"file\",{uuid:file.uuid,parent:file.parent,name:fileMetadata.name,mime:fileMetadata.mime,key:fileMetadata.key,size:fileMetadata.size});window.customVariables.decryptShareItemSemaphore.release();case 46:_i++;_context35.next=39;break;case 49:case\"end\":return _context35.stop();}}},_callee35,null,[[4,10]]);}));return function createFolderLink(_x8){return _ref33.apply(this,arguments);};}();loading.dismiss();if(type==\"enable\"){if(isEdit){editFolderLink(function(err){if(err){return _this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\"));}});}else{createFolderLink(function(err,linkData){if(err){return _this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\"));}document.getElementById(\"public-link-enabled-toggle\").checked=true;document.getElementById(\"public-link-input\").value=\"https://filen.io/f/\"+linkData.linkUUID+\"#!\"+linkData.linkKey;document.getElementById(\"enable-public-link-content\").style.display=\"none\";document.getElementById(\"public-link-enabled-content\").style.display=\"block\";});}}else{removeFolderLink(function(err){if(err){return _this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\"));}document.getElementById(\"enable-public-link-content\").style.display=\"block\";document.getElementById(\"public-link-enabled-content\").style.display=\"none\";_this2.updateItemList();});}return _context36.abrupt(\"return\",true);case 58:case\"end\":return _context36.stop();}}},_callee36,null,[[16,22],[41,46]]);}));return function(_x4,_x5){return _ref30.apply(this,arguments);};}();window.customFunctions.copyPublicLinkToClipboard=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee37(){var link;return _regeneratorRuntime.wrap(function _callee37$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:if(Capacitor.isNative){_context37.next=10;break;}_context37.prev=1;utils.copyTextToClipboardWeb(document.getElementById(\"public-link-input\").value);_context37.next=9;break;case 5:_context37.prev=5;_context37.t0=_context37[\"catch\"](1);console.log(_context37.t0);return _context37.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"couldNotCopyToClipboard\")));case 9:return _context37.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"copiedToClipboard\")));case 10:_context37.prev=10;link=document.getElementById(\"public-link-input\").value;_context37.next=14;return Plugins.Clipboard.write({url:link});case 14:_context37.next=20;break;case 16:_context37.prev=16;_context37.t1=_context37[\"catch\"](10);console.log(_context37.t1);return _context37.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"couldNotCopyToClipboard\")));case 20:return _context37.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"copiedToClipboard\")));case 21:case\"end\":return _context37.stop();}}},_callee37,null,[[1,5],[10,16]]);}));window.customFunctions.clearThumbnailCache=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee39(){var alert;return _regeneratorRuntime.wrap(function _callee39$(_context39){while(1){switch(_context39.prev=_context39.next){case 0:_context39.next=2;return alertController.create({header:language.get(_this2.state.lang,\"settingsClearThumbnailCacheHeader\"),message:language.get(_this2.state.lang,\"settingsClearThumbnailCacheInfo\"),buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function(){var _handler2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee38(){var dirObj;return _regeneratorRuntime.wrap(function _callee38$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:if(Capacitor.isNative){_context38.next=2;break;}return _context38.abrupt(\"return\",alert.dismiss());case 2:dirObj={path:\"ThumbnailCache/\",directory:FilesystemDirectory.External};alert.dismiss();_context38.prev=4;_context38.next=7;return Plugins.Filesystem.rmdir({path:dirObj.path,directory:dirObj.directory,recursive:true});case 7:window.customVariables.thumbnailCache={};window.customVariables.thumbnailBlobCache={};window.customVariables.lastThumbnailCacheLength=undefined;window.customFunctions.saveThumbnailCache();_context38.next=16;break;case 13:_context38.prev=13;_context38.t0=_context38[\"catch\"](4);console.log(_context38.t0);case 16:return _context38.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"settingsClearThumbnailCacheDone\")));case 17:case\"end\":return _context38.stop();}}},_callee38,null,[[4,13]]);}));function handler(){return _handler2.apply(this,arguments);}return handler;}()}]});case 2:alert=_context39.sent;return _context39.abrupt(\"return\",alert.present());case 4:case\"end\":return _context39.stop();}}},_callee39);}));window.customFunctions.openOrderBy=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee41(){var alert;return _regeneratorRuntime.wrap(function _callee41$(_context41){while(1){switch(_context41.prev=_context41.next){case 0:_context41.next=2;return alertController.create({header:language.get(_this2.state.lang,\"orderBy\"),inputs:[{type:\"radio\",label:language.get(_this2.state.lang,\"orderByName\"),value:\"name\",checked:window.customVariables.orderBy.indexOf(\"name\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderBySize\"),value:\"size\",checked:window.customVariables.orderBy.indexOf(\"size\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderByDate\"),value:\"date\",checked:window.customVariables.orderBy.indexOf(\"date\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderByType\"),value:\"type\",checked:window.customVariables.orderBy.indexOf(\"type\")!==-1?true:false}],buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"orderByReset\"),handler:function handler(){var sortedItems=utils.orderItemsByType(_this2.state.itemList,\"dateDesc\");window.customVariables.orderBy=\"nameAsc\";window.customVariables.itemList=sortedItems;return _this2.setState({itemList:sortedItems},function(){_this2.forceUpdate();});}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function(){var _handler3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee40(type){var alert;return _regeneratorRuntime.wrap(function _callee40$(_context40){while(1){switch(_context40.prev=_context40.next){case 0:_context40.next=2;return alertController.create({header:language.get(_this2.state.lang,\"orderByDirection\"),inputs:[{type:\"radio\",label:language.get(_this2.state.lang,\"orderByDirectionAsc\"),value:\"Asc\",checked:window.customVariables.orderBy.indexOf(\"Asc\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderByDirectionDesc\"),value:\"Desc\",checked:window.customVariables.orderBy.indexOf(\"Desc\")!==-1?true:false}],buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function handler(direction){var typeAndDirection=type+direction;console.log(typeAndDirection);var sortedItems=utils.orderItemsByType(_this2.state.itemList,typeAndDirection);window.customVariables.orderBy=typeAndDirection;window.customVariables.itemList=sortedItems;return _this2.setState({itemList:sortedItems},function(){_this2.forceUpdate();});}}]});case 2:alert=_context40.sent;return _context40.abrupt(\"return\",alert.present());case 4:case\"end\":return _context40.stop();}}},_callee40);}));function handler(_x15){return _handler3.apply(this,arguments);}return handler;}()}]});case 2:alert=_context41.sent;window.customFunctions.dismissPopover();return _context41.abrupt(\"return\",alert.present());case 5:case\"end\":return _context41.stop();}}},_callee41);}));}","map":{"version":3,"sources":["/Users/jan/Documents/filen/app/src/components/window.js"],"names":["Capacitor","Plugins","FilesystemDirectory","modalController","popoverController","menuController","alertController","loadingController","actionSheetController","language","Ionicons","isPlatform","getPlatforms","utils","require","safeAreaInsets","windowRouter","window","onhashchange","currentHref","location","href","setState","routeEx","hash","split","state","isLoggedIn","updateItemList","foldersInRoute","slice","length","lastFolderInRoute","customVariables","cachedFolders","mainToolbarTitle","name","showMainToolbarBackButton","get","lang","setupWindowFunctions","$","undefined","jQueryScript","document","createElement","type","src","getElementsByTagName","appendChild","pdfJsScript","customFunctions","itemList","cachedFiles","cachedMetadata","keyUpdateInterval","usageUpdateInterval","apiKey","uploadSemaphore","Semaphore","uploadChunkSemaphore","downloadSemaphore","downloadChunkSemaphore","shareItemSemaphore","decryptShareItemSemaphore","uploads","downloads","reloadContentAfterUploadTimeout","offlineSavedFiles","urlCreator","URL","webkitURL","currentPreviewURL","reloadAfterActionTimeout","nextNativeToastAllowed","Math","floor","Date","apiCache","selectLangInterval","stoppedUploads","stoppedDownloads","stoppedUploadsDone","stoppedDownloadsDone","lastCachedItemsLength","lastAPICacheLength","thumbnailCache","thumbnailBlobCache","currentThumbnailURL","lastThumbnailCacheLength","thumbnailSemaphore","updateItemsSemaphore","getNetworkInfoInterval","networkStatus","orderBy","getThumbnailErrors","lastGetThumbnailErrorsLength","scrollToIndex","mainSearchbarTimeout","mainSearchbarInterval","lastMainSearchbarTerm","userMasterKeys","isGettingPreviewData","stopGettingPreviewData","cachedAPIItemListRequests","deviceHeightAndWidthInterval","clearInterval","setInterval","getElementById","term","value","trim","clearTimeout","setTimeout","setMainSearchTerm","updateHeightAndWidthState","windowHeight","innerHeight","windowWidth","innerWidth","addEventListener","onclick","e","togglePreviewHeader","target","innerHTML","indexOf","getElementsByClassName","header","style","display","getNetworkInfo","Network","getStatus","console","log","saveOfflineSavedFiles","Storage","set","key","JSON","stringify","saveGetThumbnailErrors","saveAPICache","saveThumbnailCache","saveCachedItems","dismissActionSheet","all","dismiss","getTop","actionSheet","dismissPopover","popover","dismissModal","modal","dismissLoader","loader","dismissAlert","alert","selectAllItems","items","i","item","selected","push","selectedItems","unselectAllItems","refreshItemList","hideSidebarMenu","mainMenu","close","openRegisterModal","showRegister","doLogout","showLogin","doLogin","email","password","twoFactorKey","create","subHeader","message","buttons","toUpperCase","present","loading","apiRequest","res","status","data","hashFn","doRegister","passwordRepeat","toLowerCase","openSettingsModal","setLang","openLanguageModal","appLang","appDarkMode","darkMode","modalId","generateRandomClassName","languagesHTML","langList","list","prop","customElements","define","top","arrowBack","HTMLElement","component","swipeToClose","showBackdrop","backdropDismiss","cssClass","openEncryptionModal","openWebsiteModal","text","icon","globe","handler","open","grid","role","openHelpModal","btns","helpBuoyOutline","informationCircle","informationCircleOutline","queueFileUpload","queueFileDownload","openItemActionSheetFromJSON","itemJSON","parse","atob","spawnItemActionSheet","moveSelectedItems","trashSelectedItems","restoreSelectedItems","removeSelectedItemsFromSharedIn","stopSharingSelectedItems","downloadSelectedItems","storeSelectedItemsOffline","shareSelectedItems","settingsToggleDarkMode","checked","loginToggleDarkMode","saveSettings","newSettings","settings","toggleOnlyWifi","newVal","onlyWifi","logoutUser","remove","emptyTrash","userAPIKey","spawnToast","changeItemColor","color","uuid","editItemPublicLink","isEdit","currentLinkUUID","linkUUID","uuidv4","expires","downloadBtn","fileUUID","expiration","passwordHashed","removeFolderLink","callback","removeLoading","editFolderLink","editLoading","createFolderLink","createLoading","generateRandomString","keyEnc","cryptoJSEncrypt","newLinkUUID","totalItems","folders","files","doneItems","erroredItems","itemAdded","linkKey","addItemRequest","tries","maxTries","cb","addItem","itemType","itemToAdd","acquire","itemMetadata","mime","size","parseInt","parent","metadata","err","release","folder","decryptCryptoJSFolderName","file","fileMetadata","decryptFileMetadata","linkData","copyPublicLinkToClipboard","isNative","copyTextToClipboardWeb","link","Clipboard","write","url","clearThumbnailCache","dirObj","path","directory","External","Filesystem","rmdir","recursive","openOrderBy","inputs","label","sortedItems","orderItemsByType","forceUpdate","direction","typeAndDirection"],"mappings":"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","sourcesContent":["import { Capacitor, Plugins, FilesystemDirectory } from \"@capacitor/core\"\r\nimport { modalController, popoverController, menuController, alertController, loadingController, actionSheetController } from \"@ionic/core\"\r\nimport * as language from \"../utils/language\"\r\nimport * as Ionicons from 'ionicons/icons'\r\nimport { isPlatform, getPlatforms } from \"@ionic/react\"\r\n\r\nconst utils = require(\"../utils/utils\")\r\nconst safeAreaInsets = require('safe-area-insets')\r\n\r\nexport function windowRouter(){\r\n    window.onhashchange = async () => {\r\n        if(window.currentHref !== window.location.href){\r\n            window.currentHref = window.location.href\r\n\r\n            this.setState({\r\n                currentHref: window.currentHref\r\n            })\r\n\r\n            let routeEx = window.location.hash.split(\"/\")\r\n\r\n            if(this.state.isLoggedIn){\r\n                if(routeEx[1] == \"base\" || routeEx[1] == \"shared-in\" || routeEx[1] == \"shared-out\" || routeEx[1] == \"trash\" || routeEx[1] == \"links\"){\r\n                    await this.updateItemList()\r\n    \r\n                    let foldersInRoute = routeEx.slice(2)\r\n    \r\n                    if(foldersInRoute.length > 0){\r\n                        let lastFolderInRoute = foldersInRoute[foldersInRoute.length - 1]\r\n    \r\n                        if(window.customVariables.cachedFolders[lastFolderInRoute]){\r\n                            this.setState({\r\n                                mainToolbarTitle: window.customVariables.cachedFolders[lastFolderInRoute].name,\r\n                                showMainToolbarBackButton: true\r\n                            })\r\n                        }\r\n                        else{\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"myCloud\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                    }\r\n                    else{\r\n                        if(routeEx[1] == \"shared-in\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"sharedInTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else if(routeEx[1] == \"shared-out\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"sharedOutTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else if(routeEx[1] == \"trash\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"trashTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else if(routeEx[1] == \"links\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"linksTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else{\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"myCloud\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function setupWindowFunctions(){\r\n    window.$ = undefined\r\n\r\n    let jQueryScript = document.createElement(\"script\")\r\n\r\n    jQueryScript.type = \"text/javascript\"\r\n    jQueryScript.src = \"assets/jquery.js\"\r\n\r\n    document.getElementsByTagName(\"head\")[0].appendChild(jQueryScript)\r\n\r\n    let pdfJsScript = document.createElement(\"script\")\r\n\r\n    pdfJsScript.type = \"text/javascript\"\r\n    pdfJsScript.src = \"assets/pdf/build/pdf.js\"\r\n\r\n    document.getElementsByTagName(\"head\")[0].appendChild(pdfJsScript)\r\n\r\n    window.customFunctions = {}\r\n    window.customVariables = {}\r\n\r\n    window.customVariables.itemList = []\r\n    window.customVariables.lang = this.state.lang\r\n    window.customVariables.cachedFolders = {}\r\n    window.customVariables.cachedFiles = {}\r\n    window.customVariables.cachedMetadata = {}\r\n    window.customVariables.keyUpdateInterval = undefined\r\n    window.customVariables.usageUpdateInterval = undefined\r\n    window.customVariables.apiKey = \"\"\r\n    window.customVariables.uploadSemaphore = new utils.Semaphore(3)\r\n    window.customVariables.uploadChunkSemaphore = new utils.Semaphore(5)\r\n    window.customVariables.downloadSemaphore = new utils.Semaphore(5)\r\n    window.customVariables.downloadChunkSemaphore = new utils.Semaphore(30)\r\n    window.customVariables.shareItemSemaphore = new utils.Semaphore(4)\r\n    window.customVariables.decryptShareItemSemaphore = new utils.Semaphore(128)\r\n    window.customVariables.uploads = {}\r\n    window.customVariables.downloads = {}\r\n    window.customVariables.reloadContentAfterUploadTimeout = undefined\r\n    window.customVariables.offlineSavedFiles = {}\r\n    window.customVariables.urlCreator = window.URL || window.webkitURL\r\n    window.customVariables.currentPreviewURL = undefined\r\n    window.customVariables.reloadAfterActionTimeout = undefined\r\n    window.customVariables.nextNativeToastAllowed = Math.floor((+new Date()) / 1000)\r\n    window.customVariables.apiCache = {}\r\n    window.customVariables.selectLangInterval = undefined\r\n    window.customVariables.stoppedUploads = {}\r\n    window.customVariables.stoppedDownloads = {}\r\n    window.customVariables.stoppedUploadsDone = {}\r\n    window.customVariables.stoppedDownloadsDone = {}\r\n    window.customVariables.lastCachedItemsLength = undefined\r\n    window.customVariables.lastAPICacheLength = undefined\r\n    window.customVariables.thumbnailCache = {}\r\n    window.customVariables.thumbnailBlobCache = {}\r\n    window.customVariables.currentThumbnailURL = undefined\r\n    window.customVariables.lastThumbnailCacheLength = undefined\r\n    window.customVariables.thumbnailSemaphore = new utils.Semaphore(2)\r\n    window.customVariables.updateItemsSemaphore = new utils.Semaphore(1)\r\n    window.customVariables.getNetworkInfoInterval = undefined\r\n    window.customVariables.networkStatus = undefined\r\n    window.customVariables.orderBy = \"nameAsc\"\r\n    window.customVariables.getThumbnailErrors = {}\r\n    window.customVariables.lastGetThumbnailErrorsLength = undefined\r\n    window.customVariables.scrollToIndex = {}\r\n    window.customVariables.mainSearchbarTimeout = undefined\r\n    window.customVariables.mainSearchbarInterval = undefined\r\n    window.customVariables.lastMainSearchbarTerm = \"\"\r\n    window.customVariables.userMasterKeys = []\r\n    window.customVariables.isGettingPreviewData = false\r\n    window.customVariables.stopGettingPreviewData = false\r\n    window.customVariables.cachedAPIItemListRequests = {}\r\n    window.customVariables.deviceHeightAndWidthInterval = undefined\r\n\r\n    clearInterval(window.customVariables.mainSearchbarInterval)\r\n\r\n    window.customVariables.mainSearchbarInterval = setInterval(() => {\r\n        if(document.getElementById(\"main-searchbar\") !== null){\r\n            let term = document.getElementById(\"main-searchbar\").value.trim()\r\n\r\n            if(typeof term == \"string\"){\r\n                if(term.length > 0){\r\n                    if(term !== window.customVariables.lastMainSearchbarTerm){\r\n                        window.customVariables.lastMainSearchbarTerm = term\r\n\r\n                        clearTimeout(window.customVariables.mainSearchbarTimeout)\r\n    \r\n                        window.customVariables.mainSearchbarTimeout = setTimeout(() => {\r\n                            this.setMainSearchTerm(term)\r\n                        }, 250)\r\n                    }\r\n                }\r\n                else{\r\n                    clearTimeout(window.customVariables.mainSearchbarTimeout)\r\n\r\n                    this.setMainSearchTerm(\"\")\r\n                }\r\n            }\r\n            else{\r\n                clearTimeout(window.customVariables.mainSearchbarTimeout)\r\n\r\n                this.setMainSearchTerm(\"\")\r\n            }\r\n        }\r\n        else{\r\n            clearTimeout(window.customVariables.mainSearchbarTimeout)\r\n        }\r\n    }, 100)\r\n\r\n    const updateHeightAndWidthState = () => {\r\n        this.setState({\r\n            windowHeight: window.innerHeight,\r\n            windowWidth: window.innerWidth\r\n        })\r\n    }\r\n\r\n    clearInterval(window.customVariables.deviceHeightAndWidthInterval)\r\n\r\n    window.customVariables.deviceHeightAndWidthInterval = setInterval(() => {\r\n        updateHeightAndWidthState()\r\n    }, 250)\r\n\r\n    window.addEventListener(\"orientationchange\", () => {\r\n        updateHeightAndWidthState()\r\n    }, false)\r\n\r\n    window.addEventListener(\"resize\", function() {\r\n        updateHeightAndWidthState()\r\n    }, false)\r\n\r\n    document.onclick = (e) => {\r\n        return window.customFunctions.togglePreviewHeader(e)\r\n    }\r\n\r\n    window.customFunctions.isPlatform = isPlatform\r\n    window.customFunctions.safeAreaInsets = safeAreaInsets\r\n\r\n    window.customFunctions.togglePreviewHeader = (e) => {\r\n        if(typeof e.target == \"undefined\"){\r\n            return\r\n        }\r\n\r\n        if(e.target.innerHTML.indexOf(\"<ion-icon\") !== -1){\r\n            return false\r\n        }\r\n\r\n        if(document.getElementsByClassName(\"preview-header-hidden\").length > 0){\r\n            let header = document.getElementsByClassName(\"preview-header-hidden\")[0]\r\n\r\n            if(header.style.display == \"none\"){\r\n                header.style.display = \"block\"\r\n            }\r\n            else{\r\n                header.style.display = \"none\"\r\n            }\r\n        }\r\n    }\r\n\r\n    window.customFunctions.getNetworkInfo = async () => {\r\n        try{\r\n            window.customVariables.networkStatus = await Plugins.Network.getStatus()\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveOfflineSavedFiles = async () => {\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"offlineSavedFiles\",\r\n                value: JSON.stringify(window.customVariables.offlineSavedFiles)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveGetThumbnailErrors = async () => {\r\n        if(typeof window.customVariables.lastGetThumbnailErrorsLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.getThumbnailErrors)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastGetThumbnailErrorsLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastGetThumbnailErrorsLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"getThumbnailErrors\",\r\n                value: JSON.stringify(window.customVariables.getThumbnailErrors)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveAPICache = async () => {\r\n        if(typeof window.customVariables.lastAPICacheLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.apiCache)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastAPICacheLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastAPICacheLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"apiCache\",\r\n                value: JSON.stringify(window.customVariables.apiCache)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveThumbnailCache = async () => {\r\n        if(typeof window.customVariables.lastThumbnailCacheLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.thumbnailCache)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastThumbnailCacheLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastThumbnailCacheLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"thumbnailCache\",\r\n                value: JSON.stringify(window.customVariables.thumbnailCache)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveCachedItems = async () => {\r\n        if(typeof window.customVariables.lastCachedItemsLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.cachedFiles) + JSON.stringify(window.customVariables.cachedFolders)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastCachedItemsLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastCachedItemsLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"cachedFiles\",\r\n                value: JSON.stringify(window.customVariables.cachedFiles)\r\n            })\r\n\r\n            await Plugins.Storage.set({\r\n                key: \"cachedFolders\",\r\n                value: JSON.stringify(window.customVariables.cachedFolders)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissActionSheet = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await actionSheetController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let actionSheet = await actionSheetController.getTop()\r\n\r\n            if(typeof actionSheet !== \"undefined\"){\r\n                return actionSheet.dismiss()\r\n            }\r\n            \r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissPopover = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await popoverController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let popover = await popoverController.getTop()\r\n\r\n            if(typeof popover !== \"undefined\"){\r\n                return popover.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissModal = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await modalController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let modal = await modalController.getTop()\r\n\r\n            if(typeof modal !== \"undefined\"){\r\n                return modal.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissLoader = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await loadingController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let loader = await loadingController.getTop()\r\n\r\n            if(typeof loader !== \"undefined\"){\r\n                return loader.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissAlert = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await alertController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let alert = await alertController.getTop()\r\n\r\n            if(typeof alert !== \"undefined\"){\r\n                return alert.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.selectAllItems = () => {\r\n        let items = []\r\n\r\n        for(let i = 0; i < this.state.itemList.length; i++){\r\n            let item = this.state.itemList[i]\r\n\r\n            item.selected = true\r\n\r\n            items.push(item)\r\n        }\r\n\r\n        this.setState({\r\n            itemList: items,\r\n            selectedItems: items.length\r\n        })\r\n\r\n        return window.customFunctions.dismissPopover()\r\n    }\r\n\r\n    window.customFunctions.unselectAllItems = () => {\r\n        let items = []\r\n\r\n        for(let i = 0; i < this.state.itemList.length; i++){\r\n            let item = this.state.itemList[i]\r\n\r\n            item.selected = false\r\n\r\n            items.push(item)\r\n        }\r\n\r\n        this.setState({\r\n            itemList: items,\r\n            selectedItems: 0\r\n        })\r\n\r\n        return window.customFunctions.dismissPopover()\r\n    }\r\n\r\n    window.customFunctions.refreshItemList = () => {\r\n        this.updateItemList()\r\n\r\n        return window.customFunctions.dismissPopover()\r\n    }\r\n\r\n    window.customFunctions.hideSidebarMenu = async () => {\r\n        let mainMenu = await menuController.get(\"sideBarMenu\")\r\n\r\n        return mainMenu.close()\r\n    }\r\n\r\n    window.customFunctions.openRegisterModal = () => {\r\n        return this.showRegister()\r\n    }\r\n\r\n    window.customFunctions.doLogout = async () => {\r\n        await Plugins.Storage.set({ key: \"isLoggedIn\", value: \"false\" })\r\n        await Plugins.Storage.set({ key: \"userAPIKey\", value: \"\" })\r\n        await Plugins.Storage.set({ key: \"userEmail\", value: \"\" })\r\n        await Plugins.Storage.set({ key: \"userMasterKeys\", value: JSON.stringify([]) })\r\n        await Plugins.Storage.set({ key: \"userPublicKey\", value: \"\" })\r\n        await Plugins.Storage.set({ key: \"userPrivateKey\", value: \"\" })\r\n\r\n        this.setState({ isLoggedIn: false })\r\n\r\n        return this.showLogin()\r\n    }\r\n\r\n    window.customFunctions.doLogin = async () => {\r\n        let email = document.getElementById(\"login-email\").value\r\n        let password = document.getElementById(\"login-password\").value\r\n        let twoFactorKey = document.getElementById(\"login-2fa\").value\r\n\r\n        if(!email || !password){\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"loginInvalidInputs\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        if(twoFactorKey.length == 0){\r\n            twoFactorKey = \"XXXXXX\"\r\n        }\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        try{\r\n            var res = await utils.apiRequest(\"POST\", \"/v1/login\", {\r\n                email,\r\n                password,\r\n                twoFactorKey\r\n            })\r\n        }\r\n        catch(e){\r\n            document.getElementById(\"login-password\").value = \"\"\r\n            document.getElementById(\"login-2fa\").value = \"\"\r\n\r\n            console.log(e)\r\n\r\n            window.customFunctions.dismissLoader()\r\n\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"apiRequestError\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        if(!res.status){\r\n            if(res.message == \"Please enter your Two Factor Authentication code.\"){\r\n                window.customFunctions.dismissLoader()\r\n\r\n                document.getElementById(\"login-2fa-container\").style.display = \"block\"\r\n\r\n                let alert = await alertController.create({\r\n                    header: \"\",\r\n                    subHeader: \"\",\r\n                    message: language.get(this.state.lang, \"loginWith2FACode\"),\r\n                    buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                })\r\n\r\n                return alert.present()\r\n            }\r\n            else{\r\n                document.getElementById(\"login-password\").value = \"\"\r\n                document.getElementById(\"login-2fa\").value = \"\"\r\n\r\n                window.customFunctions.dismissLoader()\r\n\r\n                if(res.message == \"Account not yet activated.\"){\r\n                    let alert = await alertController.create({\r\n                        header: \"\",\r\n                        subHeader: \"\",\r\n                        message: language.get(this.state.lang, \"loginAccountNotActivated\"),\r\n                        buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                    })\r\n        \r\n                    return alert.present()\r\n                }\r\n                else if(res.message == \"Account not found.\"){\r\n                    let alert = await alertController.create({\r\n                        header: \"\",\r\n                        subHeader: \"\",\r\n                        message: language.get(this.state.lang, \"loginAccountNotFound\"),\r\n                        buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                    })\r\n        \r\n                    return alert.present()\r\n                }\r\n\r\n                let alert = await alertController.create({\r\n                    header: \"\",\r\n                    subHeader: \"\",\r\n                    message: language.get(this.state.lang, \"loginWrongCredentials\"),\r\n                    buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                })\r\n\r\n                return alert.present()\r\n            }\r\n        }\r\n\r\n        await Plugins.Storage.set({ key: \"isLoggedIn\", value: \"true\" })\r\n        await Plugins.Storage.set({ key: \"userAPIKey\", value: res.data.apiKey })\r\n        await Plugins.Storage.set({ key: \"userEmail\", value: email })\r\n        await Plugins.Storage.set({ key: \"userMasterKeys\", value: JSON.stringify([utils.hashFn(password)]) })\r\n\r\n        /*window.customFunctions.dismissLoader(true)\r\n        window.customFunctions.dismissModal(true)\r\n        window.customFunctions.dismissLoader()\r\n\r\n        document.getElementById(\"login-email\").value = \"\"\r\n        document.getElementById(\"login-password\").value = \"\"\r\n        document.getElementById(\"login-2fa\").value = \"\"*/\r\n\r\n        return document.location.href = \"index.html\"\r\n    }\r\n\r\n    window.customFunctions.doRegister = async () => {\r\n        let email = document.getElementById(\"register-email\").value\r\n        let password = document.getElementById(\"register-password\").value\r\n        let passwordRepeat = document.getElementById(\"register-password-repeat\").value\r\n\r\n        if(!email || !password || !passwordRepeat){\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"registerInvalidInputs\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        try{\r\n            var res = await utils.apiRequest(\"POST\", \"/v1/register\", {\r\n                email,\r\n                password,\r\n                passwordRepeat\r\n            })\r\n        }\r\n        catch(e){\r\n            document.getElementById(\"register-password\").value = \"\"\r\n            document.getElementById(\"register-password-repeat\").value = \"\"\r\n\r\n            console.log(e)\r\n\r\n            window.customFunctions.dismissLoader()\r\n\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"apiRequestError\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        if(!res.status){\r\n            document.getElementById(\"register-password\").value = \"\"\r\n            document.getElementById(\"register-password-repeat\").value = \"\"\r\n\r\n            window.customFunctions.dismissLoader()\r\n\r\n            let message = \"\"\r\n\r\n            if(res.message.toLowerCase().indexOf(\"invalid email\") !== -1 || res.message.toLowerCase().indexOf(\"invalid password\") !== -1 || res.message.toLowerCase().indexOf(\"invalid email\") !== -1){\r\n                message = language.get(this.state.lang, \"registerInvalidFields\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"your password needs to be at least 10 characters long\") !== -1){\r\n                message = language.get(this.state.lang, \"registerPasswordAtLeast10Chars\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"passwords do not match\") !== -1){\r\n                message = language.get(this.state.lang, \"registerPasswordsDoNotMatch\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"invalid email\") !== -1){\r\n                message = language.get(this.state.lang, \"registerInvalidEmail\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"database error\") !== -1){\r\n                message = language.get(this.state.lang, \"apiRequestError\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"this email is already registered\") !== -1){\r\n                message = language.get(this.state.lang, \"registerEmailAlreadyRegistered\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"we could not send an email at this time, please try again later\") !== -1){\r\n                message = language.get(this.state.lang, \"registerCouldNotSendEmail\")\r\n            }\r\n\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: message,\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        document.getElementById(\"register-email\").value = \"\"\r\n        document.getElementById(\"register-password\").value = \"\"\r\n        document.getElementById(\"register-password-repeat\").value = \"\"\r\n\r\n        window.customFunctions.dismissLoader()\r\n\r\n        let alert = await alertController.create({\r\n            header: \"\",\r\n            subHeader: \"\",\r\n            message: language.get(this.state.lang, \"registerSuccess\"),\r\n            buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.openSettingsModal = async () => {\r\n        return this.openSettingsModal()\r\n    }\r\n\r\n    window.customFunctions.setLang = async (lang = \"en\") => {\r\n        await Plugins.Storage.set({ key: \"lang\", value: lang })\r\n\r\n        return document.location.href = \"index.html\"\r\n    }\r\n\r\n    window.customFunctions.openLanguageModal = async () => {\r\n        let appLang = this.state.lang\r\n        let appDarkMode = this.state.darkMode\r\n        let modalId = \"language-modal-\" + utils.generateRandomClassName()\r\n\r\n        let languagesHTML = \"\"\r\n        let langList = language.list()\r\n\r\n        for(let prop in langList){\r\n            languagesHTML += `\r\n                <ion-item lines=\"none\" onClick=\"window.customFunctions.setLang('` + prop + `')\" button>\r\n                    <ion-label>` + language.name(prop) + `</ion-label>\r\n                    <ion-radio slot=\"end\" value=\"` + prop + `\"></ion-radio>\r\n                </ion-item>\r\n            `\r\n        }\r\n\r\n        customElements.define(modalId, class ModalContent extends HTMLElement {\r\n            connectedCallback(){\r\n                this.innerHTML = `\r\n                    <ion-header style=\"margin-top: ` + (isPlatform(\"ipad\") ? safeAreaInsets.top : 0) + `px;\">\r\n                        <ion-toolbar>\r\n                            <ion-buttons slot=\"start\">\r\n                                <ion-button onClick=\"window.customFunctions.dismissModal()\">\r\n                                    <ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\"></ion-icon>\r\n                                </ion-button>\r\n                            </ion-buttons>\r\n                            <ion-title>\r\n                                ` + language.get(appLang, \"settingsLanguage\") + `\r\n                            </ion-title>\r\n                        </ion-toolbar>\r\n                    </ion-header>\r\n                    <ion-content style=\"--background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\" fullscreen>\r\n                        <ion-list>\r\n                            <ion-radio-group value=\"` + appLang + `\">\r\n                                ` + languagesHTML + `\r\n                            </ion-radio-group>\r\n                        </ion-list>\r\n                    </ion-content>\r\n                `\r\n            }\r\n        })\r\n\r\n        let modal = await modalController.create({\r\n            component: modalId,\r\n            swipeToClose: true,\r\n            showBackdrop: false,\r\n            backdropDismiss: false,\r\n            cssClass: \"modal-fullscreen\"\r\n        })\r\n\r\n        return modal.present()\r\n    }\r\n\r\n    window.customFunctions.openEncryptionModal = async () => {\r\n        let appLang = this.state.lang\r\n        let appDarkMode = this.state.darkMode\r\n        let modalId = \"encryption-modal-\" + utils.generateRandomClassName()\r\n\r\n        customElements.define(modalId, class ModalContent extends HTMLElement {\r\n            connectedCallback(){\r\n                this.innerHTML = `\r\n                    <ion-header style=\"margin-top: ` + (isPlatform(\"ipad\") ? safeAreaInsets.top : 0) + `px;\">\r\n                        <ion-toolbar>\r\n                            <ion-buttons slot=\"start\">\r\n                                <ion-button onClick=\"window.customFunctions.dismissModal()\">\r\n                                    <ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\"></ion-icon>\r\n                                </ion-button>\r\n                            </ion-buttons>\r\n                            <ion-title>\r\n                                ` + language.get(appLang, \"encryption\") + `\r\n                            </ion-title>\r\n                        </ion-toolbar>\r\n                    </ion-header>\r\n                    <ion-content style=\"--background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\" fullscreen>\r\n                        <ion-list>\r\n                            <ion-item-divider style=\"--background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\">\r\n                                <ion-label>\r\n                                    ` + language.get(appLang, \"encryptionModalHeader\") + `\r\n                                </ion-label>\r\n                            </ion-item-divider>\r\n                            <ion-item lines=\"none\" style=\"padding-top: 10px;\">\r\n                                ` + language.get(appLang, \"encryptionModalFirstText\") + `\r\n                            </ion-item>\r\n                            <ion-item-divider style=\"padding-top: 15px; --background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\">\r\n                                <ion-label>\r\n                                    ` + language.get(appLang, \"encryptionModalHeaderHowItWorks\") + `\r\n                                </ion-label>\r\n                            </ion-item-divider>\r\n                            <ion-item lines=\"none\" style=\"padding-top: 10px;\">\r\n                                ` + language.get(appLang, \"encryptionModalHowItWorksText\") + `\r\n                            </ion-item>\r\n                        </ion-list>\r\n                    </ion-content>\r\n                `\r\n            }\r\n        })\r\n\r\n        let modal = await modalController.create({\r\n            component: modalId,\r\n            swipeToClose: true,\r\n            showBackdrop: false,\r\n            backdropDismiss: false,\r\n            cssClass: \"modal-fullscreen\"\r\n        })\r\n\r\n        return modal.present()\r\n    }\r\n\r\n    window.customFunctions.openWebsiteModal = async () => {\r\n        let actionSheet = await actionSheetController.create({\r\n            header: language.get(this.state.lang, \"website\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"website\"),\r\n                    icon: Ionicons.globe,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"onlineFM\"),\r\n                    icon: Ionicons.grid,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/my-account/file-manager/default\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    icon: \"close\",\r\n                    role: \"cancel\"\r\n                }\r\n            ]\r\n        })\r\n\r\n        return actionSheet.present()\r\n    }\r\n\r\n    window.customFunctions.openHelpModal = async () => {\r\n        let btns = [\r\n            {\r\n                text: language.get(this.state.lang, \"support\"),\r\n                icon: Ionicons.helpBuoyOutline,\r\n                handler: () => {\r\n                    window.open(\"https://support.filen.io/\", \"_system\")\r\n\r\n                    return false\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"faq\"),\r\n                icon: Ionicons.informationCircle,\r\n                handler: () => {\r\n                    window.open(\"https://filen.io/faq\", \"_system\")\r\n\r\n                    return false\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"tos\"),\r\n                icon: Ionicons.informationCircleOutline,\r\n                handler: () => {\r\n                    window.open(\"https://filen.io/terms\", \"_system\")\r\n\r\n                    return false\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"privacyPolicy\"),\r\n                icon: Ionicons.informationCircleOutline,\r\n                handler: () => {\r\n                    window.open(\"https://filen.io/privacy\", \"_system\")\r\n\r\n                    return false\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"cancel\"),\r\n                icon: \"close\",\r\n                role: \"cancel\"\r\n            }\r\n        ]\r\n\r\n        if(isPlatform(\"ios\")){\r\n            btns = [\r\n                {\r\n                    text: language.get(this.state.lang, \"support\"),\r\n                    icon: Ionicons.helpBuoyOutline,\r\n                    handler: () => {\r\n                        window.open(\"https://support.filen.io/\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    icon: \"close\",\r\n                    role: \"cancel\"\r\n                }\r\n            ]\r\n        }\r\n\r\n        let actionSheet = await actionSheetController.create({\r\n            header: language.get(this.state.lang, \"help\"),\r\n            buttons: btns\r\n        })\r\n\r\n        return actionSheet.present()\r\n    }\r\n\r\n    window.customFunctions.queueFileUpload = this.queueFileUpload\r\n    window.customFunctions.queueFileDownload = this.queueFileDownload\r\n\r\n    window.customFunctions.openItemActionSheetFromJSON = (itemJSON) => {\r\n        let item = JSON.parse(window.atob(itemJSON))\r\n\r\n        return this.spawnItemActionSheet(item)\r\n    }\r\n\r\n    window.customFunctions.moveSelectedItems = () => {\r\n        return this.moveSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.trashSelectedItems = () => {\r\n        return this.trashSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.restoreSelectedItems = () => {\r\n        return this.restoreSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.removeSelectedItemsFromSharedIn = () => {\r\n        return this.removeSelectedItemsFromSharedIn()\r\n    }\r\n\r\n    window.customFunctions.stopSharingSelectedItems = () => {\r\n        return this.stopSharingSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.downloadSelectedItems = () => {\r\n        return this.downloadSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.storeSelectedItemsOffline = () => {\r\n        return this.storeSelectedItemsOffline()\r\n    }\r\n\r\n    window.customFunctions.shareSelectedItems = () => {\r\n        return this.shareSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.settingsToggleDarkMode = async () => {\r\n        if(this.state.darkMode){\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"false\" })\r\n\r\n            document.getElementById(\"settings-dark-mode-toggle\").checked = false\r\n\r\n            return this.setState({\r\n                darkMode: false\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n        else{\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"true\" })\r\n\r\n            document.getElementById(\"settings-dark-mode-toggle\").checked = true\r\n\r\n            return this.setState({\r\n                darkMode: true\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n    }\r\n\r\n    window.customFunctions.loginToggleDarkMode = async () => {\r\n        if(this.state.darkMode){\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"false\" })\r\n\r\n            return this.setState({\r\n                darkMode: false\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n        else{\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"true\" })\r\n\r\n            return this.setState({\r\n                darkMode: true\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveSettings = async (newSettings) => {\r\n        await Plugins.Storage.set({ key: \"settings\", value: JSON.stringify(newSettings) })\r\n\r\n        return this.setState({\r\n            settings: newSettings\r\n        })\r\n    }\r\n\r\n    window.customFunctions.toggleOnlyWifi = () => {\r\n        let newSettings = this.state.settings\r\n        let newVal = !newSettings.onlyWifi\r\n\r\n        newSettings.onlyWifi = newVal\r\n\r\n        document.getElementById(\"settings-only-wifi-toggle\").checked = !newVal\r\n\r\n        return window.customFunctions.saveSettings(newSettings)\r\n    }\r\n\r\n    window.customFunctions.logoutUser = async () => {\r\n        await Plugins.Storage.remove({ key: \"isLoggedIn\" })\r\n        await Plugins.Storage.remove({ key: \"userAPIKey\" })\r\n        await Plugins.Storage.remove({ key: \"userEmail\" })\r\n        await Plugins.Storage.remove({ key: \"userMasterKeys\" })\r\n        await Plugins.Storage.remove({ key: \"userPublicKey\" })\r\n        await Plugins.Storage.remove({ key: \"userPrivateKey\" })\r\n        await Plugins.Storage.remove({ key: \"offlineSavedFiles\" })\r\n        await Plugins.Storage.remove({ key: \"apiCache\" })\r\n\r\n        return document.location.href = \"index.html\"\r\n    }\r\n\r\n    window.customFunctions.doLogout = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"logoutAlertHeader\"),\r\n            message: language.get(this.state.lang, \"logoutConfirmation\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: () => {\r\n                        return window.customFunctions.logoutUser()\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.emptyTrash = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"emptyTrashHeader\"),\r\n            message: language.get(this.state.lang, \"emptyTrashWarning\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: async () => {\r\n                        let loading = await loadingController.create({\r\n                            message: \"\"\r\n                        })\r\n\r\n                        loading.present()\r\n\r\n                        try{\r\n                            var res = await utils.apiRequest(\"POST\", \"/v1/trash/empty\", {\r\n                                apiKey: this.state.userAPIKey\r\n                            })\r\n                        }\r\n                        catch(e){\r\n                            console.log(e)\r\n\r\n                            loading.dismiss()\r\n\r\n                            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                        }\r\n\r\n                        if(!res.status){\r\n                            console.log(res.message)\r\n\r\n                            loading.dismiss()\r\n\r\n                            return this.spawnToast(res.message)\r\n                        }\r\n\r\n                        loading.dismiss()\r\n\r\n                        this.updateItemList()\r\n\r\n                        return this.spawnToast(language.get(this.state.lang, \"trashEmptied\"))\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.changeItemColor = async (itemJSON, color) => {\r\n        let item = JSON.parse(window.atob(itemJSON))\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        try{\r\n            var res = await utils.apiRequest(\"POST\", \"/v1/dir/color/change\", {\r\n                apiKey: this.state.userAPIKey,\r\n                uuid: item.uuid,\r\n                color: color\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n    \r\n            loading.dismiss()\r\n    \r\n            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n        }\r\n    \r\n        if(!res.status){\r\n            console.log(res.message)\r\n    \r\n            loading.dismiss()\r\n    \r\n            return this.spawnToast(res.message)\r\n        }\r\n\r\n        loading.dismiss()\r\n\r\n        try{\r\n            await this.updateItemList()\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n\r\n        return window.customFunctions.dismissModal()\r\n    }\r\n\r\n    window.customFunctions.editItemPublicLink = async (itemJSON, type, isEdit = false, currentLinkUUID = \"\") => {\r\n        let item = JSON.parse(window.atob(itemJSON))\r\n        let linkUUID = utils.uuidv4()\r\n\r\n        if(isEdit && typeof currentLinkUUID == \"string\"){\r\n            if(currentLinkUUID.length > 1){\r\n                linkUUID = currentLinkUUID\r\n            }\r\n        }\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        let expires = \"never\"\r\n\r\n        if(typeof document.getElementById(\"public-link-expires-select\").value == \"string\"){\r\n            expires = document.getElementById(\"public-link-expires-select\").value\r\n        }\r\n\r\n        let password = \"empty\"\r\n\r\n        if(typeof document.getElementById(\"public-link-password-input\").value == \"string\"){\r\n            if(document.getElementById(\"public-link-password-input\").value){\r\n                password = document.getElementById(\"public-link-password-input\").value\r\n            }\r\n        }\r\n\r\n        let downloadBtn = \"enable\"\r\n\r\n        if(document.getElementById(\"public-link-enable-download-btn-toggle\") !== null){\r\n            if(!document.getElementById(\"public-link-enable-download-btn-toggle\").checked){\r\n                downloadBtn = \"disable\"\r\n            }\r\n        }\r\n        \r\n        if(item.type == \"file\"){\r\n            try{\r\n                var res = await utils.apiRequest(\"POST\", \"/v1/link/edit\", {\r\n                    apiKey: this.state.userAPIKey,\r\n                    uuid: linkUUID,\r\n                    fileUUID: item.uuid,\r\n                    expiration: expires,\r\n                    password: password,\r\n                    passwordHashed: utils.hashFn(password),\r\n                    downloadBtn: downloadBtn,\r\n                    type: type\r\n                })\r\n            }\r\n            catch(e){\r\n                console.log(e)\r\n        \r\n                loading.dismiss()\r\n        \r\n                return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n            }\r\n        \r\n            if(!res.status){\r\n                console.log(res.message)\r\n        \r\n                loading.dismiss()\r\n        \r\n                return this.spawnToast(res.message)\r\n            }\r\n\r\n            loading.dismiss()\r\n\r\n            document.getElementById(\"public-link-enabled-toggle\").checked = true\r\n            document.getElementById(\"public-link-input\").value = \"https://filen.io/d/\" + linkUUID + \"#!\" + item.key\r\n\r\n            if(type == \"enable\"){\r\n                document.getElementById(\"enable-public-link-content\").style.display = \"none\"\r\n                document.getElementById(\"public-link-enabled-content\").style.display = \"block\"\r\n            }\r\n            else{\r\n                document.getElementById(\"enable-public-link-content\").style.display = \"block\"\r\n                document.getElementById(\"public-link-enabled-content\").style.display = \"none\"\r\n\r\n                try{\r\n                    await this.updateItemList()\r\n                }\r\n                catch(e){\r\n                    console.log(e)\r\n                }\r\n            }\r\n\r\n            return true\r\n        }\r\n        else{\r\n            const removeFolderLink = async (callback) => {\r\n                let removeLoading = await loadingController.create({\r\n                    message: \"\"\r\n                })\r\n\r\n                removeLoading.present()\r\n\r\n                try{\r\n                    var res = await utils.apiRequest(\"POST\", \"/v1/dir/link/remove\", {\r\n                        apiKey: this.state.userAPIKey,\r\n                        uuid: item.uuid\r\n                    })\r\n                }\r\n                catch(e){\r\n                    console.log(e)\r\n            \r\n                    removeLoading.dismiss()\r\n            \r\n                    return callback(language.get(this.state.lang, \"apiRequestError\"))\r\n                }\r\n            \r\n                if(!res.status){\r\n                    console.log(res.message)\r\n            \r\n                    removeLoading.dismiss()\r\n            \r\n                    return callback(res.message)\r\n                }\r\n\r\n                removeLoading.dismiss()\r\n                \r\n                return callback(null)\r\n            }\r\n\r\n            const editFolderLink = async (callback) => {\r\n                let editLoading = await loadingController.create({\r\n                    message: \"\"\r\n                })\r\n\r\n                editLoading.present()\r\n\r\n                try{\r\n                    var res = await utils.apiRequest(\"POST\", \"/v1/dir/link/edit\", {\r\n                        apiKey: this.state.userAPIKey,\r\n                        uuid: item.uuid,\r\n                        expiration: expires,\r\n                        password: password,\r\n                        passwordHashed: utils.hashFn(password),\r\n                        downloadBtn: downloadBtn\r\n                    })\r\n                }\r\n                catch(e){\r\n                    console.log(e)\r\n            \r\n                    editLoading.dismiss()\r\n            \r\n                    return callback(language.get(this.state.lang, \"apiRequestError\"))\r\n                }\r\n            \r\n                if(!res.status){\r\n                    console.log(res.message)\r\n            \r\n                    editLoading.dismiss()\r\n            \r\n                    return callback(res.message)\r\n                }\r\n\r\n                editLoading.dismiss()\r\n                \r\n                return callback(null)\r\n            }\r\n\r\n            const createFolderLink = async (callback) => {\r\n                let createLoading = await loadingController.create({\r\n                    message: \"\",\r\n                    backdropDismiss: false\r\n                })\r\n\r\n                createLoading.present()\r\n\r\n                try{\r\n                    var res = await utils.apiRequest(\"POST\", \"/v1/download/dir\", {\r\n                        apiKey: this.state.userAPIKey,\r\n                        uuid: item.uuid\r\n                    })\r\n                }\r\n                catch(e){\r\n                    console.log(e)\r\n            \r\n                    createLoading.dismiss()\r\n            \r\n                    return callback(language.get(this.state.lang, \"apiRequestError\"))\r\n                }\r\n            \r\n                if(!res.status){\r\n                    console.log(res.message)\r\n            \r\n                    createLoading.dismiss()\r\n            \r\n                    return callback(res.message)\r\n                }\r\n\r\n                let key = utils.generateRandomString(32)\r\n                let keyEnc = utils.cryptoJSEncrypt(key, this.state.userMasterKeys[this.state.userMasterKeys.length - 1])\r\n                let newLinkUUID = utils.uuidv4()\r\n                let totalItems = (res.data.folders.length + res.data.files.length)\r\n                let doneItems = 0\r\n                let erroredItems = 0\r\n\r\n                const itemAdded = () => {\r\n                    doneItems += 1\r\n\r\n                    createLoading.message = language.get(this.state.lang, \"folderLinkAddedItemsCount\", true, [\"__ADDED__\", \"__TOTAL__\"], [doneItems, totalItems])\r\n\r\n                    if(doneItems >= totalItems){\r\n                        createLoading.dismiss()\r\n\r\n                        if(erroredItems > 0){\r\n                            console.log(\"Errored items: \" + erroredItems)\r\n                        }\r\n\r\n                        linkUUID = newLinkUUID\r\n            \r\n                        return callback(null , {\r\n                            linkUUID: linkUUID,\r\n                            linkKey: key\r\n                        })\r\n                    }\r\n                }\r\n\r\n                const addItemRequest = async (data, tries, maxTries, cb) => {\r\n                    if(tries >= maxTries){\r\n\t\t\t\t\t\treturn cb(language.get(this.state.lang, \"apiRequestError\"))\r\n                    }\r\n                    \r\n                    try{\r\n                        var res = await utils.apiRequest(\"POST\", \"/v1/dir/link/add\", data)\r\n                    }\r\n                    catch(e){\r\n                        console.log(e)\r\n                \r\n                        return setTimeout(() => {\r\n                            addItemRequest(data, (tries + 1), maxTries, cb)\r\n                        }, 1000)\r\n                    }\r\n                \r\n                    return cb(null)\r\n                }\r\n\r\n                const addItem = async (itemType, itemToAdd) => {\r\n                    await window.customVariables.shareItemSemaphore.acquire()\r\n\r\n                    let itemMetadata = \"\"\r\n\r\n\t\t\t\t\tif(itemType == \"file\"){\r\n\t\t\t\t\t\titemMetadata = utils.cryptoJSEncrypt(JSON.stringify({\r\n\t\t\t\t\t\t\tname: itemToAdd.name,\r\n\t\t\t\t\t\t\tmime: itemToAdd.mime,\r\n\t\t\t\t\t\t\tkey: itemToAdd.key,\r\n\t\t\t\t\t\t\tsize: parseInt(itemToAdd.size)\r\n\t\t\t\t\t\t}), key)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\titemMetadata = utils.cryptoJSEncrypt(JSON.stringify({\r\n\t\t\t\t\t\t\tname: itemToAdd.name\r\n\t\t\t\t\t\t}), key)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\taddItemRequest({\r\n\t\t\t\t\t\tapiKey: window.customVariables.apiKey,\r\n\t\t\t\t\t\tuuid: itemToAdd.uuid,\r\n\t\t\t\t\t\tparent: itemToAdd.parent,\r\n\t\t\t\t\t\tlinkUUID: newLinkUUID,\r\n\t\t\t\t\t\ttype: itemType,\r\n\t\t\t\t\t\tmetadata: itemMetadata,\r\n\t\t\t\t\t\tkey: keyEnc,\r\n\t\t\t\t\t\texpiration: \"never\",\r\n\t\t\t\t\t\tpassword: \"empty\",\r\n\t\t\t\t\t\tpasswordHashed: utils.hashFn(\"empty\"),\r\n\t\t\t\t\t\tdownloadBtn: \"enable\"\r\n\t\t\t\t\t}, 0, 32, (err) => {\r\n\t\t\t\t\t\twindow.customVariables.shareItemSemaphore.release()\r\n\r\n\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\tconsole.log(err)\r\n\r\n\t\t\t\t\t\t\terroredItems += 1\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\titemAdded()\r\n\t\t\t\t\t}) \r\n                }\r\n\r\n                for(let i = 0; i < res.data.folders.length; i++){\r\n\t\t\t\t\tlet folder = res.data.folders[i]\r\n\r\n                    await window.customVariables.decryptShareItemSemaphore.acquire()\r\n\r\n\t\t\t\t\taddItem(\"folder\", {\r\n\t\t\t\t\t\tuuid: folder.uuid,\r\n\t\t\t\t\t\tparent: folder.parent,\r\n\t\t\t\t\t\tname: utils.decryptCryptoJSFolderName(folder.name, this.state.userMasterKeys, folder.uuid)\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\twindow.customVariables.decryptShareItemSemaphore.release()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(let i = 0; i < res.data.files.length; i++){\r\n\t\t\t\t\tlet file = res.data.files[i]\r\n\r\n\t\t\t\t\tawait window.customVariables.decryptShareItemSemaphore.acquire()\r\n\r\n\t\t\t\t\tlet fileMetadata = utils.decryptFileMetadata(file.metadata, this.state.userMasterKeys, file.uuid)\r\n\r\n\t\t\t\t\taddItem(\"file\", {\r\n\t\t\t\t\t\tuuid: file.uuid,\r\n\t\t\t\t\t\tparent: file.parent,\r\n\t\t\t\t\t\tname: fileMetadata.name,\r\n\t\t\t\t\t\tmime: fileMetadata.mime,\r\n\t\t\t\t\t\tkey: fileMetadata.key,\r\n\t\t\t\t\t\tsize: fileMetadata.size\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\twindow.customVariables.decryptShareItemSemaphore.release()\r\n\t\t\t\t}\r\n            }\r\n\r\n            loading.dismiss()\r\n\r\n            if(type == \"enable\"){\r\n                if(isEdit){\r\n                    editFolderLink((err) => {\r\n                        if(err){\r\n                            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                        }\r\n                    })\r\n                }\r\n                else{\r\n                    createFolderLink((err, linkData) => {\r\n                        if(err){\r\n                            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                        }\r\n    \r\n                        document.getElementById(\"public-link-enabled-toggle\").checked = true\r\n                        document.getElementById(\"public-link-input\").value = \"https://filen.io/f/\" + linkData.linkUUID + \"#!\" + linkData.linkKey\r\n\r\n                        document.getElementById(\"enable-public-link-content\").style.display = \"none\"\r\n                        document.getElementById(\"public-link-enabled-content\").style.display = \"block\"\r\n                    })\r\n                }\r\n            }\r\n            else{\r\n                removeFolderLink((err) => {\r\n                    if(err){\r\n                        return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                    }\r\n\r\n                    document.getElementById(\"enable-public-link-content\").style.display = \"block\"\r\n                    document.getElementById(\"public-link-enabled-content\").style.display = \"none\"\r\n\r\n                    this.updateItemList()\r\n                })\r\n            }\r\n\r\n            return true\r\n        }\r\n    }\r\n\r\n    window.customFunctions.copyPublicLinkToClipboard = async () => {\r\n        if(!Capacitor.isNative){\r\n            try{\r\n                utils.copyTextToClipboardWeb(document.getElementById(\"public-link-input\").value)\r\n            }\r\n            catch(e){\r\n                console.log(e)\r\n    \r\n                return this.spawnToast(language.get(this.state.lang, \"couldNotCopyToClipboard\")) \r\n            }\r\n    \r\n            return this.spawnToast(language.get(this.state.lang, \"copiedToClipboard\"))\r\n        }\r\n\r\n        try{\r\n            let link = document.getElementById(\"public-link-input\").value\r\n\r\n            await Plugins.Clipboard.write({\r\n                url: link\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n\r\n            return this.spawnToast(language.get(this.state.lang, \"couldNotCopyToClipboard\")) \r\n        }\r\n\r\n        return this.spawnToast(language.get(this.state.lang, \"copiedToClipboard\")) \r\n    }\r\n\r\n    window.customFunctions.clearThumbnailCache = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"settingsClearThumbnailCacheHeader\"),\r\n            message: language.get(this.state.lang, \"settingsClearThumbnailCacheInfo\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: async () => {\r\n                        if(!Capacitor.isNative){\r\n                            return alert.dismiss()\r\n                        }\r\n\r\n                        let dirObj = {\r\n                            path: \"ThumbnailCache/\",\r\n                            directory: FilesystemDirectory.External\r\n                        }\r\n\r\n                        alert.dismiss()\r\n\r\n                        try{\r\n                            await Plugins.Filesystem.rmdir({\r\n                                path: dirObj.path,\r\n                                directory: dirObj.directory,\r\n                                recursive: true\r\n                            })\r\n\r\n                            window.customVariables.thumbnailCache = {}\r\n                            window.customVariables.thumbnailBlobCache = {}\r\n                            window.customVariables.lastThumbnailCacheLength = undefined\r\n\r\n                            window.customFunctions.saveThumbnailCache()\r\n                        }\r\n                        catch(e){\r\n                            console.log(e)\r\n                        }\r\n\r\n                        return this.spawnToast(language.get(this.state.lang, \"settingsClearThumbnailCacheDone\"))\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.openOrderBy = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"orderBy\"),\r\n            inputs: [\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderByName\"),\r\n                    value: \"name\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"name\") !== -1 ? true : false)\r\n                },\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderBySize\"),\r\n                    value: \"size\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"size\") !== -1 ? true : false)\r\n                },\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderByDate\"),\r\n                    value: \"date\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"date\") !== -1 ? true : false)\r\n                },\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderByType\"),\r\n                    value: \"type\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"type\") !== -1 ? true : false)\r\n                }\r\n            ],\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"orderByReset\"),\r\n                    handler: () => {\r\n                        let sortedItems = utils.orderItemsByType(this.state.itemList, \"dateDesc\")\r\n\r\n                        window.customVariables.orderBy = \"nameAsc\"\r\n                        window.customVariables.itemList = sortedItems\r\n\r\n                        return this.setState({\r\n                            itemList: sortedItems\r\n                        }, () => {\r\n                            this.forceUpdate()\r\n                        })\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: async (type) => {\r\n                        let alert = await alertController.create({\r\n                            header: language.get(this.state.lang, \"orderByDirection\"),\r\n                            inputs: [\r\n                                {\r\n                                    type: \"radio\",\r\n                                    label: language.get(this.state.lang, \"orderByDirectionAsc\"),\r\n                                    value: \"Asc\",\r\n                                    checked: (window.customVariables.orderBy.indexOf(\"Asc\") !== -1 ? true : false)\r\n                                },\r\n                                {\r\n                                    type: \"radio\",\r\n                                    label: language.get(this.state.lang, \"orderByDirectionDesc\"),\r\n                                    value: \"Desc\",\r\n                                    checked: (window.customVariables.orderBy.indexOf(\"Desc\") !== -1 ? true : false)\r\n                                }\r\n                            ],\r\n                            buttons: [\r\n                                {\r\n                                    text: language.get(this.state.lang, \"cancel\"),\r\n                                    role: \"cancel\",\r\n                                    handler: () => {\r\n                                        return false\r\n                                    }\r\n                                },\r\n                                {\r\n                                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                                    handler: (direction) => {\r\n                                        let typeAndDirection = type + direction\r\n\r\n                                        console.log(typeAndDirection)\r\n\r\n                                        let sortedItems = utils.orderItemsByType(this.state.itemList, typeAndDirection)\r\n                \r\n                                        window.customVariables.orderBy = typeAndDirection\r\n                                        window.customVariables.itemList = sortedItems\r\n                \r\n                                        return this.setState({\r\n                                            itemList: sortedItems\r\n                                        }, () => {\r\n                                            this.forceUpdate()\r\n                                        })\r\n                                    }\r\n                                }\r\n                            ]\r\n                        })\r\n\r\n                        return alert.present()\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        window.customFunctions.dismissPopover()\r\n\r\n        return alert.present()\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}