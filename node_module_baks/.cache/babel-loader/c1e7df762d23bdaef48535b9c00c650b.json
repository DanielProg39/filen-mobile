{"ast":null,"code":"import { Plugins, StatusBarStyle, Capacitor } from \"@capacitor/core\";\nimport { modalController, popoverController, actionSheetController, loadingController, alertController } from \"@ionic/core\";\nimport * as language from \"../utils/language\";\nexport function setupListeners() {\n  if (Capacitor.isNative) {\n    Plugins.App.addListener(\"backButton\", async e => {\n      let goBackHistory = true;\n\n      if (this.state.searchbarOpen) {\n        this.hideMainSearchbar(false);\n        goBackHistory = false;\n      }\n\n      let isModalActive = await modalController.getTop();\n\n      if (isModalActive && this.state.isLoggedIn) {\n        window.customFunctions.dismissModal();\n        goBackHistory = false;\n      }\n\n      let isPopoverActive = await popoverController.getTop();\n\n      if (isPopoverActive && this.state.isLoggedIn) {\n        window.customFunctions.dismissPopover();\n        goBackHistory = false;\n      }\n\n      let isActionSheetActive = await actionSheetController.getTop();\n\n      if (isActionSheetActive && this.state.isLoggedIn) {\n        window.customFunctions.dismissActionSheet();\n        goBackHistory = false;\n      }\n\n      let isLoadingActive = await loadingController.getTop();\n\n      if (isLoadingActive) {\n        goBackHistory = false;\n\n        if (window.customVariables.isGettingPreviewData) {\n          window.customVariables.stopGettingPreviewData = true;\n        }\n      }\n\n      if (this.state.selectedItems > 0 && this.state.isLoggedIn) {\n        this.clearSelectedItems();\n        goBackHistory = false;\n      }\n\n      let isAlertActive = await alertController.getTop();\n\n      if (isAlertActive && this.state.isLoggedIn) {\n        window.customFunctions.dismissAlert();\n        goBackHistory = false;\n      }\n\n      let origin = window.location.origin;\n\n      if (window.location.href == origin || window.location.href == origin + \"/\" || window.location.href == origin + \"/#\" || window.location.href == origin + \"/#!\" || window.location.href == origin + \"/#/\" || window.location.href == origin + \"/index.html\" || window.location.href == origin + \"/index.html#!/\" || window.location.href == origin + \"/index.html#!\" || window.location.href == origin + \"/index.html#\" || window.location.href == origin + \"/#!/base\" || window.location.href == origin + \"/index.html#!/base\" || window.location.href == origin + \"/#!/shared-in\" || window.location.href == origin + \"/index.html#!/shared-in\" || window.location.href == origin + \"/#!/shared-out\" || window.location.href == origin + \"/index.html#!/shared-out\" || window.location.href == origin + \"/#!/trash\" || window.location.href == origin + \"/index.html#!/trash\" || window.location.href == origin + \"/#!/links\" || window.location.href == origin + \"/index.html#!/links\") {\n        goBackHistory = false;\n      }\n\n      if (goBackHistory) {\n        window.history.back();\n      }\n    });\n  }\n}\nexport async function setupStatusbar(type = \"normal\") {\n  if (Capacitor.isNative) {\n    if (type == \"normal\") {\n      if (this.state.darkMode) {\n        Plugins.StatusBar.setBackgroundColor({\n          color: \"#1F1F1F\"\n        });\n        Plugins.StatusBar.setStyle({\n          style: StatusBarStyle.Dark\n        });\n\n        if (Capacitor.platform == \"android\") {\n          window.NavigationBar.backgroundColorByHexString(\"#1F1F1F\", false);\n        }\n      } else {\n        Plugins.StatusBar.setBackgroundColor({\n          color: \"#ffffff\"\n        });\n        Plugins.StatusBar.setStyle({\n          style: StatusBarStyle.Light\n        });\n\n        if (Capacitor.platform == \"android\") {\n          window.NavigationBar.backgroundColorByHexString(\"#ffffff\", true);\n        }\n      }\n    } else if (type == \"image/video\") {\n      Plugins.StatusBar.setBackgroundColor({\n        color: \"#000000\"\n      });\n      Plugins.StatusBar.setStyle({\n        style: StatusBarStyle.Dark\n      });\n\n      if (Capacitor.platform == \"android\") {\n        window.NavigationBar.backgroundColorByHexString(\"#000000\", false);\n      }\n    } else if (type == \"login/register\") {\n      if (this.state.darkMode) {\n        Plugins.StatusBar.setBackgroundColor({\n          color: \"#121212\"\n        });\n        Plugins.StatusBar.setStyle({\n          style: StatusBarStyle.Dark\n        });\n\n        if (Capacitor.platform == \"android\") {\n          window.NavigationBar.backgroundColorByHexString(\"#121212\", false);\n        }\n      } else {\n        Plugins.StatusBar.setBackgroundColor({\n          color: \"#ffffff\"\n        });\n        Plugins.StatusBar.setStyle({\n          style: StatusBarStyle.Light\n        });\n\n        if (Capacitor.platform == \"android\") {\n          window.NavigationBar.backgroundColorByHexString(\"#ffffff\", true);\n        }\n      }\n    }\n\n    Plugins.StatusBar.setOverlaysWebView({\n      overlay: false\n    });\n  }\n}\nexport async function doSetup() {\n  let getLang = await Plugins.Storage.get({\n    key: \"lang\"\n  });\n  let getDarkMode = await Plugins.Storage.get({\n    key: \"darkMode\"\n  });\n  let getIsLoggedIn = await Plugins.Storage.get({\n    key: \"isLoggedIn\"\n  });\n  let getUserAPIKey = await Plugins.Storage.get({\n    key: \"userAPIKey\"\n  });\n  let getUserEmail = await Plugins.Storage.get({\n    key: \"userEmail\"\n  });\n  let getUserMasterKeys = await Plugins.Storage.get({\n    key: \"userMasterKeys\"\n  });\n  let getUserPublicKey = await Plugins.Storage.get({\n    key: \"userPublicKey\"\n  });\n  let getUserPrivateKey = await Plugins.Storage.get({\n    key: \"userPrivateKey\"\n  });\n  let getOfflineSavedFiles = await Plugins.Storage.get({\n    key: \"offlineSavedFiles\"\n  });\n  let getAPICache = await Plugins.Storage.get({\n    key: \"apiCache\"\n  });\n  let getSettings = await Plugins.Storage.get({\n    key: \"settings\"\n  });\n  let getCachedFiles = await Plugins.Storage.get({\n    key: \"cachedFiles\"\n  });\n  let getCachedFolders = await Plugins.Storage.get({\n    key: \"cachedFolders\"\n  });\n  let getCachedMetadata = await Plugins.Storage.get({\n    key: \"cachedMetadata\"\n  });\n  let getThumbnailCache = await Plugins.Storage.get({\n    key: \"thumbnailCache\"\n  });\n  let getGetThumbnailErrors = await Plugins.Storage.get({\n    key: \"getThumbnailErrors\"\n  });\n  let getCachedAPIItemListRequests = await Plugins.Storage.get({\n    key: \"cachedAPIItemListRequests\"\n  });\n\n  if (getLang.value) {\n    this.setState({\n      lang: getLang.value,\n      mainToolbarTitle: language.get(getLang.value, \"myCloud\")\n    });\n    window.customVariables.lang = getLang.value;\n  } else {\n    let deviceLang = await Plugins.Device.getLanguageCode();\n    let defaultLang = \"en\";\n\n    if (language.isAvailable(deviceLang.value)) {\n      defaultLang = deviceLang.value;\n    }\n\n    this.setState({\n      lang: defaultLang,\n      mainToolbarTitle: language.get(defaultLang, \"myCloud\")\n    });\n    window.customVariables.lang = defaultLang;\n  }\n\n  if (getDarkMode.value == null) {\n    document.body.classList.toggle(\"dark\", true);\n    this.setState({\n      darkMode: true\n    });\n  } else {\n    if (getDarkMode.value == \"true\") {\n      document.body.classList.toggle(\"dark\", true);\n      this.setState({\n        darkMode: true\n      });\n    } else {\n      document.body.classList.toggle(\"dark\", false);\n      this.setState({\n        darkMode: false\n      });\n    }\n  }\n\n  this.setupStatusbar();\n\n  if (getIsLoggedIn.value == null) {\n    return this.showLogin();\n  } else {\n    if (getIsLoggedIn.value == \"true\") {\n      let settings = {\n        onlyWifi: false\n      };\n\n      if (typeof getSettings.value == \"string\") {\n        settings = JSON.parse(getSettings.value);\n      }\n\n      this.setState({\n        userAPIKey: getUserAPIKey.value,\n        userEmail: getUserEmail.value,\n        userMasterKeys: JSON.parse(getUserMasterKeys.value),\n        userPublicKey: getUserPublicKey.value,\n        userPrivateKey: getUserPrivateKey.value,\n        isLoggedIn: true,\n        settings: settings\n      });\n      window.customVariables.userMasterKeys = JSON.parse(getUserMasterKeys.value);\n\n      if (getOfflineSavedFiles.value == null) {\n        window.customVariables.offlineSavedFiles = {};\n      } else {\n        window.customVariables.offlineSavedFiles = JSON.parse(getOfflineSavedFiles.value);\n      }\n\n      if (getAPICache.value == null) {\n        window.customVariables.apiCache = {};\n      } else {\n        window.customVariables.apiCache = JSON.parse(getAPICache.value);\n      }\n\n      if (getCachedFiles.value == null) {\n        window.customVariables.cachedFiles = {};\n      } else {\n        window.customVariables.cachedFiles = JSON.parse(getCachedFiles.value);\n      }\n\n      if (getCachedFolders.value == null) {\n        window.customVariables.cachedFolders = {};\n      } else {\n        window.customVariables.cachedFolders = JSON.parse(getCachedFolders.value);\n      }\n\n      if (getCachedMetadata.value == null) {\n        window.customVariables.cachedMetadata = {};\n      } else {\n        window.customVariables.cachedMetadata = JSON.parse(getCachedMetadata.value);\n      }\n\n      if (getThumbnailCache.value == null) {\n        window.customVariables.thumbnailCache = {};\n      } else {\n        window.customVariables.thumbnailCache = JSON.parse(getThumbnailCache.value);\n      }\n\n      if (getGetThumbnailErrors.value == null) {\n        window.customVariables.getThumbnailErrors = {};\n      } else {\n        window.customVariables.getThumbnailErrors = JSON.parse(getGetThumbnailErrors.value);\n      }\n\n      if (getCachedAPIItemListRequests.value == null) {\n        window.customVariables.cachedAPIItemListRequests = {};\n      } else {\n        window.customVariables.cachedAPIItemListRequests = JSON.parse(getCachedAPIItemListRequests.value);\n      }\n    } else {\n      return this.showLogin();\n    }\n  }\n\n  window.customVariables.apiKey = getUserAPIKey.value;\n  this.updateUserKeys();\n  this.updateUserUsage();\n  clearInterval(window.customVariables.keyUpdateInterval);\n  window.customVariables.keyUpdateInterval = setInterval(() => {\n    this.updateUserKeys();\n  }, 60000);\n  clearInterval(window.customVariables.usageUpdateInterval);\n  window.customVariables.usageUpdateInterval = setInterval(() => {\n    this.updateUserUsage();\n  }, 60000);\n  clearInterval(window.customVariables.getNetworkInfoInterval);\n  window.customVariables.getNetworkInfoInterval = setInterval(() => {\n    window.customFunctions.getNetworkInfo();\n  }, 60000);\n  this.initSocket();\n  return this.routeTo(\"/base\");\n}","map":{"version":3,"sources":["/Users/jan/Documents/filen/app/src/components/setup.js"],"names":["Plugins","StatusBarStyle","Capacitor","modalController","popoverController","actionSheetController","loadingController","alertController","language","setupListeners","isNative","App","addListener","e","goBackHistory","state","searchbarOpen","hideMainSearchbar","isModalActive","getTop","isLoggedIn","window","customFunctions","dismissModal","isPopoverActive","dismissPopover","isActionSheetActive","dismissActionSheet","isLoadingActive","customVariables","isGettingPreviewData","stopGettingPreviewData","selectedItems","clearSelectedItems","isAlertActive","dismissAlert","origin","location","href","history","back","setupStatusbar","type","darkMode","StatusBar","setBackgroundColor","color","setStyle","style","Dark","platform","NavigationBar","backgroundColorByHexString","Light","setOverlaysWebView","overlay","doSetup","getLang","Storage","get","key","getDarkMode","getIsLoggedIn","getUserAPIKey","getUserEmail","getUserMasterKeys","getUserPublicKey","getUserPrivateKey","getOfflineSavedFiles","getAPICache","getSettings","getCachedFiles","getCachedFolders","getCachedMetadata","getThumbnailCache","getGetThumbnailErrors","getCachedAPIItemListRequests","value","setState","lang","mainToolbarTitle","deviceLang","Device","getLanguageCode","defaultLang","isAvailable","document","body","classList","toggle","showLogin","settings","onlyWifi","JSON","parse","userAPIKey","userEmail","userMasterKeys","userPublicKey","userPrivateKey","offlineSavedFiles","apiCache","cachedFiles","cachedFolders","cachedMetadata","thumbnailCache","getThumbnailErrors","cachedAPIItemListRequests","apiKey","updateUserKeys","updateUserUsage","clearInterval","keyUpdateInterval","setInterval","usageUpdateInterval","getNetworkInfoInterval","getNetworkInfo","initSocket","routeTo"],"mappings":"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","sourcesContent":["import { Plugins, StatusBarStyle, Capacitor } from \"@capacitor/core\"\r\nimport { modalController, popoverController, actionSheetController, loadingController, alertController } from \"@ionic/core\"\r\nimport * as language from \"../utils/language\"\r\n\r\nexport function setupListeners(){\r\n    if(Capacitor.isNative){\r\n        Plugins.App.addListener(\"backButton\", async (e) => {\r\n            let goBackHistory = true\r\n\r\n            if(this.state.searchbarOpen){\r\n                this.hideMainSearchbar(false)\r\n\r\n                goBackHistory = false\r\n            }\r\n\r\n            let isModalActive = await modalController.getTop()\r\n\r\n            if(isModalActive && this.state.isLoggedIn){\r\n                window.customFunctions.dismissModal()\r\n\r\n                goBackHistory = false\r\n            }\r\n\r\n            let isPopoverActive = await popoverController.getTop()\r\n\r\n            if(isPopoverActive && this.state.isLoggedIn){\r\n                window.customFunctions.dismissPopover()\r\n\r\n                goBackHistory = false\r\n            }\r\n\r\n            let isActionSheetActive = await actionSheetController.getTop()\r\n\r\n            if(isActionSheetActive && this.state.isLoggedIn){\r\n                window.customFunctions.dismissActionSheet()\r\n\r\n                goBackHistory = false\r\n            }\r\n\r\n            let isLoadingActive = await loadingController.getTop()\r\n\r\n            if(isLoadingActive){\r\n                goBackHistory = false\r\n\r\n                if(window.customVariables.isGettingPreviewData){\r\n                    window.customVariables.stopGettingPreviewData = true\r\n                }\r\n            }\r\n\r\n            if(this.state.selectedItems > 0 && this.state.isLoggedIn){\r\n                this.clearSelectedItems()\r\n\r\n                goBackHistory = false\r\n            }\r\n\r\n            let isAlertActive = await alertController.getTop()\r\n\r\n            if(isAlertActive && this.state.isLoggedIn){\r\n                window.customFunctions.dismissAlert()\r\n\r\n                goBackHistory = false\r\n            }\r\n\r\n            let origin = window.location.origin\r\n\r\n            if(window.location.href == origin \r\n            || window.location.href == origin + \"/\" \r\n            || window.location.href == origin + \"/#\" \r\n            || window.location.href == origin + \"/#!\" \r\n            || window.location.href == origin + \"/#/\"\r\n            || window.location.href == origin + \"/index.html\"\r\n            || window.location.href == origin + \"/index.html#!/\"\r\n            || window.location.href == origin + \"/index.html#!\"\r\n            || window.location.href == origin + \"/index.html#\"\r\n            || window.location.href == origin + \"/#!/base\" \r\n            || window.location.href == origin + \"/index.html#!/base\"\r\n            || window.location.href == origin + \"/#!/shared-in\"\r\n            || window.location.href == origin + \"/index.html#!/shared-in\"\r\n            || window.location.href == origin + \"/#!/shared-out\"\r\n            || window.location.href == origin + \"/index.html#!/shared-out\"\r\n            || window.location.href == origin + \"/#!/trash\"\r\n            || window.location.href == origin + \"/index.html#!/trash\"\r\n            || window.location.href == origin + \"/#!/links\"\r\n            || window.location.href == origin + \"/index.html#!/links\"){\r\n                goBackHistory = false\r\n            }\r\n\r\n            if(goBackHistory){\r\n                window.history.back()\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport async function setupStatusbar(type = \"normal\"){\r\n    if(Capacitor.isNative){\r\n        if(type == \"normal\"){\r\n            if(this.state.darkMode){\r\n                Plugins.StatusBar.setBackgroundColor({\r\n                    color: \"#1F1F1F\"\r\n                })\r\n                \r\n                Plugins.StatusBar.setStyle({\r\n                    style: StatusBarStyle.Dark\r\n                })\r\n\r\n                if(Capacitor.platform == \"android\"){\r\n                    window.NavigationBar.backgroundColorByHexString(\"#1F1F1F\", false)\r\n                }\r\n            }\r\n            else{\r\n                Plugins.StatusBar.setBackgroundColor({\r\n                    color: \"#ffffff\"\r\n                })\r\n                \r\n                Plugins.StatusBar.setStyle({\r\n                    style: StatusBarStyle.Light\r\n                })\r\n\r\n                if(Capacitor.platform == \"android\"){\r\n                    window.NavigationBar.backgroundColorByHexString(\"#ffffff\", true)\r\n                }\r\n            }\r\n        }\r\n        else if(type == \"image/video\"){\r\n            Plugins.StatusBar.setBackgroundColor({\r\n                color: \"#000000\"\r\n            })\r\n            \r\n            Plugins.StatusBar.setStyle({\r\n                style: StatusBarStyle.Dark\r\n            })\r\n\r\n            if(Capacitor.platform == \"android\"){\r\n                window.NavigationBar.backgroundColorByHexString(\"#000000\", false)\r\n            }\r\n        }\r\n        else if(type == \"login/register\"){\r\n            if(this.state.darkMode){\r\n                Plugins.StatusBar.setBackgroundColor({\r\n                    color: \"#121212\"\r\n                })\r\n                \r\n                Plugins.StatusBar.setStyle({\r\n                    style: StatusBarStyle.Dark\r\n                })\r\n\r\n                if(Capacitor.platform == \"android\"){\r\n                    window.NavigationBar.backgroundColorByHexString(\"#121212\", false)\r\n                }\r\n            }\r\n            else{\r\n                Plugins.StatusBar.setBackgroundColor({\r\n                    color: \"#ffffff\"\r\n                })\r\n                \r\n                Plugins.StatusBar.setStyle({\r\n                    style: StatusBarStyle.Light\r\n                })\r\n\r\n                if(Capacitor.platform == \"android\"){\r\n                    window.NavigationBar.backgroundColorByHexString(\"#ffffff\", true)\r\n                }\r\n            }\r\n        }\r\n\r\n        Plugins.StatusBar.setOverlaysWebView({\r\n            overlay: false\r\n        })\r\n    }\r\n}\r\n\r\nexport async function doSetup(){\r\n    let getLang = await Plugins.Storage.get({ key: \"lang\" })\r\n    let getDarkMode = await Plugins.Storage.get({ key: \"darkMode\" })\r\n    let getIsLoggedIn = await Plugins.Storage.get({ key: \"isLoggedIn\" })\r\n    let getUserAPIKey = await Plugins.Storage.get({ key: \"userAPIKey\" })\r\n    let getUserEmail = await Plugins.Storage.get({ key: \"userEmail\" })\r\n    let getUserMasterKeys = await Plugins.Storage.get({ key: \"userMasterKeys\" })\r\n    let getUserPublicKey = await Plugins.Storage.get({ key: \"userPublicKey\" })\r\n    let getUserPrivateKey = await Plugins.Storage.get({ key: \"userPrivateKey\" })\r\n    let getOfflineSavedFiles = await Plugins.Storage.get({ key: \"offlineSavedFiles\" })\r\n    let getAPICache = await Plugins.Storage.get({ key: \"apiCache\" })\r\n    let getSettings = await Plugins.Storage.get({ key: \"settings\" })\r\n    let getCachedFiles = await Plugins.Storage.get({ key: \"cachedFiles\" })\r\n    let getCachedFolders = await Plugins.Storage.get({ key: \"cachedFolders\" })\r\n    let getCachedMetadata = await Plugins.Storage.get({ key: \"cachedMetadata\" })\r\n    let getThumbnailCache = await Plugins.Storage.get({ key: \"thumbnailCache\" })\r\n    let getGetThumbnailErrors = await Plugins.Storage.get({ key: \"getThumbnailErrors\" })\r\n    let getCachedAPIItemListRequests = await Plugins.Storage.get({ key: \"cachedAPIItemListRequests\" })\r\n\r\n    if(getLang.value){\r\n        this.setState({\r\n            lang: getLang.value,\r\n            mainToolbarTitle: language.get(getLang.value, \"myCloud\")\r\n        })\r\n\r\n        window.customVariables.lang = getLang.value\r\n    }\r\n    else{\r\n        let deviceLang = await Plugins.Device.getLanguageCode()\r\n        let defaultLang = \"en\"\r\n\r\n        if(language.isAvailable(deviceLang.value)){\r\n            defaultLang = deviceLang.value\r\n        }\r\n\r\n        this.setState({\r\n            lang: defaultLang,\r\n            mainToolbarTitle: language.get(defaultLang, \"myCloud\")\r\n        })\r\n\r\n        window.customVariables.lang = defaultLang\r\n    }\r\n\r\n    if(getDarkMode.value == null){\r\n        document.body.classList.toggle(\"dark\", true)\r\n\r\n        this.setState({\r\n            darkMode: true\r\n        })\r\n    }\r\n    else{\r\n        if(getDarkMode.value == \"true\"){\r\n            document.body.classList.toggle(\"dark\", true)\r\n\r\n            this.setState({\r\n                darkMode: true\r\n            })\r\n        }\r\n        else{\r\n            document.body.classList.toggle(\"dark\", false)\r\n\r\n            this.setState({\r\n                darkMode: false\r\n            })\r\n        }\r\n    }\r\n\r\n    this.setupStatusbar()\r\n\r\n    if(getIsLoggedIn.value == null){\r\n        return this.showLogin()\r\n    }\r\n    else{\r\n        if(getIsLoggedIn.value == \"true\"){\r\n            let settings = {\r\n                onlyWifi: false\r\n            }\r\n\r\n            if(typeof getSettings.value == \"string\"){\r\n                settings = JSON.parse(getSettings.value)\r\n            }\r\n\r\n            this.setState({\r\n                userAPIKey: getUserAPIKey.value,\r\n                userEmail: getUserEmail.value,\r\n                userMasterKeys: JSON.parse(getUserMasterKeys.value),\r\n                userPublicKey: getUserPublicKey.value,\r\n                userPrivateKey: getUserPrivateKey.value,\r\n                isLoggedIn: true,\r\n                settings: settings\r\n            })\r\n\r\n            window.customVariables.userMasterKeys = JSON.parse(getUserMasterKeys.value)\r\n\r\n            if(getOfflineSavedFiles.value == null){\r\n                window.customVariables.offlineSavedFiles = {}\r\n            }\r\n            else{\r\n                window.customVariables.offlineSavedFiles = JSON.parse(getOfflineSavedFiles.value)\r\n            }\r\n\r\n            if(getAPICache.value == null){\r\n                window.customVariables.apiCache = {}\r\n            }\r\n            else{\r\n                window.customVariables.apiCache = JSON.parse(getAPICache.value)\r\n            }\r\n\r\n            if(getCachedFiles.value == null){\r\n                window.customVariables.cachedFiles = {}\r\n            }\r\n            else{\r\n                window.customVariables.cachedFiles = JSON.parse(getCachedFiles.value)\r\n            }\r\n\r\n            if(getCachedFolders.value == null){\r\n                window.customVariables.cachedFolders = {}\r\n            }\r\n            else{\r\n                window.customVariables.cachedFolders = JSON.parse(getCachedFolders.value)\r\n            }\r\n\r\n            if(getCachedMetadata.value == null){\r\n                window.customVariables.cachedMetadata = {}\r\n            }\r\n            else{\r\n                window.customVariables.cachedMetadata = JSON.parse(getCachedMetadata.value)\r\n            }\r\n\r\n            if(getThumbnailCache.value == null){\r\n                window.customVariables.thumbnailCache = {}\r\n            }\r\n            else{\r\n                window.customVariables.thumbnailCache = JSON.parse(getThumbnailCache.value)\r\n            }\r\n\r\n            if(getGetThumbnailErrors.value == null){\r\n                window.customVariables.getThumbnailErrors = {}\r\n            }\r\n            else{\r\n                window.customVariables.getThumbnailErrors = JSON.parse(getGetThumbnailErrors.value)\r\n            }\r\n\r\n            if(getCachedAPIItemListRequests.value == null){\r\n                window.customVariables.cachedAPIItemListRequests = {}\r\n            }\r\n            else{\r\n                window.customVariables.cachedAPIItemListRequests = JSON.parse(getCachedAPIItemListRequests.value)\r\n            }\r\n        }\r\n        else{\r\n            return this.showLogin()\r\n        }\r\n    }\r\n\r\n    window.customVariables.apiKey = getUserAPIKey.value\r\n\r\n    this.updateUserKeys()\r\n    this.updateUserUsage()\r\n\r\n    clearInterval(window.customVariables.keyUpdateInterval)\r\n\r\n    window.customVariables.keyUpdateInterval = setInterval(() => {\r\n        this.updateUserKeys()\r\n    }, 60000)\r\n\r\n    clearInterval(window.customVariables.usageUpdateInterval)\r\n\r\n    window.customVariables.usageUpdateInterval = setInterval(() => {\r\n        this.updateUserUsage()\r\n    }, 60000)\r\n\r\n    clearInterval(window.customVariables.getNetworkInfoInterval)\r\n\r\n    window.customVariables.getNetworkInfoInterval = setInterval(() => {\r\n        window.customFunctions.getNetworkInfo()\r\n    }, 60000)\r\n\r\n    this.initSocket()\r\n\r\n    return this.routeTo(\"/base\")\r\n}"]},"metadata":{},"sourceType":"module"}