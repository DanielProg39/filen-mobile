{"ast":null,"code":"import _classCallCheck from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _wrapNativeSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";import _regeneratorRuntime from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Capacitor,Plugins,FilesystemDirectory}from\"@capacitor/core\";import{modalController,popoverController,menuController,alertController,loadingController,actionSheetController}from\"@ionic/core\";import*as language from\"../utils/language\";import*as Ionicons from'ionicons/icons';import{isPlatform}from'@ionic/react';import{kMaxLength}from\"buffer\";var utils=require(\"../utils/utils\");var safeAreaInsets=require('safe-area-insets');export function windowRouter(){var _this=this;window.onhashchange=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var routeEx,foldersInRoute,lastFolderInRoute;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(window.currentHref!==window.location.href)){_context.next=10;break;}window.currentHref=window.location.href;_this.setState({currentHref:window.currentHref});routeEx=window.location.hash.split(\"/\");if(!_this.state.isLoggedIn){_context.next=10;break;}if(!(routeEx[1]==\"base\"||routeEx[1]==\"shared-in\"||routeEx[1]==\"shared-out\"||routeEx[1]==\"trash\"||routeEx[1]==\"links\")){_context.next=10;break;}_context.next=8;return _this.updateItemList();case 8:foldersInRoute=routeEx.slice(2);if(foldersInRoute.length>0){lastFolderInRoute=foldersInRoute[foldersInRoute.length-1];if(window.customVariables.cachedFolders[lastFolderInRoute]){_this.setState({mainToolbarTitle:window.customVariables.cachedFolders[lastFolderInRoute].name,showMainToolbarBackButton:true});}else{_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"myCloud\"),showMainToolbarBackButton:false});}}else{if(routeEx[1]==\"shared-in\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"sharedInTitle\"),showMainToolbarBackButton:false});}else if(routeEx[1]==\"shared-out\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"sharedOutTitle\"),showMainToolbarBackButton:false});}else if(routeEx[1]==\"trash\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"trashTitle\"),showMainToolbarBackButton:false});}else if(routeEx[1]==\"links\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"linksTitle\"),showMainToolbarBackButton:false});}else{_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"myCloud\"),showMainToolbarBackButton:false});}}case 10:case\"end\":return _context.stop();}}},_callee);}));}export function setupWindowFunctions(){var _this2=this;window.$=undefined;var jQueryScript=document.createElement(\"script\");jQueryScript.type=\"text/javascript\";jQueryScript.src=\"assets/jquery.js\";document.getElementsByTagName(\"head\")[0].appendChild(jQueryScript);var pdfJsScript=document.createElement(\"script\");pdfJsScript.type=\"text/javascript\";pdfJsScript.src=\"assets/pdf/build/pdf.js\";document.getElementsByTagName(\"head\")[0].appendChild(pdfJsScript);window.customFunctions={};window.customVariables={};window.customVariables.itemList=[];window.customVariables.lang=this.state.lang;window.customVariables.cachedFolders={};window.customVariables.cachedFiles={};window.customVariables.cachedMetadata={};window.customVariables.keyUpdateInterval=undefined;window.customVariables.usageUpdateInterval=undefined;window.customVariables.apiKey=\"\";window.customVariables.uploadSemaphore=new utils.Semaphore(3);window.customVariables.uploadChunkSemaphore=new utils.Semaphore(5);window.customVariables.downloadSemaphore=new utils.Semaphore(5);window.customVariables.downloadChunkSemaphore=new utils.Semaphore(30);window.customVariables.shareItemSemaphore=new utils.Semaphore(4);window.customVariables.decryptShareItemSemaphore=new utils.Semaphore(128);window.customVariables.uploads={};window.customVariables.downloads={};window.customVariables.reloadContentAfterUploadTimeout=undefined;window.customVariables.offlineSavedFiles={};window.customVariables.urlCreator=window.URL||window.webkitURL;window.customVariables.currentPreviewURL=undefined;window.customVariables.reloadAfterActionTimeout=undefined;window.customVariables.nextNativeToastAllowed=Math.floor(+new Date()/1000);window.customVariables.apiCache={};window.customVariables.selectLangInterval=undefined;window.customVariables.stoppedUploads={};window.customVariables.stoppedDownloads={};window.customVariables.stoppedUploadsDone={};window.customVariables.stoppedDownloadsDone={};window.customVariables.lastCachedItemsLength=undefined;window.customVariables.lastAPICacheLength=undefined;window.customVariables.thumbnailCache={};window.customVariables.thumbnailBlobCache={};window.customVariables.currentThumbnailURL=undefined;window.customVariables.lastThumbnailCacheLength=undefined;window.customVariables.thumbnailSemaphore=new utils.Semaphore(2);window.customVariables.updateItemsSemaphore=new utils.Semaphore(1);window.customVariables.getNetworkInfoInterval=undefined;window.customVariables.networkStatus=undefined;window.customVariables.orderBy=\"nameAsc\";window.customVariables.getThumbnailErrors={};window.customVariables.lastGetThumbnailErrorsLength=undefined;window.customVariables.scrollToIndex={};window.customVariables.mainSearchbarTimeout=undefined;window.customVariables.mainSearchbarInterval=undefined;window.customVariables.lastMainSearchbarTerm=\"\";window.customVariables.userMasterKeys=[];window.customVariables.isGettingPreviewData=false;window.customVariables.stopGettingPreviewData=false;window.customVariables.cachedAPIItemListRequests={};clearInterval(window.customVariables.mainSearchbarInterval);window.customVariables.mainSearchbarInterval=setInterval(function(){if(document.getElementById(\"main-searchbar\")!==null){var term=document.getElementById(\"main-searchbar\").value.trim();if(typeof term==\"string\"){if(term.length>0){if(term!==window.customVariables.lastMainSearchbarTerm){window.customVariables.lastMainSearchbarTerm=term;clearTimeout(window.customVariables.mainSearchbarTimeout);window.customVariables.mainSearchbarTimeout=setTimeout(function(){_this2.setMainSearchTerm(term);},250);}}else{clearTimeout(window.customVariables.mainSearchbarTimeout);_this2.setMainSearchTerm(\"\");}}else{clearTimeout(window.customVariables.mainSearchbarTimeout);_this2.setMainSearchTerm(\"\");}}else{clearTimeout(window.customVariables.mainSearchbarTimeout);}},100);window.onresize=function(){_this2.setState({windowHeight:window.innerHeight,windowWidth:window.innerWidth});};document.onclick=function(e){return window.customFunctions.togglePreviewHeader(e);};window.customFunctions.isPlatform=isPlatform;window.customFunctions.safeAreaInsets=safeAreaInsets;window.customFunctions.togglePreviewHeader=function(e){if(typeof e.target==\"undefined\"){return;}if(e.target.innerHTML.indexOf(\"<ion-icon\")!==-1){return false;}if(document.getElementsByClassName(\"preview-header-hidden\").length>0){var header=document.getElementsByClassName(\"preview-header-hidden\")[0];if(header.style.display==\"none\"){header.style.display=\"block\";}else{header.style.display=\"none\";}}};window.customFunctions.getNetworkInfo=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Plugins.Network.getStatus();case 3:window.customVariables.networkStatus=_context2.sent;_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));window.customFunctions.saveOfflineSavedFiles=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Plugins.Storage.set({key:\"offlineSavedFiles\",value:JSON.stringify(window.customVariables.offlineSavedFiles)});case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));window.customFunctions.saveGetThumbnailErrors=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var length;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(typeof window.customVariables.lastGetThumbnailErrorsLength!==\"undefined\")){_context4.next=8;break;}length=JSON.stringify(window.customVariables.getThumbnailErrors);length=length.length;if(!(length==window.customVariables.lastGetThumbnailErrorsLength)){_context4.next=7;break;}return _context4.abrupt(\"return\",false);case 7:window.customVariables.lastGetThumbnailErrorsLength=length;case 8:_context4.prev=8;_context4.next=11;return Plugins.Storage.set({key:\"getThumbnailErrors\",value:JSON.stringify(window.customVariables.getThumbnailErrors)});case 11:_context4.next=16;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](8);console.log(_context4.t0);case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[8,13]]);}));window.customFunctions.saveAPICache=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var length;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(typeof window.customVariables.lastAPICacheLength!==\"undefined\")){_context5.next=8;break;}length=JSON.stringify(window.customVariables.apiCache);length=length.length;if(!(length==window.customVariables.lastAPICacheLength)){_context5.next=7;break;}return _context5.abrupt(\"return\",false);case 7:window.customVariables.lastAPICacheLength=length;case 8:_context5.prev=8;_context5.next=11;return Plugins.Storage.set({key:\"apiCache\",value:JSON.stringify(window.customVariables.apiCache)});case 11:_context5.next=16;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](8);console.log(_context5.t0);case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[8,13]]);}));window.customFunctions.saveThumbnailCache=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var length;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(typeof window.customVariables.lastThumbnailCacheLength!==\"undefined\")){_context6.next=8;break;}length=JSON.stringify(window.customVariables.thumbnailCache);length=length.length;if(!(length==window.customVariables.lastThumbnailCacheLength)){_context6.next=7;break;}return _context6.abrupt(\"return\",false);case 7:window.customVariables.lastThumbnailCacheLength=length;case 8:_context6.prev=8;_context6.next=11;return Plugins.Storage.set({key:\"thumbnailCache\",value:JSON.stringify(window.customVariables.thumbnailCache)});case 11:_context6.next=16;break;case 13:_context6.prev=13;_context6.t0=_context6[\"catch\"](8);console.log(_context6.t0);case 16:case\"end\":return _context6.stop();}}},_callee6,null,[[8,13]]);}));window.customFunctions.saveCachedItems=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var length;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(typeof window.customVariables.lastCachedItemsLength!==\"undefined\")){_context7.next=8;break;}length=JSON.stringify(window.customVariables.cachedFiles)+JSON.stringify(window.customVariables.cachedFolders);length=length.length;if(!(length==window.customVariables.lastCachedItemsLength)){_context7.next=7;break;}return _context7.abrupt(\"return\",false);case 7:window.customVariables.lastCachedItemsLength=length;case 8:_context7.prev=8;_context7.next=11;return Plugins.Storage.set({key:\"cachedFiles\",value:JSON.stringify(window.customVariables.cachedFiles)});case 11:_context7.next=13;return Plugins.Storage.set({key:\"cachedFolders\",value:JSON.stringify(window.customVariables.cachedFolders)});case 13:_context7.next=18;break;case 15:_context7.prev=15;_context7.t0=_context7[\"catch\"](8);console.log(_context7.t0);case 18:case\"end\":return _context7.stop();}}},_callee7,null,[[8,15]]);}));window.customFunctions.dismissActionSheet=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var all,actionSheet,_args8=arguments;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:all=_args8.length>0&&_args8[0]!==undefined?_args8[0]:false;if(!all){_context8.next=11;break;}_context8.prev=2;_context8.next=5;return actionSheetController.dismiss();case 5:return _context8.abrupt(\"return\",true);case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](2);return _context8.abrupt(\"return\",console.log(_context8.t0));case 11:_context8.prev=11;_context8.next=14;return actionSheetController.getTop();case 14:actionSheet=_context8.sent;if(!(typeof actionSheet!==\"undefined\")){_context8.next=17;break;}return _context8.abrupt(\"return\",actionSheet.dismiss());case 17:return _context8.abrupt(\"return\",true);case 20:_context8.prev=20;_context8.t1=_context8[\"catch\"](11);return _context8.abrupt(\"return\",console.log(_context8.t1));case 23:case\"end\":return _context8.stop();}}},_callee8,null,[[2,8],[11,20]]);}));window.customFunctions.dismissPopover=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var all,popover,_args9=arguments;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:all=_args9.length>0&&_args9[0]!==undefined?_args9[0]:false;if(!all){_context9.next=11;break;}_context9.prev=2;_context9.next=5;return popoverController.dismiss();case 5:return _context9.abrupt(\"return\",true);case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](2);return _context9.abrupt(\"return\",console.log(_context9.t0));case 11:_context9.prev=11;_context9.next=14;return popoverController.getTop();case 14:popover=_context9.sent;if(!(typeof popover!==\"undefined\")){_context9.next=17;break;}return _context9.abrupt(\"return\",popover.dismiss());case 17:return _context9.abrupt(\"return\",true);case 20:_context9.prev=20;_context9.t1=_context9[\"catch\"](11);return _context9.abrupt(\"return\",console.log(_context9.t1));case 23:case\"end\":return _context9.stop();}}},_callee9,null,[[2,8],[11,20]]);}));window.customFunctions.dismissModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var all,modal,_args10=arguments;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:all=_args10.length>0&&_args10[0]!==undefined?_args10[0]:false;if(!all){_context10.next=11;break;}_context10.prev=2;_context10.next=5;return modalController.dismiss();case 5:return _context10.abrupt(\"return\",true);case 8:_context10.prev=8;_context10.t0=_context10[\"catch\"](2);return _context10.abrupt(\"return\",console.log(_context10.t0));case 11:_context10.prev=11;_context10.next=14;return modalController.getTop();case 14:modal=_context10.sent;if(!(typeof modal!==\"undefined\")){_context10.next=17;break;}return _context10.abrupt(\"return\",modal.dismiss());case 17:return _context10.abrupt(\"return\",true);case 20:_context10.prev=20;_context10.t1=_context10[\"catch\"](11);return _context10.abrupt(\"return\",console.log(_context10.t1));case 23:case\"end\":return _context10.stop();}}},_callee10,null,[[2,8],[11,20]]);}));window.customFunctions.dismissLoader=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var all,loader,_args11=arguments;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:all=_args11.length>0&&_args11[0]!==undefined?_args11[0]:false;if(!all){_context11.next=11;break;}_context11.prev=2;_context11.next=5;return loadingController.dismiss();case 5:return _context11.abrupt(\"return\",true);case 8:_context11.prev=8;_context11.t0=_context11[\"catch\"](2);return _context11.abrupt(\"return\",console.log(_context11.t0));case 11:_context11.prev=11;_context11.next=14;return loadingController.getTop();case 14:loader=_context11.sent;if(!(typeof loader!==\"undefined\")){_context11.next=17;break;}return _context11.abrupt(\"return\",loader.dismiss());case 17:return _context11.abrupt(\"return\",true);case 20:_context11.prev=20;_context11.t1=_context11[\"catch\"](11);return _context11.abrupt(\"return\",console.log(_context11.t1));case 23:case\"end\":return _context11.stop();}}},_callee11,null,[[2,8],[11,20]]);}));window.customFunctions.dismissAlert=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var all,alert,_args12=arguments;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:all=_args12.length>0&&_args12[0]!==undefined?_args12[0]:false;if(!all){_context12.next=11;break;}_context12.prev=2;_context12.next=5;return alertController.dismiss();case 5:return _context12.abrupt(\"return\",true);case 8:_context12.prev=8;_context12.t0=_context12[\"catch\"](2);return _context12.abrupt(\"return\",console.log(_context12.t0));case 11:_context12.prev=11;_context12.next=14;return alertController.getTop();case 14:alert=_context12.sent;if(!(typeof alert!==\"undefined\")){_context12.next=17;break;}return _context12.abrupt(\"return\",alert.dismiss());case 17:return _context12.abrupt(\"return\",true);case 20:_context12.prev=20;_context12.t1=_context12[\"catch\"](11);return _context12.abrupt(\"return\",console.log(_context12.t1));case 23:case\"end\":return _context12.stop();}}},_callee12,null,[[2,8],[11,20]]);}));window.customFunctions.selectAllItems=function(){var items=[];for(var i=0;i<_this2.state.itemList.length;i++){var item=_this2.state.itemList[i];item.selected=true;items.push(item);}_this2.setState({itemList:items,selectedItems:items.length});return window.customFunctions.dismissPopover();};window.customFunctions.unselectAllItems=function(){var items=[];for(var i=0;i<_this2.state.itemList.length;i++){var item=_this2.state.itemList[i];item.selected=false;items.push(item);}_this2.setState({itemList:items,selectedItems:0});return window.customFunctions.dismissPopover();};window.customFunctions.refreshItemList=function(){_this2.updateItemList();return window.customFunctions.dismissPopover();};window.customFunctions.hideSidebarMenu=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var mainMenu;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return menuController.get(\"sideBarMenu\");case 2:mainMenu=_context13.sent;return _context13.abrupt(\"return\",mainMenu.close());case 4:case\"end\":return _context13.stop();}}},_callee13);}));window.customFunctions.openRegisterModal=function(){return _this2.showRegister();};window.customFunctions.doLogout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return Plugins.Storage.set({key:\"isLoggedIn\",value:\"false\"});case 2:_context14.next=4;return Plugins.Storage.set({key:\"userAPIKey\",value:\"\"});case 4:_context14.next=6;return Plugins.Storage.set({key:\"userEmail\",value:\"\"});case 6:_context14.next=8;return Plugins.Storage.set({key:\"userMasterKeys\",value:JSON.stringify([])});case 8:_context14.next=10;return Plugins.Storage.set({key:\"userPublicKey\",value:\"\"});case 10:_context14.next=12;return Plugins.Storage.set({key:\"userPrivateKey\",value:\"\"});case 12:_this2.setState({isLoggedIn:false});return _context14.abrupt(\"return\",_this2.showLogin());case 14:case\"end\":return _context14.stop();}}},_callee14);}));window.customFunctions.doLogin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){var email,password,twoFactorKey,alert,loading,res,_alert,_alert2,_alert4,_alert5,_alert3;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:email=document.getElementById(\"login-email\").value;password=document.getElementById(\"login-password\").value;twoFactorKey=document.getElementById(\"login-2fa\").value;if(!(!email||!password)){_context15.next=8;break;}_context15.next=6;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginInvalidInputs\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 6:alert=_context15.sent;return _context15.abrupt(\"return\",alert.present());case 8:if(twoFactorKey.length==0){twoFactorKey=\"XXXXXX\";}_context15.next=11;return loadingController.create({message:\"\"});case 11:loading=_context15.sent;loading.present();_context15.prev=13;_context15.next=16;return utils.apiRequest(\"POST\",\"/v1/login\",{email:email,password:password,twoFactorKey:twoFactorKey});case 16:res=_context15.sent;_context15.next=29;break;case 19:_context15.prev=19;_context15.t0=_context15[\"catch\"](13);document.getElementById(\"login-password\").value=\"\";document.getElementById(\"login-2fa\").value=\"\";console.log(_context15.t0);window.customFunctions.dismissLoader();_context15.next=27;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"apiRequestError\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 27:_alert=_context15.sent;return _context15.abrupt(\"return\",_alert.present());case 29:if(res.status){_context15.next=58;break;}if(!(res.message==\"Please enter your Two Factor Authentication code.\")){_context15.next=39;break;}window.customFunctions.dismissLoader();document.getElementById(\"login-2fa-container\").style.display=\"block\";_context15.next=35;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginWith2FACode\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 35:_alert2=_context15.sent;return _context15.abrupt(\"return\",_alert2.present());case 39:document.getElementById(\"login-password\").value=\"\";document.getElementById(\"login-2fa\").value=\"\";window.customFunctions.dismissLoader();if(!(res.message==\"Account not yet activated.\")){_context15.next=49;break;}_context15.next=45;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginAccountNotActivated\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 45:_alert4=_context15.sent;return _context15.abrupt(\"return\",_alert4.present());case 49:if(!(res.message==\"Account not found.\")){_context15.next=54;break;}_context15.next=52;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginAccountNotFound\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 52:_alert5=_context15.sent;return _context15.abrupt(\"return\",_alert5.present());case 54:_context15.next=56;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginWrongCredentials\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 56:_alert3=_context15.sent;return _context15.abrupt(\"return\",_alert3.present());case 58:_context15.next=60;return Plugins.Storage.set({key:\"isLoggedIn\",value:\"true\"});case 60:_context15.next=62;return Plugins.Storage.set({key:\"userAPIKey\",value:res.data.apiKey});case 62:_context15.next=64;return Plugins.Storage.set({key:\"userEmail\",value:email});case 64:_context15.next=66;return Plugins.Storage.set({key:\"userMasterKeys\",value:JSON.stringify([utils.hashFn(password)])});case 66:window.customFunctions.dismissLoader(true);window.customFunctions.dismissModal(true);window.customFunctions.dismissLoader();document.getElementById(\"login-email\").value=\"\";document.getElementById(\"login-password\").value=\"\";document.getElementById(\"login-2fa\").value=\"\";return _context15.abrupt(\"return\",_this2.doSetup());case 73:case\"end\":return _context15.stop();}}},_callee15,null,[[13,19]]);}));window.customFunctions.doRegister=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var email,password,passwordRepeat,_alert6,loading,res,_alert7,message,_alert8,alert;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:email=document.getElementById(\"register-email\").value;password=document.getElementById(\"register-password\").value;passwordRepeat=document.getElementById(\"register-password-repeat\").value;if(!(!email||!password||!passwordRepeat)){_context16.next=8;break;}_context16.next=6;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"registerInvalidInputs\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 6:_alert6=_context16.sent;return _context16.abrupt(\"return\",_alert6.present());case 8:_context16.next=10;return loadingController.create({message:\"\"});case 10:loading=_context16.sent;loading.present();_context16.prev=12;_context16.next=15;return utils.apiRequest(\"POST\",\"/v1/register\",{email:email,password:password,passwordRepeat:passwordRepeat});case 15:res=_context16.sent;_context16.next=28;break;case 18:_context16.prev=18;_context16.t0=_context16[\"catch\"](12);document.getElementById(\"register-password\").value=\"\";document.getElementById(\"register-password-repeat\").value=\"\";console.log(_context16.t0);window.customFunctions.dismissLoader();_context16.next=26;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"apiRequestError\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 26:_alert7=_context16.sent;return _context16.abrupt(\"return\",_alert7.present());case 28:if(res.status){_context16.next=38;break;}document.getElementById(\"register-password\").value=\"\";document.getElementById(\"register-password-repeat\").value=\"\";window.customFunctions.dismissLoader();message=\"\";if(res.message.toLowerCase().indexOf(\"invalid email\")!==-1||res.message.toLowerCase().indexOf(\"invalid password\")!==-1||res.message.toLowerCase().indexOf(\"invalid email\")!==-1){message=language.get(_this2.state.lang,\"registerInvalidFields\");}else if(res.message.toLowerCase().indexOf(\"your password needs to be at least 10 characters long\")!==-1){message=language.get(_this2.state.lang,\"registerPasswordAtLeast10Chars\");}else if(res.message.toLowerCase().indexOf(\"passwords do not match\")!==-1){message=language.get(_this2.state.lang,\"registerPasswordsDoNotMatch\");}else if(res.message.toLowerCase().indexOf(\"invalid email\")!==-1){message=language.get(_this2.state.lang,\"registerInvalidEmail\");}else if(res.message.toLowerCase().indexOf(\"database error\")!==-1){message=language.get(_this2.state.lang,\"apiRequestError\");}else if(res.message.toLowerCase().indexOf(\"this email is already registered\")!==-1){message=language.get(_this2.state.lang,\"registerEmailAlreadyRegistered\");}else if(res.message.toLowerCase().indexOf(\"we could not send an email at this time, please try again later\")!==-1){message=language.get(_this2.state.lang,\"registerCouldNotSendEmail\");}_context16.next=36;return alertController.create({header:\"\",subHeader:\"\",message:message,buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 36:_alert8=_context16.sent;return _context16.abrupt(\"return\",_alert8.present());case 38:document.getElementById(\"register-email\").value=\"\";document.getElementById(\"register-password\").value=\"\";document.getElementById(\"register-password-repeat\").value=\"\";window.customFunctions.dismissLoader();_context16.next=44;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"registerSuccess\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 44:alert=_context16.sent;return _context16.abrupt(\"return\",alert.present());case 46:case\"end\":return _context16.stop();}}},_callee16,null,[[12,18]]);}));window.customFunctions.openSettingsModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(){return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:return _context17.abrupt(\"return\",_this2.openSettingsModal());case 1:case\"end\":return _context17.stop();}}},_callee17);}));window.customFunctions.openEncryptionModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var appLang,appDarkMode,modalId,modal;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:appLang=_this2.state.lang;appDarkMode=_this2.state.darkMode;modalId=\"encryption-modal-\"+utils.generateRandomClassName();customElements.define(modalId,/*#__PURE__*/function(_HTMLElement){_inherits(ModalContent,_HTMLElement);var _super=_createSuper(ModalContent);function ModalContent(){_classCallCheck(this,ModalContent);return _super.apply(this,arguments);}_createClass(ModalContent,[{key:\"connectedCallback\",value:function connectedCallback(){this.innerHTML=\"\\n                    <ion-header>\\n                        <ion-toolbar>\\n                            <ion-buttons slot=\\\"start\\\">\\n                                <ion-button onClick=\\\"window.customFunctions.dismissModal()\\\">\\n                                    <ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\"></ion-icon>\\n                                </ion-button>\\n                            </ion-buttons>\\n                            <ion-title>\\n                                \"+language.get(appLang,\"encryption\")+\"\\n                            </ion-title>\\n                        </ion-toolbar>\\n                    </ion-header>\\n                    <ion-content style=\\\"--background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\" fullscreen>\\n                        <ion-list>\\n                            <ion-item-divider style=\\\"--background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\">\\n                                <ion-label>\\n                                    \"+language.get(appLang,\"encryptionModalHeader\")+\"\\n                                </ion-label>\\n                            </ion-item-divider>\\n                            <ion-item lines=\\\"none\\\" style=\\\"padding-top: 10px;\\\">\\n                                \"+language.get(appLang,\"encryptionModalFirstText\")+\"\\n                            </ion-item>\\n                            <ion-item-divider style=\\\"padding-top: 15px; --background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\">\\n                                <ion-label>\\n                                    \"+language.get(appLang,\"encryptionModalHeaderHowItWorks\")+\"\\n                                </ion-label>\\n                            </ion-item-divider>\\n                            <ion-item lines=\\\"none\\\" style=\\\"padding-top: 10px;\\\">\\n                                \"+language.get(appLang,\"encryptionModalHowItWorksText\")+\"\\n                            </ion-item>\\n                        </ion-list>\\n                    </ion-content>\\n                \";}}]);return ModalContent;}(/*#__PURE__*/_wrapNativeSuper(HTMLElement)));_context18.next=6;return modalController.create({component:modalId,swipeToClose:true,showBackdrop:false,backdropDismiss:false,cssClass:\"modal-fullscreen\"});case 6:modal=_context18.sent;return _context18.abrupt(\"return\",modal.present());case 8:case\"end\":return _context18.stop();}}},_callee18);}));window.customFunctions.openWebsiteModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(){var actionSheet;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.next=2;return actionSheetController.create({header:language.get(_this2.state.lang,\"website\"),buttons:[{text:language.get(_this2.state.lang,\"website\"),icon:Ionicons.globe,handler:function handler(){window.open(\"https://filen.io/\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"onlineFM\"),icon:Ionicons.grid,handler:function handler(){window.open(\"https://filen.io/my-account/file-manager/default\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"cancel\"),icon:\"close\",role:\"cancel\"}]});case 2:actionSheet=_context19.sent;return _context19.abrupt(\"return\",actionSheet.present());case 4:case\"end\":return _context19.stop();}}},_callee19);}));window.customFunctions.openHelpModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var actionSheet;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:_context20.next=2;return actionSheetController.create({header:language.get(_this2.state.lang,\"help\"),buttons:[{text:language.get(_this2.state.lang,\"support\"),icon:Ionicons.helpBuoyOutline,handler:function handler(){window.open(\"https://support.filen.io/\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"faq\"),icon:Ionicons.informationCircle,handler:function handler(){window.open(\"https://filen.io/faq\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"tos\"),icon:Ionicons.informationCircleOutline,handler:function handler(){window.open(\"https://filen.io/terms\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"privacyPolicy\"),icon:Ionicons.informationCircleOutline,handler:function handler(){window.open(\"https://filen.io/privacy\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"cancel\"),icon:\"close\",role:\"cancel\"}]});case 2:actionSheet=_context20.sent;return _context20.abrupt(\"return\",actionSheet.present());case 4:case\"end\":return _context20.stop();}}},_callee20);}));window.customFunctions.queueFileUpload=this.queueFileUpload;window.customFunctions.queueFileDownload=this.queueFileDownload;window.customFunctions.openItemActionSheetFromJSON=function(itemJSON){var item=JSON.parse(window.atob(itemJSON));return _this2.spawnItemActionSheet(item);};window.customFunctions.moveSelectedItems=function(){return _this2.moveSelectedItems();};window.customFunctions.trashSelectedItems=function(){return _this2.trashSelectedItems();};window.customFunctions.restoreSelectedItems=function(){return _this2.restoreSelectedItems();};window.customFunctions.removeSelectedItemsFromSharedIn=function(){return _this2.removeSelectedItemsFromSharedIn();};window.customFunctions.stopSharingSelectedItems=function(){return _this2.stopSharingSelectedItems();};window.customFunctions.downloadSelectedItems=function(){return _this2.downloadSelectedItems();};window.customFunctions.storeSelectedItemsOffline=function(){return _this2.storeSelectedItemsOffline();};window.customFunctions.shareSelectedItems=function(){return _this2.shareSelectedItems();};window.customFunctions.settingsToggleDarkMode=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:if(!_this2.state.darkMode){_context21.next=7;break;}_context21.next=3;return Plugins.Storage.set({key:\"darkMode\",value:\"false\"});case 3:document.getElementById(\"settings-dark-mode-toggle\").checked=false;return _context21.abrupt(\"return\",_this2.setState({darkMode:false},function(){document.location.href=\"index.html\";}));case 7:_context21.next=9;return Plugins.Storage.set({key:\"darkMode\",value:\"true\"});case 9:document.getElementById(\"settings-dark-mode-toggle\").checked=true;return _context21.abrupt(\"return\",_this2.setState({darkMode:true},function(){document.location.href=\"index.html\";}));case 11:case\"end\":return _context21.stop();}}},_callee21);}));window.customFunctions.loginToggleDarkMode=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(){return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:if(!_this2.state.darkMode){_context22.next=6;break;}_context22.next=3;return Plugins.Storage.set({key:\"darkMode\",value:\"false\"});case 3:return _context22.abrupt(\"return\",_this2.setState({darkMode:false},function(){document.location.href=\"index.html\";}));case 6:_context22.next=8;return Plugins.Storage.set({key:\"darkMode\",value:\"true\"});case 8:return _context22.abrupt(\"return\",_this2.setState({darkMode:true},function(){document.location.href=\"index.html\";}));case 9:case\"end\":return _context22.stop();}}},_callee22);}));window.customFunctions.saveSettings=/*#__PURE__*/function(){var _ref23=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(newSettings){return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:_context23.next=2;return Plugins.Storage.set({key:\"settings\",value:JSON.stringify(newSettings)});case 2:return _context23.abrupt(\"return\",_this2.setState({settings:newSettings}));case 3:case\"end\":return _context23.stop();}}},_callee23);}));return function(_x){return _ref23.apply(this,arguments);};}();window.customFunctions.toggleOnlyWifi=function(){var newSettings=_this2.state.settings;var newVal=!newSettings.onlyWifi;newSettings.onlyWifi=newVal;document.getElementById(\"settings-only-wifi-toggle\").checked=!newVal;return window.customFunctions.saveSettings(newSettings);};window.customFunctions.logoutUser=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(){return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:_context24.next=2;return Plugins.Storage.remove({key:\"isLoggedIn\"});case 2:_context24.next=4;return Plugins.Storage.remove({key:\"userAPIKey\"});case 4:_context24.next=6;return Plugins.Storage.remove({key:\"userEmail\"});case 6:_context24.next=8;return Plugins.Storage.remove({key:\"userMasterKeys\"});case 8:_context24.next=10;return Plugins.Storage.remove({key:\"userPublicKey\"});case 10:_context24.next=12;return Plugins.Storage.remove({key:\"userPrivateKey\"});case 12:_context24.next=14;return Plugins.Storage.remove({key:\"offlineSavedFiles\"});case 14:_context24.next=16;return Plugins.Storage.remove({key:\"apiCache\"});case 16:return _context24.abrupt(\"return\",document.location.href=\"index.html\");case 17:case\"end\":return _context24.stop();}}},_callee24);}));window.customFunctions.doLogout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(){var alert;return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:_context25.next=2;return alertController.create({header:language.get(_this2.state.lang,\"logoutAlertHeader\"),message:language.get(_this2.state.lang,\"logoutConfirmation\"),buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function handler(){return window.customFunctions.logoutUser();}}]});case 2:alert=_context25.sent;return _context25.abrupt(\"return\",alert.present());case 4:case\"end\":return _context25.stop();}}},_callee25);}));window.customFunctions.emptyTrash=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee27(){var alert;return _regeneratorRuntime.wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:_context27.next=2;return alertController.create({header:language.get(_this2.state.lang,\"emptyTrashHeader\"),message:language.get(_this2.state.lang,\"emptyTrashWarning\"),buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function(){var _handler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee26(){var loading,res;return _regeneratorRuntime.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_context26.next=2;return loadingController.create({message:\"\"});case 2:loading=_context26.sent;loading.present();_context26.prev=4;_context26.next=7;return utils.apiRequest(\"POST\",\"/v1/trash/empty\",{apiKey:_this2.state.userAPIKey});case 7:res=_context26.sent;_context26.next=15;break;case 10:_context26.prev=10;_context26.t0=_context26[\"catch\"](4);console.log(_context26.t0);loading.dismiss();return _context26.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\")));case 15:if(res.status){_context26.next=19;break;}console.log(res.message);loading.dismiss();return _context26.abrupt(\"return\",_this2.spawnToast(res.message));case 19:loading.dismiss();_this2.updateItemList();return _context26.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"trashEmptied\")));case 22:case\"end\":return _context26.stop();}}},_callee26,null,[[4,10]]);}));function handler(){return _handler.apply(this,arguments);}return handler;}()}]});case 2:alert=_context27.sent;return _context27.abrupt(\"return\",alert.present());case 4:case\"end\":return _context27.stop();}}},_callee27);}));window.customFunctions.changeItemColor=/*#__PURE__*/function(){var _ref27=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee28(itemJSON,color){var item,loading,res;return _regeneratorRuntime.wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:item=JSON.parse(window.atob(itemJSON));_context28.next=3;return loadingController.create({message:\"\"});case 3:loading=_context28.sent;loading.present();_context28.prev=5;_context28.next=8;return utils.apiRequest(\"POST\",\"/v1/dir/color/change\",{apiKey:_this2.state.userAPIKey,uuid:item.uuid,color:color});case 8:res=_context28.sent;_context28.next=16;break;case 11:_context28.prev=11;_context28.t0=_context28[\"catch\"](5);console.log(_context28.t0);loading.dismiss();return _context28.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\")));case 16:if(res.status){_context28.next=20;break;}console.log(res.message);loading.dismiss();return _context28.abrupt(\"return\",_this2.spawnToast(res.message));case 20:loading.dismiss();_context28.prev=21;_context28.next=24;return _this2.updateItemList();case 24:_context28.next=29;break;case 26:_context28.prev=26;_context28.t1=_context28[\"catch\"](21);console.log(_context28.t1);case 29:return _context28.abrupt(\"return\",window.customFunctions.dismissModal());case 30:case\"end\":return _context28.stop();}}},_callee28,null,[[5,11],[21,26]]);}));return function(_x2,_x3){return _ref27.apply(this,arguments);};}();window.customFunctions.editItemPublicLink=/*#__PURE__*/function(){var _ref28=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee34(itemJSON,type){var isEdit,currentLinkUUID,item,linkUUID,loading,expires,password,downloadBtn,res,removeFolderLink,editFolderLink,createFolderLink,_args34=arguments;return _regeneratorRuntime.wrap(function _callee34$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:isEdit=_args34.length>2&&_args34[2]!==undefined?_args34[2]:false;currentLinkUUID=_args34.length>3&&_args34[3]!==undefined?_args34[3]:\"\";item=JSON.parse(window.atob(itemJSON));linkUUID=utils.uuidv4();if(isEdit&&typeof currentLinkUUID==\"string\"){if(currentLinkUUID.length>1){linkUUID=currentLinkUUID;}}_context34.next=7;return loadingController.create({message:\"\"});case 7:loading=_context34.sent;loading.present();expires=\"never\";if(typeof document.getElementById(\"public-link-expires-select\").value==\"string\"){expires=document.getElementById(\"public-link-expires-select\").value;}password=\"empty\";if(typeof document.getElementById(\"public-link-password-input\").value==\"string\"){if(document.getElementById(\"public-link-password-input\").value){password=document.getElementById(\"public-link-password-input\").value;}}downloadBtn=\"enable\";if(document.getElementById(\"public-link-enable-download-btn-toggle\")!==null){if(!document.getElementById(\"public-link-enable-download-btn-toggle\").checked){downloadBtn=\"disable\";}}if(!(item.type==\"file\")){_context34.next=38;break;}_context34.prev=16;_context34.next=19;return utils.apiRequest(\"POST\",\"/v1/link/edit\",{apiKey:_this2.state.userAPIKey,uuid:linkUUID,fileUUID:item.uuid,expiration:expires,password:password,passwordHashed:utils.hashFn(password),downloadBtn:downloadBtn,type:type});case 19:res=_context34.sent;_context34.next=27;break;case 22:_context34.prev=22;_context34.t0=_context34[\"catch\"](16);console.log(_context34.t0);loading.dismiss();return _context34.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\")));case 27:if(res.status){_context34.next=31;break;}console.log(res.message);loading.dismiss();return _context34.abrupt(\"return\",_this2.spawnToast(res.message));case 31:loading.dismiss();document.getElementById(\"public-link-enabled-toggle\").checked=true;document.getElementById(\"public-link-input\").value=\"https://filen.io/d/\"+linkUUID+\"#!\"+item.key;if(type==\"enable\"){document.getElementById(\"enable-public-link-content\").style.display=\"none\";document.getElementById(\"public-link-enabled-content\").style.display=\"block\";}else{document.getElementById(\"enable-public-link-content\").style.display=\"block\";document.getElementById(\"public-link-enabled-content\").style.display=\"none\";}return _context34.abrupt(\"return\",true);case 38:removeFolderLink=/*#__PURE__*/function(){var _ref29=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee29(callback){var removeLoading,res;return _regeneratorRuntime.wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:_context29.next=2;return loadingController.create({message:\"\"});case 2:removeLoading=_context29.sent;removeLoading.present();_context29.prev=4;_context29.next=7;return utils.apiRequest(\"POST\",\"/v1/dir/link/remove\",{apiKey:_this2.state.userAPIKey,uuid:item.uuid});case 7:res=_context29.sent;_context29.next=15;break;case 10:_context29.prev=10;_context29.t0=_context29[\"catch\"](4);console.log(_context29.t0);removeLoading.dismiss();return _context29.abrupt(\"return\",callback(language.get(_this2.state.lang,\"apiRequestError\")));case 15:if(res.status){_context29.next=19;break;}console.log(res.message);removeLoading.dismiss();return _context29.abrupt(\"return\",callback(res.message));case 19:removeLoading.dismiss();return _context29.abrupt(\"return\",callback(null));case 21:case\"end\":return _context29.stop();}}},_callee29,null,[[4,10]]);}));return function removeFolderLink(_x6){return _ref29.apply(this,arguments);};}();editFolderLink=/*#__PURE__*/function(){var _ref30=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee30(callback){var editLoading,res;return _regeneratorRuntime.wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return loadingController.create({message:\"\"});case 2:editLoading=_context30.sent;editLoading.present();_context30.prev=4;_context30.next=7;return utils.apiRequest(\"POST\",\"/v1/dir/link/edit\",{apiKey:_this2.state.userAPIKey,uuid:item.uuid,expiration:expires,password:password,passwordHashed:utils.hashFn(password),downloadBtn:downloadBtn});case 7:res=_context30.sent;_context30.next=15;break;case 10:_context30.prev=10;_context30.t0=_context30[\"catch\"](4);console.log(_context30.t0);editLoading.dismiss();return _context30.abrupt(\"return\",callback(language.get(_this2.state.lang,\"apiRequestError\")));case 15:if(res.status){_context30.next=19;break;}console.log(res.message);editLoading.dismiss();return _context30.abrupt(\"return\",callback(res.message));case 19:editLoading.dismiss();return _context30.abrupt(\"return\",callback(null));case 21:case\"end\":return _context30.stop();}}},_callee30,null,[[4,10]]);}));return function editFolderLink(_x7){return _ref30.apply(this,arguments);};}();createFolderLink=/*#__PURE__*/function(){var _ref31=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee33(callback){var createLoading,res,key,keyEnc,newLinkUUID,totalItems,doneItems,erroredItems,itemAdded,addItemRequest,addItem,i,folder,_i,file,fileMetadata;return _regeneratorRuntime.wrap(function _callee33$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_context33.next=2;return loadingController.create({message:\"\"});case 2:createLoading=_context33.sent;createLoading.present();_context33.prev=4;_context33.next=7;return utils.apiRequest(\"POST\",\"/v1/download/dir\",{apiKey:_this2.state.userAPIKey,uuid:item.uuid});case 7:res=_context33.sent;_context33.next=15;break;case 10:_context33.prev=10;_context33.t0=_context33[\"catch\"](4);console.log(_context33.t0);createLoading.dismiss();return _context33.abrupt(\"return\",callback(language.get(_this2.state.lang,\"apiRequestError\")));case 15:if(res.status){_context33.next=19;break;}console.log(res.message);createLoading.dismiss();return _context33.abrupt(\"return\",callback(res.message));case 19:key=utils.generateRandomString(32);keyEnc=utils.cryptoJSEncrypt(key,_this2.state.userMasterKeys[_this2.state.userMasterKeys.length-1]);newLinkUUID=utils.uuidv4();totalItems=res.data.folders.length+res.data.files.length;doneItems=0;erroredItems=0;itemAdded=function itemAdded(){doneItems+=1;createLoading.message=language.get(_this2.state.lang,\"folderLinkAddedItemsCount\",true,[\"__ADDED__\",\"__TOTAL__\"],[doneItems,totalItems]);if(doneItems>=totalItems){createLoading.dismiss();if(erroredItems>0){console.log(\"Errored items: \"+erroredItems);}linkUUID=newLinkUUID;return callback(null,{linkUUID:linkUUID,linkKey:key});}};addItemRequest=/*#__PURE__*/function(){var _ref32=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee31(data,tries,maxTries,cb){var res;return _regeneratorRuntime.wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:if(!(tries>=maxTries)){_context31.next=2;break;}return _context31.abrupt(\"return\",cb(language.get(_this2.state.lang,\"apiRequestError\")));case 2:_context31.prev=2;_context31.next=5;return utils.apiRequest(\"POST\",\"/v1/dir/link/add\",data);case 5:res=_context31.sent;_context31.next=12;break;case 8:_context31.prev=8;_context31.t0=_context31[\"catch\"](2);console.log(_context31.t0);return _context31.abrupt(\"return\",setTimeout(function(){addItemRequest(data,tries+1,maxTries,cb);},1000));case 12:return _context31.abrupt(\"return\",cb(null));case 13:case\"end\":return _context31.stop();}}},_callee31,null,[[2,8]]);}));return function addItemRequest(_x9,_x10,_x11,_x12){return _ref32.apply(this,arguments);};}();addItem=/*#__PURE__*/function(){var _ref33=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee32(itemType,itemToAdd){var itemMetadata;return _regeneratorRuntime.wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_context32.next=2;return window.customVariables.shareItemSemaphore.acquire();case 2:itemMetadata=\"\";if(itemType==\"file\"){itemMetadata=utils.cryptoJSEncrypt(JSON.stringify({name:itemToAdd.name,mime:itemToAdd.mime,key:itemToAdd.key,size:parseInt(itemToAdd.size)}),key);}else{itemMetadata=utils.cryptoJSEncrypt(JSON.stringify({name:item.name}),key);}addItemRequest({apiKey:window.customVariables.apiKey,uuid:itemToAdd.uuid,parent:itemToAdd.parent,linkUUID:newLinkUUID,type:itemType,metadata:itemMetadata,key:keyEnc,expiration:\"never\",password:\"empty\",passwordHashed:utils.hashFn(\"empty\"),downloadBtn:\"enable\"},0,32,function(err){window.customVariables.shareItemSemaphore.release();if(err){console.log(err);erroredItems+=1;}itemAdded();});case 5:case\"end\":return _context32.stop();}}},_callee32);}));return function addItem(_x13,_x14){return _ref33.apply(this,arguments);};}();i=0;case 29:if(!(i<res.data.folders.length)){_context33.next=38;break;}folder=res.data.folders[i];_context33.next=33;return window.customVariables.decryptShareItemSemaphore.acquire();case 33:addItem(\"folder\",{uuid:folder.uuid,parent:folder.parent,name:utils.decryptCryptoJSFolderName(folder.name,_this2.state.userMasterKeys,folder.uuid)});window.customVariables.decryptShareItemSemaphore.release();case 35:i++;_context33.next=29;break;case 38:_i=0;case 39:if(!(_i<res.data.files.length)){_context33.next=49;break;}file=res.data.files[_i];_context33.next=43;return window.customVariables.decryptShareItemSemaphore.acquire();case 43:fileMetadata=utils.decryptFileMetadata(file.metadata,_this2.state.userMasterKeys,file.uuid);addItem(\"file\",{uuid:file.uuid,parent:file.parent,name:fileMetadata.name,mime:fileMetadata.mime,key:fileMetadata.key,size:fileMetadata.size});window.customVariables.decryptShareItemSemaphore.release();case 46:_i++;_context33.next=39;break;case 49:case\"end\":return _context33.stop();}}},_callee33,null,[[4,10]]);}));return function createFolderLink(_x8){return _ref31.apply(this,arguments);};}();loading.dismiss();if(type==\"enable\"){if(isEdit){editFolderLink(function(err){if(err){return _this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\"));}});}else{createFolderLink(function(err,linkData){if(err){return _this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\"));}document.getElementById(\"public-link-enabled-toggle\").checked=true;document.getElementById(\"public-link-input\").value=\"https://filen.io/f/\"+linkData.linkUUID+\"#!\"+linkData.linkKey;document.getElementById(\"enable-public-link-content\").style.display=\"none\";document.getElementById(\"public-link-enabled-content\").style.display=\"block\";});}}else{removeFolderLink(function(err){if(err){return _this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\"));}document.getElementById(\"enable-public-link-content\").style.display=\"block\";document.getElementById(\"public-link-enabled-content\").style.display=\"none\";_this2.updateItemList();});}return _context34.abrupt(\"return\",true);case 44:case\"end\":return _context34.stop();}}},_callee34,null,[[16,22]]);}));return function(_x4,_x5){return _ref28.apply(this,arguments);};}();window.customFunctions.copyPublicLinkToClipboard=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee35(){var link;return _regeneratorRuntime.wrap(function _callee35$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:if(Capacitor.isNative){_context35.next=2;break;}return _context35.abrupt(\"return\",false);case 2:_context35.prev=2;link=document.getElementById(\"public-link-input\").value;_context35.next=6;return Plugins.Clipboard.write({url:link});case 6:_context35.next=12;break;case 8:_context35.prev=8;_context35.t0=_context35[\"catch\"](2);console.log(_context35.t0);return _context35.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"couldNotCopyToClipboard\")));case 12:return _context35.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"copiedToClipboard\")));case 13:case\"end\":return _context35.stop();}}},_callee35,null,[[2,8]]);}));window.customFunctions.clearThumbnailCache=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee37(){var alert;return _regeneratorRuntime.wrap(function _callee37$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_context37.next=2;return alertController.create({header:language.get(_this2.state.lang,\"settingsClearThumbnailCacheHeader\"),message:language.get(_this2.state.lang,\"settingsClearThumbnailCacheInfo\"),buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function(){var _handler2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee36(){var dirObj;return _regeneratorRuntime.wrap(function _callee36$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:if(Capacitor.isNative){_context36.next=2;break;}return _context36.abrupt(\"return\",alert.dismiss());case 2:dirObj={path:\"ThumbnailCache/\",directory:FilesystemDirectory.External};alert.dismiss();_context36.prev=4;_context36.next=7;return Plugins.Filesystem.rmdir({path:dirObj.path,directory:dirObj.directory,recursive:true});case 7:window.customVariables.thumbnailCache={};window.customVariables.thumbnailBlobCache={};window.customVariables.lastThumbnailCacheLength=undefined;window.customFunctions.saveThumbnailCache();_context36.next=16;break;case 13:_context36.prev=13;_context36.t0=_context36[\"catch\"](4);console.log(_context36.t0);case 16:return _context36.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"settingsClearThumbnailCacheDone\")));case 17:case\"end\":return _context36.stop();}}},_callee36,null,[[4,13]]);}));function handler(){return _handler2.apply(this,arguments);}return handler;}()}]});case 2:alert=_context37.sent;return _context37.abrupt(\"return\",alert.present());case 4:case\"end\":return _context37.stop();}}},_callee37);}));window.customFunctions.openOrderBy=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee39(){var alert;return _regeneratorRuntime.wrap(function _callee39$(_context39){while(1){switch(_context39.prev=_context39.next){case 0:_context39.next=2;return alertController.create({header:language.get(_this2.state.lang,\"orderBy\"),inputs:[{type:\"radio\",label:language.get(_this2.state.lang,\"orderByName\"),value:\"name\",checked:window.customVariables.orderBy.indexOf(\"name\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderBySize\"),value:\"size\",checked:window.customVariables.orderBy.indexOf(\"size\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderByDate\"),value:\"date\",checked:window.customVariables.orderBy.indexOf(\"date\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderByType\"),value:\"type\",checked:window.customVariables.orderBy.indexOf(\"type\")!==-1?true:false}],buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"orderByReset\"),handler:function handler(){var sortedItems=utils.orderItemsByType(_this2.state.itemList,\"dateDesc\");window.customVariables.orderBy=\"nameAsc\";window.customVariables.itemList=sortedItems;return _this2.setState({itemList:sortedItems},function(){_this2.forceUpdate();});}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function(){var _handler3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee38(type){var alert;return _regeneratorRuntime.wrap(function _callee38$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:_context38.next=2;return alertController.create({header:language.get(_this2.state.lang,\"orderByDirection\"),inputs:[{type:\"radio\",label:language.get(_this2.state.lang,\"orderByDirectionAsc\"),value:\"Asc\",checked:window.customVariables.orderBy.indexOf(\"Asc\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderByDirectionDesc\"),value:\"Desc\",checked:window.customVariables.orderBy.indexOf(\"Desc\")!==-1?true:false}],buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function handler(direction){var typeAndDirection=type+direction;console.log(typeAndDirection);var sortedItems=utils.orderItemsByType(_this2.state.itemList,typeAndDirection);window.customVariables.orderBy=typeAndDirection;window.customVariables.itemList=sortedItems;return _this2.setState({itemList:sortedItems},function(){_this2.forceUpdate();});}}]});case 2:alert=_context38.sent;return _context38.abrupt(\"return\",alert.present());case 4:case\"end\":return _context38.stop();}}},_callee38);}));function handler(_x15){return _handler3.apply(this,arguments);}return handler;}()}]});case 2:alert=_context39.sent;window.customFunctions.dismissPopover();return _context39.abrupt(\"return\",alert.present());case 5:case\"end\":return _context39.stop();}}},_callee39);}));}","map":{"version":3,"sources":["/Users/jan/Documents/filen/app/src/components/window.js"],"names":["Capacitor","Plugins","FilesystemDirectory","modalController","popoverController","menuController","alertController","loadingController","actionSheetController","language","Ionicons","isPlatform","kMaxLength","utils","require","safeAreaInsets","windowRouter","window","onhashchange","currentHref","location","href","setState","routeEx","hash","split","state","isLoggedIn","updateItemList","foldersInRoute","slice","length","lastFolderInRoute","customVariables","cachedFolders","mainToolbarTitle","name","showMainToolbarBackButton","get","lang","setupWindowFunctions","$","undefined","jQueryScript","document","createElement","type","src","getElementsByTagName","appendChild","pdfJsScript","customFunctions","itemList","cachedFiles","cachedMetadata","keyUpdateInterval","usageUpdateInterval","apiKey","uploadSemaphore","Semaphore","uploadChunkSemaphore","downloadSemaphore","downloadChunkSemaphore","shareItemSemaphore","decryptShareItemSemaphore","uploads","downloads","reloadContentAfterUploadTimeout","offlineSavedFiles","urlCreator","URL","webkitURL","currentPreviewURL","reloadAfterActionTimeout","nextNativeToastAllowed","Math","floor","Date","apiCache","selectLangInterval","stoppedUploads","stoppedDownloads","stoppedUploadsDone","stoppedDownloadsDone","lastCachedItemsLength","lastAPICacheLength","thumbnailCache","thumbnailBlobCache","currentThumbnailURL","lastThumbnailCacheLength","thumbnailSemaphore","updateItemsSemaphore","getNetworkInfoInterval","networkStatus","orderBy","getThumbnailErrors","lastGetThumbnailErrorsLength","scrollToIndex","mainSearchbarTimeout","mainSearchbarInterval","lastMainSearchbarTerm","userMasterKeys","isGettingPreviewData","stopGettingPreviewData","cachedAPIItemListRequests","clearInterval","setInterval","getElementById","term","value","trim","clearTimeout","setTimeout","setMainSearchTerm","onresize","windowHeight","innerHeight","windowWidth","innerWidth","onclick","e","togglePreviewHeader","target","innerHTML","indexOf","getElementsByClassName","header","style","display","getNetworkInfo","Network","getStatus","console","log","saveOfflineSavedFiles","Storage","set","key","JSON","stringify","saveGetThumbnailErrors","saveAPICache","saveThumbnailCache","saveCachedItems","dismissActionSheet","all","dismiss","getTop","actionSheet","dismissPopover","popover","dismissModal","modal","dismissLoader","loader","dismissAlert","alert","selectAllItems","items","i","item","selected","push","selectedItems","unselectAllItems","refreshItemList","hideSidebarMenu","mainMenu","close","openRegisterModal","showRegister","doLogout","showLogin","doLogin","email","password","twoFactorKey","create","subHeader","message","buttons","toUpperCase","present","loading","apiRequest","res","status","data","hashFn","doSetup","doRegister","passwordRepeat","toLowerCase","openSettingsModal","openEncryptionModal","appLang","appDarkMode","darkMode","modalId","generateRandomClassName","customElements","define","arrowBack","HTMLElement","component","swipeToClose","showBackdrop","backdropDismiss","cssClass","openWebsiteModal","text","icon","globe","handler","open","grid","role","openHelpModal","helpBuoyOutline","informationCircle","informationCircleOutline","queueFileUpload","queueFileDownload","openItemActionSheetFromJSON","itemJSON","parse","atob","spawnItemActionSheet","moveSelectedItems","trashSelectedItems","restoreSelectedItems","removeSelectedItemsFromSharedIn","stopSharingSelectedItems","downloadSelectedItems","storeSelectedItemsOffline","shareSelectedItems","settingsToggleDarkMode","checked","loginToggleDarkMode","saveSettings","newSettings","settings","toggleOnlyWifi","newVal","onlyWifi","logoutUser","remove","emptyTrash","userAPIKey","spawnToast","changeItemColor","color","uuid","editItemPublicLink","isEdit","currentLinkUUID","linkUUID","uuidv4","expires","downloadBtn","fileUUID","expiration","passwordHashed","removeFolderLink","callback","removeLoading","editFolderLink","editLoading","createFolderLink","createLoading","generateRandomString","keyEnc","cryptoJSEncrypt","newLinkUUID","totalItems","folders","files","doneItems","erroredItems","itemAdded","linkKey","addItemRequest","tries","maxTries","cb","addItem","itemType","itemToAdd","acquire","itemMetadata","mime","size","parseInt","parent","metadata","err","release","folder","decryptCryptoJSFolderName","file","fileMetadata","decryptFileMetadata","linkData","copyPublicLinkToClipboard","isNative","link","Clipboard","write","url","clearThumbnailCache","dirObj","path","directory","External","Filesystem","rmdir","recursive","openOrderBy","inputs","label","sortedItems","orderItemsByType","forceUpdate","direction","typeAndDirection"],"mappings":"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","sourcesContent":["import { Capacitor, Plugins, FilesystemDirectory } from \"@capacitor/core\"\r\nimport { modalController, popoverController, menuController, alertController, loadingController, actionSheetController } from \"@ionic/core\"\r\nimport * as language from \"../utils/language\"\r\nimport * as Ionicons from 'ionicons/icons'\r\nimport { isPlatform } from '@ionic/react'\r\nimport { kMaxLength } from \"buffer\"\r\n\r\nconst utils = require(\"../utils/utils\")\r\nconst safeAreaInsets = require('safe-area-insets')\r\n\r\nexport function windowRouter(){\r\n    window.onhashchange = async () => {\r\n        if(window.currentHref !== window.location.href){\r\n            window.currentHref = window.location.href\r\n\r\n            this.setState({\r\n                currentHref: window.currentHref\r\n            })\r\n\r\n            let routeEx = window.location.hash.split(\"/\")\r\n\r\n            if(this.state.isLoggedIn){\r\n                if(routeEx[1] == \"base\" || routeEx[1] == \"shared-in\" || routeEx[1] == \"shared-out\" || routeEx[1] == \"trash\" || routeEx[1] == \"links\"){\r\n                    await this.updateItemList()\r\n    \r\n                    let foldersInRoute = routeEx.slice(2)\r\n    \r\n                    if(foldersInRoute.length > 0){\r\n                        let lastFolderInRoute = foldersInRoute[foldersInRoute.length - 1]\r\n    \r\n                        if(window.customVariables.cachedFolders[lastFolderInRoute]){\r\n                            this.setState({\r\n                                mainToolbarTitle: window.customVariables.cachedFolders[lastFolderInRoute].name,\r\n                                showMainToolbarBackButton: true\r\n                            })\r\n                        }\r\n                        else{\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"myCloud\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                    }\r\n                    else{\r\n                        if(routeEx[1] == \"shared-in\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"sharedInTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else if(routeEx[1] == \"shared-out\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"sharedOutTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else if(routeEx[1] == \"trash\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"trashTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else if(routeEx[1] == \"links\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"linksTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else{\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"myCloud\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function setupWindowFunctions(){\r\n    window.$ = undefined\r\n\r\n    let jQueryScript = document.createElement(\"script\")\r\n\r\n    jQueryScript.type = \"text/javascript\"\r\n    jQueryScript.src = \"assets/jquery.js\"\r\n\r\n    document.getElementsByTagName(\"head\")[0].appendChild(jQueryScript)\r\n\r\n    let pdfJsScript = document.createElement(\"script\")\r\n\r\n    pdfJsScript.type = \"text/javascript\"\r\n    pdfJsScript.src = \"assets/pdf/build/pdf.js\"\r\n\r\n    document.getElementsByTagName(\"head\")[0].appendChild(pdfJsScript)\r\n\r\n    window.customFunctions = {}\r\n    window.customVariables = {}\r\n\r\n    window.customVariables.itemList = []\r\n    window.customVariables.lang = this.state.lang\r\n    window.customVariables.cachedFolders = {}\r\n    window.customVariables.cachedFiles = {}\r\n    window.customVariables.cachedMetadata = {}\r\n    window.customVariables.keyUpdateInterval = undefined\r\n    window.customVariables.usageUpdateInterval = undefined\r\n    window.customVariables.apiKey = \"\"\r\n    window.customVariables.uploadSemaphore = new utils.Semaphore(3)\r\n    window.customVariables.uploadChunkSemaphore = new utils.Semaphore(5)\r\n    window.customVariables.downloadSemaphore = new utils.Semaphore(5)\r\n    window.customVariables.downloadChunkSemaphore = new utils.Semaphore(30)\r\n    window.customVariables.shareItemSemaphore = new utils.Semaphore(4)\r\n    window.customVariables.decryptShareItemSemaphore = new utils.Semaphore(128)\r\n    window.customVariables.uploads = {}\r\n    window.customVariables.downloads = {}\r\n    window.customVariables.reloadContentAfterUploadTimeout = undefined\r\n    window.customVariables.offlineSavedFiles = {}\r\n    window.customVariables.urlCreator = window.URL || window.webkitURL\r\n    window.customVariables.currentPreviewURL = undefined\r\n    window.customVariables.reloadAfterActionTimeout = undefined\r\n    window.customVariables.nextNativeToastAllowed = Math.floor((+new Date()) / 1000)\r\n    window.customVariables.apiCache = {}\r\n    window.customVariables.selectLangInterval = undefined\r\n    window.customVariables.stoppedUploads = {}\r\n    window.customVariables.stoppedDownloads = {}\r\n    window.customVariables.stoppedUploadsDone = {}\r\n    window.customVariables.stoppedDownloadsDone = {}\r\n    window.customVariables.lastCachedItemsLength = undefined\r\n    window.customVariables.lastAPICacheLength = undefined\r\n    window.customVariables.thumbnailCache = {}\r\n    window.customVariables.thumbnailBlobCache = {}\r\n    window.customVariables.currentThumbnailURL = undefined\r\n    window.customVariables.lastThumbnailCacheLength = undefined\r\n    window.customVariables.thumbnailSemaphore = new utils.Semaphore(2)\r\n    window.customVariables.updateItemsSemaphore = new utils.Semaphore(1)\r\n    window.customVariables.getNetworkInfoInterval = undefined\r\n    window.customVariables.networkStatus = undefined\r\n    window.customVariables.orderBy = \"nameAsc\"\r\n    window.customVariables.getThumbnailErrors = {}\r\n    window.customVariables.lastGetThumbnailErrorsLength = undefined\r\n    window.customVariables.scrollToIndex = {}\r\n    window.customVariables.mainSearchbarTimeout = undefined\r\n    window.customVariables.mainSearchbarInterval = undefined\r\n    window.customVariables.lastMainSearchbarTerm = \"\"\r\n    window.customVariables.userMasterKeys = []\r\n    window.customVariables.isGettingPreviewData = false\r\n    window.customVariables.stopGettingPreviewData = false\r\n    window.customVariables.cachedAPIItemListRequests = {}\r\n\r\n    clearInterval(window.customVariables.mainSearchbarInterval)\r\n\r\n    window.customVariables.mainSearchbarInterval = setInterval(() => {\r\n        if(document.getElementById(\"main-searchbar\") !== null){\r\n            let term = document.getElementById(\"main-searchbar\").value.trim()\r\n\r\n            if(typeof term == \"string\"){\r\n                if(term.length > 0){\r\n                    if(term !== window.customVariables.lastMainSearchbarTerm){\r\n                        window.customVariables.lastMainSearchbarTerm = term\r\n\r\n                        clearTimeout(window.customVariables.mainSearchbarTimeout)\r\n    \r\n                        window.customVariables.mainSearchbarTimeout = setTimeout(() => {\r\n                            this.setMainSearchTerm(term)\r\n                        }, 250)\r\n                    }\r\n                }\r\n                else{\r\n                    clearTimeout(window.customVariables.mainSearchbarTimeout)\r\n\r\n                    this.setMainSearchTerm(\"\")\r\n                }\r\n            }\r\n            else{\r\n                clearTimeout(window.customVariables.mainSearchbarTimeout)\r\n\r\n                this.setMainSearchTerm(\"\")\r\n            }\r\n        }\r\n        else{\r\n            clearTimeout(window.customVariables.mainSearchbarTimeout)\r\n        }\r\n    }, 100)\r\n\r\n    window.onresize = () => {\r\n        this.setState({\r\n            windowHeight: window.innerHeight,\r\n            windowWidth: window.innerWidth\r\n        })\r\n    }\r\n\r\n    document.onclick = (e) => {\r\n        return window.customFunctions.togglePreviewHeader(e)\r\n    }\r\n\r\n    window.customFunctions.isPlatform = isPlatform\r\n    window.customFunctions.safeAreaInsets = safeAreaInsets\r\n\r\n    window.customFunctions.togglePreviewHeader = (e) => {\r\n        if(typeof e.target == \"undefined\"){\r\n            return\r\n        }\r\n\r\n        if(e.target.innerHTML.indexOf(\"<ion-icon\") !== -1){\r\n            return false\r\n        }\r\n\r\n        if(document.getElementsByClassName(\"preview-header-hidden\").length > 0){\r\n            let header = document.getElementsByClassName(\"preview-header-hidden\")[0]\r\n\r\n            if(header.style.display == \"none\"){\r\n                header.style.display = \"block\"\r\n            }\r\n            else{\r\n                header.style.display = \"none\"\r\n            }\r\n        }\r\n    }\r\n\r\n    window.customFunctions.getNetworkInfo = async () => {\r\n        try{\r\n            window.customVariables.networkStatus = await Plugins.Network.getStatus()\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveOfflineSavedFiles = async () => {\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"offlineSavedFiles\",\r\n                value: JSON.stringify(window.customVariables.offlineSavedFiles)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveGetThumbnailErrors = async () => {\r\n        if(typeof window.customVariables.lastGetThumbnailErrorsLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.getThumbnailErrors)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastGetThumbnailErrorsLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastGetThumbnailErrorsLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"getThumbnailErrors\",\r\n                value: JSON.stringify(window.customVariables.getThumbnailErrors)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveAPICache = async () => {\r\n        if(typeof window.customVariables.lastAPICacheLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.apiCache)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastAPICacheLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastAPICacheLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"apiCache\",\r\n                value: JSON.stringify(window.customVariables.apiCache)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveThumbnailCache = async () => {\r\n        if(typeof window.customVariables.lastThumbnailCacheLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.thumbnailCache)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastThumbnailCacheLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastThumbnailCacheLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"thumbnailCache\",\r\n                value: JSON.stringify(window.customVariables.thumbnailCache)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveCachedItems = async () => {\r\n        if(typeof window.customVariables.lastCachedItemsLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.cachedFiles) + JSON.stringify(window.customVariables.cachedFolders)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastCachedItemsLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastCachedItemsLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"cachedFiles\",\r\n                value: JSON.stringify(window.customVariables.cachedFiles)\r\n            })\r\n\r\n            await Plugins.Storage.set({\r\n                key: \"cachedFolders\",\r\n                value: JSON.stringify(window.customVariables.cachedFolders)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissActionSheet = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await actionSheetController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let actionSheet = await actionSheetController.getTop()\r\n\r\n            if(typeof actionSheet !== \"undefined\"){\r\n                return actionSheet.dismiss()\r\n            }\r\n            \r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissPopover = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await popoverController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let popover = await popoverController.getTop()\r\n\r\n            if(typeof popover !== \"undefined\"){\r\n                return popover.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissModal = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await modalController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let modal = await modalController.getTop()\r\n\r\n            if(typeof modal !== \"undefined\"){\r\n                return modal.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissLoader = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await loadingController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let loader = await loadingController.getTop()\r\n\r\n            if(typeof loader !== \"undefined\"){\r\n                return loader.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissAlert = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await alertController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let alert = await alertController.getTop()\r\n\r\n            if(typeof alert !== \"undefined\"){\r\n                return alert.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.selectAllItems = () => {\r\n        let items = []\r\n\r\n        for(let i = 0; i < this.state.itemList.length; i++){\r\n            let item = this.state.itemList[i]\r\n\r\n            item.selected = true\r\n\r\n            items.push(item)\r\n        }\r\n\r\n        this.setState({\r\n            itemList: items,\r\n            selectedItems: items.length\r\n        })\r\n\r\n        return window.customFunctions.dismissPopover()\r\n    }\r\n\r\n    window.customFunctions.unselectAllItems = () => {\r\n        let items = []\r\n\r\n        for(let i = 0; i < this.state.itemList.length; i++){\r\n            let item = this.state.itemList[i]\r\n\r\n            item.selected = false\r\n\r\n            items.push(item)\r\n        }\r\n\r\n        this.setState({\r\n            itemList: items,\r\n            selectedItems: 0\r\n        })\r\n\r\n        return window.customFunctions.dismissPopover()\r\n    }\r\n\r\n    window.customFunctions.refreshItemList = () => {\r\n        this.updateItemList()\r\n\r\n        return window.customFunctions.dismissPopover()\r\n    }\r\n\r\n    window.customFunctions.hideSidebarMenu = async () => {\r\n        let mainMenu = await menuController.get(\"sideBarMenu\")\r\n\r\n        return mainMenu.close()\r\n    }\r\n\r\n    window.customFunctions.openRegisterModal = () => {\r\n        return this.showRegister()\r\n    }\r\n\r\n    window.customFunctions.doLogout = async () => {\r\n        await Plugins.Storage.set({ key: \"isLoggedIn\", value: \"false\" })\r\n        await Plugins.Storage.set({ key: \"userAPIKey\", value: \"\" })\r\n        await Plugins.Storage.set({ key: \"userEmail\", value: \"\" })\r\n        await Plugins.Storage.set({ key: \"userMasterKeys\", value: JSON.stringify([]) })\r\n        await Plugins.Storage.set({ key: \"userPublicKey\", value: \"\" })\r\n        await Plugins.Storage.set({ key: \"userPrivateKey\", value: \"\" })\r\n\r\n        this.setState({ isLoggedIn: false })\r\n\r\n        return this.showLogin()\r\n    }\r\n\r\n    window.customFunctions.doLogin = async () => {\r\n        let email = document.getElementById(\"login-email\").value\r\n        let password = document.getElementById(\"login-password\").value\r\n        let twoFactorKey = document.getElementById(\"login-2fa\").value\r\n\r\n        if(!email || !password){\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"loginInvalidInputs\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        if(twoFactorKey.length == 0){\r\n            twoFactorKey = \"XXXXXX\"\r\n        }\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        try{\r\n            var res = await utils.apiRequest(\"POST\", \"/v1/login\", {\r\n                email,\r\n                password,\r\n                twoFactorKey\r\n            })\r\n        }\r\n        catch(e){\r\n            document.getElementById(\"login-password\").value = \"\"\r\n            document.getElementById(\"login-2fa\").value = \"\"\r\n\r\n            console.log(e)\r\n\r\n            window.customFunctions.dismissLoader()\r\n\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"apiRequestError\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        if(!res.status){\r\n            if(res.message == \"Please enter your Two Factor Authentication code.\"){\r\n                window.customFunctions.dismissLoader()\r\n\r\n                document.getElementById(\"login-2fa-container\").style.display = \"block\"\r\n\r\n                let alert = await alertController.create({\r\n                    header: \"\",\r\n                    subHeader: \"\",\r\n                    message: language.get(this.state.lang, \"loginWith2FACode\"),\r\n                    buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                })\r\n\r\n                return alert.present()\r\n            }\r\n            else{\r\n                document.getElementById(\"login-password\").value = \"\"\r\n                document.getElementById(\"login-2fa\").value = \"\"\r\n\r\n                window.customFunctions.dismissLoader()\r\n\r\n                if(res.message == \"Account not yet activated.\"){\r\n                    let alert = await alertController.create({\r\n                        header: \"\",\r\n                        subHeader: \"\",\r\n                        message: language.get(this.state.lang, \"loginAccountNotActivated\"),\r\n                        buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                    })\r\n        \r\n                    return alert.present()\r\n                }\r\n                else if(res.message == \"Account not found.\"){\r\n                    let alert = await alertController.create({\r\n                        header: \"\",\r\n                        subHeader: \"\",\r\n                        message: language.get(this.state.lang, \"loginAccountNotFound\"),\r\n                        buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                    })\r\n        \r\n                    return alert.present()\r\n                }\r\n\r\n                let alert = await alertController.create({\r\n                    header: \"\",\r\n                    subHeader: \"\",\r\n                    message: language.get(this.state.lang, \"loginWrongCredentials\"),\r\n                    buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                })\r\n\r\n                return alert.present()\r\n            }\r\n        }\r\n\r\n        await Plugins.Storage.set({ key: \"isLoggedIn\", value: \"true\" })\r\n        await Plugins.Storage.set({ key: \"userAPIKey\", value: res.data.apiKey })\r\n        await Plugins.Storage.set({ key: \"userEmail\", value: email })\r\n        await Plugins.Storage.set({ key: \"userMasterKeys\", value: JSON.stringify([utils.hashFn(password)]) })\r\n\r\n        window.customFunctions.dismissLoader(true)\r\n        window.customFunctions.dismissModal(true)\r\n        window.customFunctions.dismissLoader()\r\n\r\n        document.getElementById(\"login-email\").value = \"\"\r\n        document.getElementById(\"login-password\").value = \"\"\r\n        document.getElementById(\"login-2fa\").value = \"\"\r\n\r\n        return this.doSetup()\r\n    }\r\n\r\n    window.customFunctions.doRegister = async () => {\r\n        let email = document.getElementById(\"register-email\").value\r\n        let password = document.getElementById(\"register-password\").value\r\n        let passwordRepeat = document.getElementById(\"register-password-repeat\").value\r\n\r\n        if(!email || !password || !passwordRepeat){\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"registerInvalidInputs\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        try{\r\n            var res = await utils.apiRequest(\"POST\", \"/v1/register\", {\r\n                email,\r\n                password,\r\n                passwordRepeat\r\n            })\r\n        }\r\n        catch(e){\r\n            document.getElementById(\"register-password\").value = \"\"\r\n            document.getElementById(\"register-password-repeat\").value = \"\"\r\n\r\n            console.log(e)\r\n\r\n            window.customFunctions.dismissLoader()\r\n\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"apiRequestError\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        if(!res.status){\r\n            document.getElementById(\"register-password\").value = \"\"\r\n            document.getElementById(\"register-password-repeat\").value = \"\"\r\n\r\n            window.customFunctions.dismissLoader()\r\n\r\n            let message = \"\"\r\n\r\n            if(res.message.toLowerCase().indexOf(\"invalid email\") !== -1 || res.message.toLowerCase().indexOf(\"invalid password\") !== -1 || res.message.toLowerCase().indexOf(\"invalid email\") !== -1){\r\n                message = language.get(this.state.lang, \"registerInvalidFields\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"your password needs to be at least 10 characters long\") !== -1){\r\n                message = language.get(this.state.lang, \"registerPasswordAtLeast10Chars\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"passwords do not match\") !== -1){\r\n                message = language.get(this.state.lang, \"registerPasswordsDoNotMatch\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"invalid email\") !== -1){\r\n                message = language.get(this.state.lang, \"registerInvalidEmail\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"database error\") !== -1){\r\n                message = language.get(this.state.lang, \"apiRequestError\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"this email is already registered\") !== -1){\r\n                message = language.get(this.state.lang, \"registerEmailAlreadyRegistered\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"we could not send an email at this time, please try again later\") !== -1){\r\n                message = language.get(this.state.lang, \"registerCouldNotSendEmail\")\r\n            }\r\n\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: message,\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        document.getElementById(\"register-email\").value = \"\"\r\n        document.getElementById(\"register-password\").value = \"\"\r\n        document.getElementById(\"register-password-repeat\").value = \"\"\r\n\r\n        window.customFunctions.dismissLoader()\r\n\r\n        let alert = await alertController.create({\r\n            header: \"\",\r\n            subHeader: \"\",\r\n            message: language.get(this.state.lang, \"registerSuccess\"),\r\n            buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.openSettingsModal = async () => {\r\n        return this.openSettingsModal()\r\n    }\r\n\r\n    window.customFunctions.openEncryptionModal = async () => {\r\n        let appLang = this.state.lang\r\n        let appDarkMode = this.state.darkMode\r\n        let modalId = \"encryption-modal-\" + utils.generateRandomClassName()\r\n\r\n        customElements.define(modalId, class ModalContent extends HTMLElement {\r\n            connectedCallback(){\r\n                this.innerHTML = `\r\n                    <ion-header>\r\n                        <ion-toolbar>\r\n                            <ion-buttons slot=\"start\">\r\n                                <ion-button onClick=\"window.customFunctions.dismissModal()\">\r\n                                    <ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\"></ion-icon>\r\n                                </ion-button>\r\n                            </ion-buttons>\r\n                            <ion-title>\r\n                                ` + language.get(appLang, \"encryption\") + `\r\n                            </ion-title>\r\n                        </ion-toolbar>\r\n                    </ion-header>\r\n                    <ion-content style=\"--background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\" fullscreen>\r\n                        <ion-list>\r\n                            <ion-item-divider style=\"--background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\">\r\n                                <ion-label>\r\n                                    ` + language.get(appLang, \"encryptionModalHeader\") + `\r\n                                </ion-label>\r\n                            </ion-item-divider>\r\n                            <ion-item lines=\"none\" style=\"padding-top: 10px;\">\r\n                                ` + language.get(appLang, \"encryptionModalFirstText\") + `\r\n                            </ion-item>\r\n                            <ion-item-divider style=\"padding-top: 15px; --background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\">\r\n                                <ion-label>\r\n                                    ` + language.get(appLang, \"encryptionModalHeaderHowItWorks\") + `\r\n                                </ion-label>\r\n                            </ion-item-divider>\r\n                            <ion-item lines=\"none\" style=\"padding-top: 10px;\">\r\n                                ` + language.get(appLang, \"encryptionModalHowItWorksText\") + `\r\n                            </ion-item>\r\n                        </ion-list>\r\n                    </ion-content>\r\n                `\r\n            }\r\n        })\r\n\r\n        let modal = await modalController.create({\r\n            component: modalId,\r\n            swipeToClose: true,\r\n            showBackdrop: false,\r\n            backdropDismiss: false,\r\n            cssClass: \"modal-fullscreen\"\r\n        })\r\n\r\n        return modal.present()\r\n    }\r\n\r\n    window.customFunctions.openWebsiteModal = async () => {\r\n        let actionSheet = await actionSheetController.create({\r\n            header: language.get(this.state.lang, \"website\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"website\"),\r\n                    icon: Ionicons.globe,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"onlineFM\"),\r\n                    icon: Ionicons.grid,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/my-account/file-manager/default\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    icon: \"close\",\r\n                    role: \"cancel\"\r\n                }\r\n            ]\r\n        })\r\n\r\n        return actionSheet.present()\r\n    }\r\n\r\n    window.customFunctions.openHelpModal = async () => {\r\n        let actionSheet = await actionSheetController.create({\r\n            header: language.get(this.state.lang, \"help\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"support\"),\r\n                    icon: Ionicons.helpBuoyOutline,\r\n                    handler: () => {\r\n                        window.open(\"https://support.filen.io/\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"faq\"),\r\n                    icon: Ionicons.informationCircle,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/faq\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"tos\"),\r\n                    icon: Ionicons.informationCircleOutline,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/terms\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"privacyPolicy\"),\r\n                    icon: Ionicons.informationCircleOutline,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/privacy\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    icon: \"close\",\r\n                    role: \"cancel\"\r\n                }\r\n            ]\r\n        })\r\n\r\n        return actionSheet.present()\r\n    }\r\n\r\n    window.customFunctions.queueFileUpload = this.queueFileUpload\r\n    window.customFunctions.queueFileDownload = this.queueFileDownload\r\n\r\n    window.customFunctions.openItemActionSheetFromJSON = (itemJSON) => {\r\n        let item = JSON.parse(window.atob(itemJSON))\r\n\r\n        return this.spawnItemActionSheet(item)\r\n    }\r\n\r\n    window.customFunctions.moveSelectedItems = () => {\r\n        return this.moveSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.trashSelectedItems = () => {\r\n        return this.trashSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.restoreSelectedItems = () => {\r\n        return this.restoreSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.removeSelectedItemsFromSharedIn = () => {\r\n        return this.removeSelectedItemsFromSharedIn()\r\n    }\r\n\r\n    window.customFunctions.stopSharingSelectedItems = () => {\r\n        return this.stopSharingSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.downloadSelectedItems = () => {\r\n        return this.downloadSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.storeSelectedItemsOffline = () => {\r\n        return this.storeSelectedItemsOffline()\r\n    }\r\n\r\n    window.customFunctions.shareSelectedItems = () => {\r\n        return this.shareSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.settingsToggleDarkMode = async () => {\r\n        if(this.state.darkMode){\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"false\" })\r\n\r\n            document.getElementById(\"settings-dark-mode-toggle\").checked = false\r\n\r\n            return this.setState({\r\n                darkMode: false\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n        else{\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"true\" })\r\n\r\n            document.getElementById(\"settings-dark-mode-toggle\").checked = true\r\n\r\n            return this.setState({\r\n                darkMode: true\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n    }\r\n\r\n    window.customFunctions.loginToggleDarkMode = async () => {\r\n        if(this.state.darkMode){\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"false\" })\r\n\r\n            return this.setState({\r\n                darkMode: false\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n        else{\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"true\" })\r\n\r\n            return this.setState({\r\n                darkMode: true\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveSettings = async (newSettings) => {\r\n        await Plugins.Storage.set({ key: \"settings\", value: JSON.stringify(newSettings) })\r\n\r\n        return this.setState({\r\n            settings: newSettings\r\n        })\r\n    }\r\n\r\n    window.customFunctions.toggleOnlyWifi = () => {\r\n        let newSettings = this.state.settings\r\n        let newVal = !newSettings.onlyWifi\r\n\r\n        newSettings.onlyWifi = newVal\r\n\r\n        document.getElementById(\"settings-only-wifi-toggle\").checked = !newVal\r\n\r\n        return window.customFunctions.saveSettings(newSettings)\r\n    }\r\n\r\n    window.customFunctions.logoutUser = async () => {\r\n        await Plugins.Storage.remove({ key: \"isLoggedIn\" })\r\n        await Plugins.Storage.remove({ key: \"userAPIKey\" })\r\n        await Plugins.Storage.remove({ key: \"userEmail\" })\r\n        await Plugins.Storage.remove({ key: \"userMasterKeys\" })\r\n        await Plugins.Storage.remove({ key: \"userPublicKey\" })\r\n        await Plugins.Storage.remove({ key: \"userPrivateKey\" })\r\n        await Plugins.Storage.remove({ key: \"offlineSavedFiles\" })\r\n        await Plugins.Storage.remove({ key: \"apiCache\" })\r\n\r\n        return document.location.href = \"index.html\"\r\n    }\r\n\r\n    window.customFunctions.doLogout = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"logoutAlertHeader\"),\r\n            message: language.get(this.state.lang, \"logoutConfirmation\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: () => {\r\n                        return window.customFunctions.logoutUser()\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.emptyTrash = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"emptyTrashHeader\"),\r\n            message: language.get(this.state.lang, \"emptyTrashWarning\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: async () => {\r\n                        let loading = await loadingController.create({\r\n                            message: \"\"\r\n                        })\r\n\r\n                        loading.present()\r\n\r\n                        try{\r\n                            var res = await utils.apiRequest(\"POST\", \"/v1/trash/empty\", {\r\n                                apiKey: this.state.userAPIKey\r\n                            })\r\n                        }\r\n                        catch(e){\r\n                            console.log(e)\r\n\r\n                            loading.dismiss()\r\n\r\n                            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                        }\r\n\r\n                        if(!res.status){\r\n                            console.log(res.message)\r\n\r\n                            loading.dismiss()\r\n\r\n                            return this.spawnToast(res.message)\r\n                        }\r\n\r\n                        loading.dismiss()\r\n\r\n                        this.updateItemList()\r\n\r\n                        return this.spawnToast(language.get(this.state.lang, \"trashEmptied\"))\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.changeItemColor = async (itemJSON, color) => {\r\n        let item = JSON.parse(window.atob(itemJSON))\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        try{\r\n            var res = await utils.apiRequest(\"POST\", \"/v1/dir/color/change\", {\r\n                apiKey: this.state.userAPIKey,\r\n                uuid: item.uuid,\r\n                color: color\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n    \r\n            loading.dismiss()\r\n    \r\n            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n        }\r\n    \r\n        if(!res.status){\r\n            console.log(res.message)\r\n    \r\n            loading.dismiss()\r\n    \r\n            return this.spawnToast(res.message)\r\n        }\r\n\r\n        loading.dismiss()\r\n\r\n        try{\r\n            await this.updateItemList()\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n\r\n        return window.customFunctions.dismissModal()\r\n    }\r\n\r\n    window.customFunctions.editItemPublicLink = async (itemJSON, type, isEdit = false, currentLinkUUID = \"\") => {\r\n        let item = JSON.parse(window.atob(itemJSON))\r\n        let linkUUID = utils.uuidv4()\r\n\r\n        if(isEdit && typeof currentLinkUUID == \"string\"){\r\n            if(currentLinkUUID.length > 1){\r\n                linkUUID = currentLinkUUID\r\n            }\r\n        }\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        let expires = \"never\"\r\n\r\n        if(typeof document.getElementById(\"public-link-expires-select\").value == \"string\"){\r\n            expires = document.getElementById(\"public-link-expires-select\").value\r\n        }\r\n\r\n        let password = \"empty\"\r\n\r\n        if(typeof document.getElementById(\"public-link-password-input\").value == \"string\"){\r\n            if(document.getElementById(\"public-link-password-input\").value){\r\n                password = document.getElementById(\"public-link-password-input\").value\r\n            }\r\n        }\r\n\r\n        let downloadBtn = \"enable\"\r\n\r\n        if(document.getElementById(\"public-link-enable-download-btn-toggle\") !== null){\r\n            if(!document.getElementById(\"public-link-enable-download-btn-toggle\").checked){\r\n                downloadBtn = \"disable\"\r\n            }\r\n        }\r\n        \r\n        if(item.type == \"file\"){\r\n            try{\r\n                var res = await utils.apiRequest(\"POST\", \"/v1/link/edit\", {\r\n                    apiKey: this.state.userAPIKey,\r\n                    uuid: linkUUID,\r\n                    fileUUID: item.uuid,\r\n                    expiration: expires,\r\n                    password: password,\r\n                    passwordHashed: utils.hashFn(password),\r\n                    downloadBtn: downloadBtn,\r\n                    type: type\r\n                })\r\n            }\r\n            catch(e){\r\n                console.log(e)\r\n        \r\n                loading.dismiss()\r\n        \r\n                return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n            }\r\n        \r\n            if(!res.status){\r\n                console.log(res.message)\r\n        \r\n                loading.dismiss()\r\n        \r\n                return this.spawnToast(res.message)\r\n            }\r\n\r\n            loading.dismiss()\r\n\r\n            document.getElementById(\"public-link-enabled-toggle\").checked = true\r\n            document.getElementById(\"public-link-input\").value = \"https://filen.io/d/\" + linkUUID + \"#!\" + item.key\r\n\r\n            if(type == \"enable\"){\r\n                document.getElementById(\"enable-public-link-content\").style.display = \"none\"\r\n                document.getElementById(\"public-link-enabled-content\").style.display = \"block\"\r\n            }\r\n            else{\r\n                document.getElementById(\"enable-public-link-content\").style.display = \"block\"\r\n                document.getElementById(\"public-link-enabled-content\").style.display = \"none\"\r\n            }\r\n\r\n            return true\r\n        }\r\n        else{\r\n            const removeFolderLink = async (callback) => {\r\n                let removeLoading = await loadingController.create({\r\n                    message: \"\"\r\n                })\r\n\r\n                removeLoading.present()\r\n\r\n                try{\r\n                    var res = await utils.apiRequest(\"POST\", \"/v1/dir/link/remove\", {\r\n                        apiKey: this.state.userAPIKey,\r\n                        uuid: item.uuid\r\n                    })\r\n                }\r\n                catch(e){\r\n                    console.log(e)\r\n            \r\n                    removeLoading.dismiss()\r\n            \r\n                    return callback(language.get(this.state.lang, \"apiRequestError\"))\r\n                }\r\n            \r\n                if(!res.status){\r\n                    console.log(res.message)\r\n            \r\n                    removeLoading.dismiss()\r\n            \r\n                    return callback(res.message)\r\n                }\r\n\r\n                removeLoading.dismiss()\r\n                \r\n                return callback(null)\r\n            }\r\n\r\n            const editFolderLink = async (callback) => {\r\n                let editLoading = await loadingController.create({\r\n                    message: \"\"\r\n                })\r\n\r\n                editLoading.present()\r\n\r\n                try{\r\n                    var res = await utils.apiRequest(\"POST\", \"/v1/dir/link/edit\", {\r\n                        apiKey: this.state.userAPIKey,\r\n                        uuid: item.uuid,\r\n                        expiration: expires,\r\n                        password: password,\r\n                        passwordHashed: utils.hashFn(password),\r\n                        downloadBtn: downloadBtn\r\n                    })\r\n                }\r\n                catch(e){\r\n                    console.log(e)\r\n            \r\n                    editLoading.dismiss()\r\n            \r\n                    return callback(language.get(this.state.lang, \"apiRequestError\"))\r\n                }\r\n            \r\n                if(!res.status){\r\n                    console.log(res.message)\r\n            \r\n                    editLoading.dismiss()\r\n            \r\n                    return callback(res.message)\r\n                }\r\n\r\n                editLoading.dismiss()\r\n                \r\n                return callback(null)\r\n            }\r\n\r\n            const createFolderLink = async (callback) => {\r\n                let createLoading = await loadingController.create({\r\n                    message: \"\"\r\n                })\r\n\r\n                createLoading.present()\r\n\r\n                try{\r\n                    var res = await utils.apiRequest(\"POST\", \"/v1/download/dir\", {\r\n                        apiKey: this.state.userAPIKey,\r\n                        uuid: item.uuid\r\n                    })\r\n                }\r\n                catch(e){\r\n                    console.log(e)\r\n            \r\n                    createLoading.dismiss()\r\n            \r\n                    return callback(language.get(this.state.lang, \"apiRequestError\"))\r\n                }\r\n            \r\n                if(!res.status){\r\n                    console.log(res.message)\r\n            \r\n                    createLoading.dismiss()\r\n            \r\n                    return callback(res.message)\r\n                }\r\n\r\n                let key = utils.generateRandomString(32)\r\n                let keyEnc = utils.cryptoJSEncrypt(key, this.state.userMasterKeys[this.state.userMasterKeys.length - 1])\r\n                let newLinkUUID = utils.uuidv4()\r\n                let totalItems = (res.data.folders.length + res.data.files.length)\r\n                let doneItems = 0\r\n                let erroredItems = 0\r\n\r\n                const itemAdded = () => {\r\n                    doneItems += 1\r\n\r\n                    createLoading.message = language.get(this.state.lang, \"folderLinkAddedItemsCount\", true, [\"__ADDED__\", \"__TOTAL__\"], [doneItems, totalItems])\r\n\r\n                    if(doneItems >= totalItems){\r\n                        createLoading.dismiss()\r\n\r\n                        if(erroredItems > 0){\r\n                            console.log(\"Errored items: \" + erroredItems)\r\n                        }\r\n\r\n                        linkUUID = newLinkUUID\r\n            \r\n                        return callback(null , {\r\n                            linkUUID: linkUUID,\r\n                            linkKey: key\r\n                        })\r\n                    }\r\n                }\r\n\r\n                const addItemRequest = async (data, tries, maxTries, cb) => {\r\n                    if(tries >= maxTries){\r\n\t\t\t\t\t\treturn cb(language.get(this.state.lang, \"apiRequestError\"))\r\n                    }\r\n                    \r\n                    try{\r\n                        var res = await utils.apiRequest(\"POST\", \"/v1/dir/link/add\", data)\r\n                    }\r\n                    catch(e){\r\n                        console.log(e)\r\n                \r\n                        return setTimeout(() => {\r\n                            addItemRequest(data, (tries + 1), maxTries, cb)\r\n                        }, 1000)\r\n                    }\r\n                \r\n                    return cb(null)\r\n                }\r\n\r\n                const addItem = async (itemType, itemToAdd) => {\r\n                    await window.customVariables.shareItemSemaphore.acquire()\r\n\r\n                    let itemMetadata = \"\"\r\n\r\n\t\t\t\t\tif(itemType == \"file\"){\r\n\t\t\t\t\t\titemMetadata = utils.cryptoJSEncrypt(JSON.stringify({\r\n\t\t\t\t\t\t\tname: itemToAdd.name,\r\n\t\t\t\t\t\t\tmime: itemToAdd.mime,\r\n\t\t\t\t\t\t\tkey: itemToAdd.key,\r\n\t\t\t\t\t\t\tsize: parseInt(itemToAdd.size)\r\n\t\t\t\t\t\t}), key)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\titemMetadata = utils.cryptoJSEncrypt(JSON.stringify({\r\n\t\t\t\t\t\t\tname: item.name\r\n\t\t\t\t\t\t}), key)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\taddItemRequest({\r\n\t\t\t\t\t\tapiKey: window.customVariables.apiKey,\r\n\t\t\t\t\t\tuuid: itemToAdd.uuid,\r\n\t\t\t\t\t\tparent: itemToAdd.parent,\r\n\t\t\t\t\t\tlinkUUID: newLinkUUID,\r\n\t\t\t\t\t\ttype: itemType,\r\n\t\t\t\t\t\tmetadata: itemMetadata,\r\n\t\t\t\t\t\tkey: keyEnc,\r\n\t\t\t\t\t\texpiration: \"never\",\r\n\t\t\t\t\t\tpassword: \"empty\",\r\n\t\t\t\t\t\tpasswordHashed: utils.hashFn(\"empty\"),\r\n\t\t\t\t\t\tdownloadBtn: \"enable\"\r\n\t\t\t\t\t}, 0, 32, (err) => {\r\n\t\t\t\t\t\twindow.customVariables.shareItemSemaphore.release()\r\n\r\n\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\tconsole.log(err)\r\n\r\n\t\t\t\t\t\t\terroredItems += 1\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\titemAdded()\r\n\t\t\t\t\t}) \r\n                }\r\n\r\n                for(let i = 0; i < res.data.folders.length; i++){\r\n\t\t\t\t\tlet folder = res.data.folders[i]\r\n\r\n\t\t\t\t\tawait window.customVariables.decryptShareItemSemaphore.acquire()\r\n\r\n\t\t\t\t\taddItem(\"folder\", {\r\n\t\t\t\t\t\tuuid: folder.uuid,\r\n\t\t\t\t\t\tparent: folder.parent,\r\n\t\t\t\t\t\tname: utils.decryptCryptoJSFolderName(folder.name, this.state.userMasterKeys, folder.uuid)\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\twindow.customVariables.decryptShareItemSemaphore.release()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(let i = 0; i < res.data.files.length; i++){\r\n\t\t\t\t\tlet file = res.data.files[i]\r\n\r\n\t\t\t\t\tawait window.customVariables.decryptShareItemSemaphore.acquire()\r\n\r\n\t\t\t\t\tlet fileMetadata = utils.decryptFileMetadata(file.metadata, this.state.userMasterKeys, file.uuid)\r\n\r\n\t\t\t\t\taddItem(\"file\", {\r\n\t\t\t\t\t\tuuid: file.uuid,\r\n\t\t\t\t\t\tparent: file.parent,\r\n\t\t\t\t\t\tname: fileMetadata.name,\r\n\t\t\t\t\t\tmime: fileMetadata.mime,\r\n\t\t\t\t\t\tkey: fileMetadata.key,\r\n\t\t\t\t\t\tsize: fileMetadata.size\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\twindow.customVariables.decryptShareItemSemaphore.release()\r\n\t\t\t\t}\r\n            }\r\n\r\n            loading.dismiss()\r\n\r\n            if(type == \"enable\"){\r\n                if(isEdit){\r\n                    editFolderLink((err) => {\r\n                        if(err){\r\n                            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                        }\r\n                    })\r\n                }\r\n                else{\r\n                    createFolderLink((err, linkData) => {\r\n                        if(err){\r\n                            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                        }\r\n    \r\n                        document.getElementById(\"public-link-enabled-toggle\").checked = true\r\n                        document.getElementById(\"public-link-input\").value = \"https://filen.io/f/\" + linkData.linkUUID + \"#!\" + linkData.linkKey\r\n\r\n                        document.getElementById(\"enable-public-link-content\").style.display = \"none\"\r\n                        document.getElementById(\"public-link-enabled-content\").style.display = \"block\"\r\n                    })\r\n                }\r\n            }\r\n            else{\r\n                removeFolderLink((err) => {\r\n                    if(err){\r\n                        return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                    }\r\n\r\n                    document.getElementById(\"enable-public-link-content\").style.display = \"block\"\r\n                    document.getElementById(\"public-link-enabled-content\").style.display = \"none\"\r\n\r\n                    this.updateItemList()\r\n                })\r\n            }\r\n\r\n            return true\r\n        }\r\n    }\r\n\r\n    window.customFunctions.copyPublicLinkToClipboard = async () => {\r\n        if(!Capacitor.isNative){\r\n            return false\r\n        }\r\n\r\n        try{\r\n            let link = document.getElementById(\"public-link-input\").value\r\n\r\n            await Plugins.Clipboard.write({\r\n                url: link\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n\r\n            return this.spawnToast(language.get(this.state.lang, \"couldNotCopyToClipboard\")) \r\n        }\r\n\r\n        return this.spawnToast(language.get(this.state.lang, \"copiedToClipboard\")) \r\n    }\r\n\r\n    window.customFunctions.clearThumbnailCache = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"settingsClearThumbnailCacheHeader\"),\r\n            message: language.get(this.state.lang, \"settingsClearThumbnailCacheInfo\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: async () => {\r\n                        if(!Capacitor.isNative){\r\n                            return alert.dismiss()\r\n                        }\r\n\r\n                        let dirObj = {\r\n                            path: \"ThumbnailCache/\",\r\n                            directory: FilesystemDirectory.External\r\n                        }\r\n\r\n                        alert.dismiss()\r\n\r\n                        try{\r\n                            await Plugins.Filesystem.rmdir({\r\n                                path: dirObj.path,\r\n                                directory: dirObj.directory,\r\n                                recursive: true\r\n                            })\r\n\r\n                            window.customVariables.thumbnailCache = {}\r\n                            window.customVariables.thumbnailBlobCache = {}\r\n                            window.customVariables.lastThumbnailCacheLength = undefined\r\n\r\n                            window.customFunctions.saveThumbnailCache()\r\n                        }\r\n                        catch(e){\r\n                            console.log(e)\r\n                        }\r\n\r\n                        return this.spawnToast(language.get(this.state.lang, \"settingsClearThumbnailCacheDone\"))\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.openOrderBy = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"orderBy\"),\r\n            inputs: [\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderByName\"),\r\n                    value: \"name\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"name\") !== -1 ? true : false)\r\n                },\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderBySize\"),\r\n                    value: \"size\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"size\") !== -1 ? true : false)\r\n                },\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderByDate\"),\r\n                    value: \"date\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"date\") !== -1 ? true : false)\r\n                },\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderByType\"),\r\n                    value: \"type\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"type\") !== -1 ? true : false)\r\n                }\r\n            ],\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"orderByReset\"),\r\n                    handler: () => {\r\n                        let sortedItems = utils.orderItemsByType(this.state.itemList, \"dateDesc\")\r\n\r\n                        window.customVariables.orderBy = \"nameAsc\"\r\n                        window.customVariables.itemList = sortedItems\r\n\r\n                        return this.setState({\r\n                            itemList: sortedItems\r\n                        }, () => {\r\n                            this.forceUpdate()\r\n                        })\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: async (type) => {\r\n                        let alert = await alertController.create({\r\n                            header: language.get(this.state.lang, \"orderByDirection\"),\r\n                            inputs: [\r\n                                {\r\n                                    type: \"radio\",\r\n                                    label: language.get(this.state.lang, \"orderByDirectionAsc\"),\r\n                                    value: \"Asc\",\r\n                                    checked: (window.customVariables.orderBy.indexOf(\"Asc\") !== -1 ? true : false)\r\n                                },\r\n                                {\r\n                                    type: \"radio\",\r\n                                    label: language.get(this.state.lang, \"orderByDirectionDesc\"),\r\n                                    value: \"Desc\",\r\n                                    checked: (window.customVariables.orderBy.indexOf(\"Desc\") !== -1 ? true : false)\r\n                                }\r\n                            ],\r\n                            buttons: [\r\n                                {\r\n                                    text: language.get(this.state.lang, \"cancel\"),\r\n                                    role: \"cancel\",\r\n                                    handler: () => {\r\n                                        return false\r\n                                    }\r\n                                },\r\n                                {\r\n                                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                                    handler: (direction) => {\r\n                                        let typeAndDirection = type + direction\r\n\r\n                                        console.log(typeAndDirection)\r\n\r\n                                        let sortedItems = utils.orderItemsByType(this.state.itemList, typeAndDirection)\r\n                \r\n                                        window.customVariables.orderBy = typeAndDirection\r\n                                        window.customVariables.itemList = sortedItems\r\n                \r\n                                        return this.setState({\r\n                                            itemList: sortedItems\r\n                                        }, () => {\r\n                                            this.forceUpdate()\r\n                                        })\r\n                                    }\r\n                                }\r\n                            ]\r\n                        })\r\n\r\n                        return alert.present()\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        window.customFunctions.dismissPopover()\r\n\r\n        return alert.present()\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}