{"ast":null,"code":"import _classCallCheck from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _wrapNativeSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";import _regeneratorRuntime from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Capacitor,Plugins,FilesystemDirectory}from\"@capacitor/core\";import{modalController,popoverController,menuController,alertController,loadingController,actionSheetController}from\"@ionic/core\";import*as language from\"../utils/language\";import*as Ionicons from'ionicons/icons';var utils=require(\"../utils/utils\");export function windowRouter(){var _this=this;window.onhashchange=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var routeEx,foldersInRoute,lastFolderInRoute;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(window.currentHref!==window.location.href)){_context.next=10;break;}window.currentHref=window.location.href;_this.setState({currentHref:window.currentHref});routeEx=window.location.hash.split(\"/\");if(!_this.state.isLoggedIn){_context.next=10;break;}if(!(routeEx[1]==\"base\"||routeEx[1]==\"shared-in\"||routeEx[1]==\"shared-out\"||routeEx[1]==\"trash\")){_context.next=10;break;}_context.next=8;return _this.updateItemList();case 8:foldersInRoute=routeEx.slice(2);if(foldersInRoute.length>0){lastFolderInRoute=foldersInRoute[foldersInRoute.length-1];if(window.customVariables.cachedFolders[lastFolderInRoute]){_this.setState({mainToolbarTitle:window.customVariables.cachedFolders[lastFolderInRoute].name,showMainToolbarBackButton:true});}else{_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"myCloud\"),showMainToolbarBackButton:false});}}else{if(routeEx[1]==\"shared-in\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"sharedInTitle\"),showMainToolbarBackButton:false});}else if(routeEx[1]==\"shared-out\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"sharedOutTitle\"),showMainToolbarBackButton:false});}else if(routeEx[1]==\"trash\"){_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"trashTitle\"),showMainToolbarBackButton:false});}else{_this.setState({mainToolbarTitle:language.get(_this.state.lang,\"myCloud\"),showMainToolbarBackButton:false});}}case 10:case\"end\":return _context.stop();}}},_callee);}));}export function setupWindowFunctions(){var _this2=this;var script=document.createElement(\"script\");script.type=\"text/javascript\";script.src=\"assets/pdf/build/pdf.js\";document.getElementsByTagName(\"head\")[0].appendChild(script);window.customFunctions={};window.customVariables={};window.customVariables.itemList=[];window.customVariables.lang=this.state.lang;window.customVariables.cachedFolders={};window.customVariables.cachedFiles={};window.customVariables.cachedMetadata={};window.customVariables.keyUpdateInterval=undefined;window.customVariables.usageUpdateInterval=undefined;window.customVariables.apiKey=\"\";window.customVariables.uploadSemaphore=new utils.Semaphore(3);window.customVariables.uploadChunkSemaphore=new utils.Semaphore(5);window.customVariables.downloadSemaphore=new utils.Semaphore(5);window.customVariables.downloadChunkSemaphore=new utils.Semaphore(30);window.customVariables.uploads={};window.customVariables.downloads={};window.customVariables.reloadContentAfterUploadTimeout=undefined;window.customVariables.offlineSavedFiles={};window.customVariables.urlCreator=window.URL||window.webkitURL;window.customVariables.currentPreviewURL=undefined;window.customVariables.reloadAfterActionTimeout=undefined;window.customVariables.nextNativeToastAllowed=Math.floor(+new Date()/1000);window.customVariables.apiCache={};window.customVariables.selectLangInterval=undefined;window.customVariables.stoppedUploads={};window.customVariables.stoppedDownloads={};window.customVariables.stoppedUploadsDone={};window.customVariables.stoppedDownloadsDone={};window.customVariables.lastCachedItemsLength=undefined;window.customVariables.lastAPICacheLength=undefined;window.customVariables.thumbnailCache={};window.customVariables.thumbnailBlobCache={};window.customVariables.currentThumbnailURL=undefined;window.customVariables.lastThumbnailCacheLength=undefined;window.customVariables.thumbnailSemaphore=new utils.Semaphore(2);window.customVariables.updateItemsSemaphore=new utils.Semaphore(1);window.customVariables.getNetworkInfoInterval=undefined;window.customVariables.networkStatus=undefined;window.customVariables.orderBy=\"nameAsc\";window.customVariables.getThumbnailErrors={};window.customVariables.lastGetThumbnailErrorsLength=undefined;window.customVariables.scrollToIndex={};window.onresize=function(){_this2.setState({windowHeight:window.innerHeight,windowWidth:window.innerWidth});};document.onclick=function(e){return window.customFunctions.togglePreviewHeader(e);};window.customFunctions.togglePreviewHeader=function(e){if(typeof e.target==\"undefined\"){return;}if(e.target.innerHTML.indexOf(\"<ion-icon\")!==-1){return false;}if(document.getElementsByClassName(\"preview-header-hidden\").length>0){var header=document.getElementsByClassName(\"preview-header-hidden\")[0];if(header.style.display==\"none\"){header.style.display=\"block\";}else{header.style.display=\"none\";}}};window.customFunctions.getNetworkInfo=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Plugins.Network.getStatus();case 3:window.customVariables.networkStatus=_context2.sent;_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));window.customFunctions.saveOfflineSavedFiles=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Plugins.Storage.set({key:\"offlineSavedFiles\",value:JSON.stringify(window.customVariables.offlineSavedFiles)});case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));window.customFunctions.saveGetThumbnailErrors=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var length;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(typeof window.customVariables.lastGetThumbnailErrorsLength!==\"undefined\")){_context4.next=8;break;}length=JSON.stringify(window.customVariables.getThumbnailErrors);length=length.length;if(!(length==window.customVariables.lastGetThumbnailErrorsLength)){_context4.next=7;break;}return _context4.abrupt(\"return\",false);case 7:window.customVariables.lastGetThumbnailErrorsLength=length;case 8:_context4.prev=8;_context4.next=11;return Plugins.Storage.set({key:\"getThumbnailErrors\",value:JSON.stringify(window.customVariables.getThumbnailErrors)});case 11:_context4.next=16;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](8);console.log(_context4.t0);case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[8,13]]);}));window.customFunctions.saveAPICache=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var length;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(typeof window.customVariables.lastAPICacheLength!==\"undefined\")){_context5.next=8;break;}length=JSON.stringify(window.customVariables.apiCache);length=length.length;if(!(length==window.customVariables.lastAPICacheLength)){_context5.next=7;break;}return _context5.abrupt(\"return\",false);case 7:window.customVariables.lastAPICacheLength=length;case 8:_context5.prev=8;_context5.next=11;return Plugins.Storage.set({key:\"apiCache\",value:JSON.stringify(window.customVariables.apiCache)});case 11:_context5.next=16;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](8);console.log(_context5.t0);case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[8,13]]);}));window.customFunctions.saveThumbnailCache=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var length;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(typeof window.customVariables.lastThumbnailCacheLength!==\"undefined\")){_context6.next=8;break;}length=JSON.stringify(window.customVariables.thumbnailCache);length=length.length;if(!(length==window.customVariables.lastThumbnailCacheLength)){_context6.next=7;break;}return _context6.abrupt(\"return\",false);case 7:window.customVariables.lastThumbnailCacheLength=length;case 8:_context6.prev=8;_context6.next=11;return Plugins.Storage.set({key:\"thumbnailCache\",value:JSON.stringify(window.customVariables.thumbnailCache)});case 11:_context6.next=16;break;case 13:_context6.prev=13;_context6.t0=_context6[\"catch\"](8);console.log(_context6.t0);case 16:case\"end\":return _context6.stop();}}},_callee6,null,[[8,13]]);}));window.customFunctions.saveCachedItems=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var length;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(typeof window.customVariables.lastCachedItemsLength!==\"undefined\")){_context7.next=8;break;}length=JSON.stringify(window.customVariables.cachedFiles)+JSON.stringify(window.customVariables.cachedFolders);length=length.length;if(!(length==window.customVariables.lastCachedItemsLength)){_context7.next=7;break;}return _context7.abrupt(\"return\",false);case 7:window.customVariables.lastCachedItemsLength=length;case 8:_context7.prev=8;_context7.next=11;return Plugins.Storage.set({key:\"cachedFiles\",value:JSON.stringify(window.customVariables.cachedFiles)});case 11:_context7.next=13;return Plugins.Storage.set({key:\"cachedFolders\",value:JSON.stringify(window.customVariables.cachedFolders)});case 13:_context7.next=18;break;case 15:_context7.prev=15;_context7.t0=_context7[\"catch\"](8);console.log(_context7.t0);case 18:case\"end\":return _context7.stop();}}},_callee7,null,[[8,15]]);}));window.customFunctions.dismissActionSheet=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var all,actionSheet,_args8=arguments;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:all=_args8.length>0&&_args8[0]!==undefined?_args8[0]:false;if(!all){_context8.next=11;break;}_context8.prev=2;_context8.next=5;return actionSheetController.dismiss();case 5:return _context8.abrupt(\"return\",true);case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](2);return _context8.abrupt(\"return\",console.log(_context8.t0));case 11:_context8.prev=11;_context8.next=14;return actionSheetController.getTop();case 14:actionSheet=_context8.sent;if(!(typeof actionSheet!==\"undefined\")){_context8.next=17;break;}return _context8.abrupt(\"return\",actionSheet.dismiss());case 17:return _context8.abrupt(\"return\",true);case 20:_context8.prev=20;_context8.t1=_context8[\"catch\"](11);return _context8.abrupt(\"return\",console.log(_context8.t1));case 23:case\"end\":return _context8.stop();}}},_callee8,null,[[2,8],[11,20]]);}));window.customFunctions.dismissPopover=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var all,popover,_args9=arguments;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:all=_args9.length>0&&_args9[0]!==undefined?_args9[0]:false;if(!all){_context9.next=11;break;}_context9.prev=2;_context9.next=5;return popoverController.dismiss();case 5:return _context9.abrupt(\"return\",true);case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](2);return _context9.abrupt(\"return\",console.log(_context9.t0));case 11:_context9.prev=11;_context9.next=14;return popoverController.getTop();case 14:popover=_context9.sent;if(!(typeof popover!==\"undefined\")){_context9.next=17;break;}return _context9.abrupt(\"return\",popover.dismiss());case 17:return _context9.abrupt(\"return\",true);case 20:_context9.prev=20;_context9.t1=_context9[\"catch\"](11);return _context9.abrupt(\"return\",console.log(_context9.t1));case 23:case\"end\":return _context9.stop();}}},_callee9,null,[[2,8],[11,20]]);}));window.customFunctions.dismissModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var all,modal,_args10=arguments;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:all=_args10.length>0&&_args10[0]!==undefined?_args10[0]:false;if(!all){_context10.next=11;break;}_context10.prev=2;_context10.next=5;return modalController.dismiss();case 5:return _context10.abrupt(\"return\",true);case 8:_context10.prev=8;_context10.t0=_context10[\"catch\"](2);return _context10.abrupt(\"return\",console.log(_context10.t0));case 11:_context10.prev=11;_context10.next=14;return modalController.getTop();case 14:modal=_context10.sent;if(!(typeof modal!==\"undefined\")){_context10.next=17;break;}return _context10.abrupt(\"return\",modal.dismiss());case 17:return _context10.abrupt(\"return\",true);case 20:_context10.prev=20;_context10.t1=_context10[\"catch\"](11);return _context10.abrupt(\"return\",console.log(_context10.t1));case 23:case\"end\":return _context10.stop();}}},_callee10,null,[[2,8],[11,20]]);}));window.customFunctions.dismissLoader=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var all,loader,_args11=arguments;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:all=_args11.length>0&&_args11[0]!==undefined?_args11[0]:false;if(!all){_context11.next=11;break;}_context11.prev=2;_context11.next=5;return loadingController.dismiss();case 5:return _context11.abrupt(\"return\",true);case 8:_context11.prev=8;_context11.t0=_context11[\"catch\"](2);return _context11.abrupt(\"return\",console.log(_context11.t0));case 11:_context11.prev=11;_context11.next=14;return loadingController.getTop();case 14:loader=_context11.sent;if(!(typeof loader!==\"undefined\")){_context11.next=17;break;}return _context11.abrupt(\"return\",loader.dismiss());case 17:return _context11.abrupt(\"return\",true);case 20:_context11.prev=20;_context11.t1=_context11[\"catch\"](11);return _context11.abrupt(\"return\",console.log(_context11.t1));case 23:case\"end\":return _context11.stop();}}},_callee11,null,[[2,8],[11,20]]);}));window.customFunctions.dismissAlert=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var all,alert,_args12=arguments;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:all=_args12.length>0&&_args12[0]!==undefined?_args12[0]:false;if(!all){_context12.next=11;break;}_context12.prev=2;_context12.next=5;return alertController.dismiss();case 5:return _context12.abrupt(\"return\",true);case 8:_context12.prev=8;_context12.t0=_context12[\"catch\"](2);return _context12.abrupt(\"return\",console.log(_context12.t0));case 11:_context12.prev=11;_context12.next=14;return alertController.getTop();case 14:alert=_context12.sent;if(!(typeof alert!==\"undefined\")){_context12.next=17;break;}return _context12.abrupt(\"return\",alert.dismiss());case 17:return _context12.abrupt(\"return\",true);case 20:_context12.prev=20;_context12.t1=_context12[\"catch\"](11);return _context12.abrupt(\"return\",console.log(_context12.t1));case 23:case\"end\":return _context12.stop();}}},_callee12,null,[[2,8],[11,20]]);}));window.customFunctions.selectAllItems=function(){var items=[];for(var i=0;i<_this2.state.itemList.length;i++){var item=_this2.state.itemList[i];item.selected=true;items.push(item);}_this2.setState({itemList:items,selectedItems:items.length});return window.customFunctions.dismissPopover();};window.customFunctions.unselectAllItems=function(){var items=[];for(var i=0;i<_this2.state.itemList.length;i++){var item=_this2.state.itemList[i];item.selected=false;items.push(item);}_this2.setState({itemList:items,selectedItems:0});return window.customFunctions.dismissPopover();};window.customFunctions.refreshItemList=function(){_this2.updateItemList();return window.customFunctions.dismissPopover();};window.customFunctions.hideSidebarMenu=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var mainMenu;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return menuController.get(\"sideBarMenu\");case 2:mainMenu=_context13.sent;return _context13.abrupt(\"return\",mainMenu.close());case 4:case\"end\":return _context13.stop();}}},_callee13);}));window.customFunctions.openRegisterModal=function(){return _this2.showRegister();};window.customFunctions.doLogout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return Plugins.Storage.set({key:\"isLoggedIn\",value:\"false\"});case 2:_context14.next=4;return Plugins.Storage.set({key:\"userAPIKey\",value:\"\"});case 4:_context14.next=6;return Plugins.Storage.set({key:\"userEmail\",value:\"\"});case 6:_context14.next=8;return Plugins.Storage.set({key:\"userMasterKeys\",value:JSON.stringify([])});case 8:_context14.next=10;return Plugins.Storage.set({key:\"userPublicKey\",value:\"\"});case 10:_context14.next=12;return Plugins.Storage.set({key:\"userPrivateKey\",value:\"\"});case 12:_this2.setState({isLoggedIn:false});return _context14.abrupt(\"return\",_this2.showLogin());case 14:case\"end\":return _context14.stop();}}},_callee14);}));window.customFunctions.doLogin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){var email,password,twoFactorKey,alert,loading,res,_alert,_alert2,_alert4,_alert5,_alert3;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:email=document.getElementById(\"login-email\").value;password=document.getElementById(\"login-password\").value;twoFactorKey=document.getElementById(\"login-2fa\").value;if(!(!email||!password)){_context15.next=8;break;}_context15.next=6;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginInvalidInputs\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 6:alert=_context15.sent;return _context15.abrupt(\"return\",alert.present());case 8:if(twoFactorKey.length==0){twoFactorKey=\"XXXXXX\";}_context15.next=11;return loadingController.create({message:\"\"});case 11:loading=_context15.sent;loading.present();_context15.prev=13;_context15.next=16;return utils.apiRequest(\"POST\",\"/v1/login\",{email:email,password:password,twoFactorKey:twoFactorKey});case 16:res=_context15.sent;_context15.next=29;break;case 19:_context15.prev=19;_context15.t0=_context15[\"catch\"](13);document.getElementById(\"login-password\").value=\"\";document.getElementById(\"login-2fa\").value=\"\";console.log(_context15.t0);window.customFunctions.dismissLoader();_context15.next=27;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"apiRequestError\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 27:_alert=_context15.sent;return _context15.abrupt(\"return\",_alert.present());case 29:if(res.status){_context15.next=58;break;}if(!(res.message==\"Please enter your Two Factor Authentication code.\")){_context15.next=39;break;}window.customFunctions.dismissLoader();document.getElementById(\"login-2fa-container\").style.display=\"block\";_context15.next=35;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginWith2FACode\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 35:_alert2=_context15.sent;return _context15.abrupt(\"return\",_alert2.present());case 39:document.getElementById(\"login-password\").value=\"\";document.getElementById(\"login-2fa\").value=\"\";window.customFunctions.dismissLoader();if(!(res.message==\"Account not yet activated.\")){_context15.next=49;break;}_context15.next=45;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginAccountNotActivated\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 45:_alert4=_context15.sent;return _context15.abrupt(\"return\",_alert4.present());case 49:if(!(res.message==\"Account not found.\")){_context15.next=54;break;}_context15.next=52;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginAccountNotFound\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 52:_alert5=_context15.sent;return _context15.abrupt(\"return\",_alert5.present());case 54:_context15.next=56;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"loginWrongCredentials\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 56:_alert3=_context15.sent;return _context15.abrupt(\"return\",_alert3.present());case 58:_context15.next=60;return Plugins.Storage.set({key:\"isLoggedIn\",value:\"true\"});case 60:_context15.next=62;return Plugins.Storage.set({key:\"userAPIKey\",value:res.data.apiKey});case 62:_context15.next=64;return Plugins.Storage.set({key:\"userEmail\",value:email});case 64:_context15.next=66;return Plugins.Storage.set({key:\"userMasterKeys\",value:JSON.stringify([utils.hashFn(password)])});case 66:window.customFunctions.dismissLoader(true);window.customFunctions.dismissModal(true);window.customFunctions.dismissLoader();document.getElementById(\"login-email\").value=\"\";document.getElementById(\"login-password\").value=\"\";document.getElementById(\"login-2fa\").value=\"\";return _context15.abrupt(\"return\",_this2.doSetup());case 73:case\"end\":return _context15.stop();}}},_callee15,null,[[13,19]]);}));window.customFunctions.doRegister=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var email,password,passwordRepeat,_alert6,loading,res,_alert7,message,_alert8,alert;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:email=document.getElementById(\"register-email\").value;password=document.getElementById(\"register-password\").value;passwordRepeat=document.getElementById(\"register-password-repeat\").value;if(!(!email||!password||!passwordRepeat)){_context16.next=8;break;}_context16.next=6;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"registerInvalidInputs\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 6:_alert6=_context16.sent;return _context16.abrupt(\"return\",_alert6.present());case 8:_context16.next=10;return loadingController.create({message:\"\"});case 10:loading=_context16.sent;loading.present();_context16.prev=12;_context16.next=15;return utils.apiRequest(\"POST\",\"/v1/register\",{email:email,password:password,passwordRepeat:passwordRepeat});case 15:res=_context16.sent;_context16.next=28;break;case 18:_context16.prev=18;_context16.t0=_context16[\"catch\"](12);document.getElementById(\"register-password\").value=\"\";document.getElementById(\"register-password-repeat\").value=\"\";console.log(_context16.t0);window.customFunctions.dismissLoader();_context16.next=26;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"apiRequestError\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 26:_alert7=_context16.sent;return _context16.abrupt(\"return\",_alert7.present());case 28:if(res.status){_context16.next=38;break;}document.getElementById(\"register-password\").value=\"\";document.getElementById(\"register-password-repeat\").value=\"\";window.customFunctions.dismissLoader();message=\"\";if(res.message.toLowerCase().indexOf(\"invalid email\")!==-1||res.message.toLowerCase().indexOf(\"invalid password\")!==-1||res.message.toLowerCase().indexOf(\"invalid email\")!==-1){message=language.get(_this2.state.lang,\"registerInvalidFields\");}else if(res.message.toLowerCase().indexOf(\"your password needs to be at least 10 characters long\")!==-1){message=language.get(_this2.state.lang,\"registerPasswordAtLeast10Chars\");}else if(res.message.toLowerCase().indexOf(\"passwords do not match\")!==-1){message=language.get(_this2.state.lang,\"registerPasswordsDoNotMatch\");}else if(res.message.toLowerCase().indexOf(\"invalid email\")!==-1){message=language.get(_this2.state.lang,\"registerInvalidEmail\");}else if(res.message.toLowerCase().indexOf(\"database error\")!==-1){message=language.get(_this2.state.lang,\"apiRequestError\");}else if(res.message.toLowerCase().indexOf(\"this email is already registered\")!==-1){message=language.get(_this2.state.lang,\"registerEmailAlreadyRegistered\");}else if(res.message.toLowerCase().indexOf(\"we could not send an email at this time, please try again later\")!==-1){message=language.get(_this2.state.lang,\"registerCouldNotSendEmail\");}_context16.next=36;return alertController.create({header:\"\",subHeader:\"\",message:message,buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 36:_alert8=_context16.sent;return _context16.abrupt(\"return\",_alert8.present());case 38:document.getElementById(\"register-email\").value=\"\";document.getElementById(\"register-password\").value=\"\";document.getElementById(\"register-password-repeat\").value=\"\";window.customFunctions.dismissLoader();_context16.next=44;return alertController.create({header:\"\",subHeader:\"\",message:language.get(_this2.state.lang,\"registerSuccess\"),buttons:[language.get(_this2.state.lang,\"alertOkButton\").toUpperCase()]});case 44:alert=_context16.sent;return _context16.abrupt(\"return\",alert.present());case 46:case\"end\":return _context16.stop();}}},_callee16,null,[[12,18]]);}));window.customFunctions.openSettingsModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(){return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:return _context17.abrupt(\"return\",_this2.openSettingsModal());case 1:case\"end\":return _context17.stop();}}},_callee17);}));window.customFunctions.openEncryptionModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var appLang,appDarkMode,modalId,modal;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:appLang=_this2.state.lang;appDarkMode=_this2.state.darkMode;modalId=\"encryption-modal-\"+utils.generateRandomClassName();customElements.define(modalId,/*#__PURE__*/function(_HTMLElement){_inherits(ModalContent,_HTMLElement);var _super=_createSuper(ModalContent);function ModalContent(){_classCallCheck(this,ModalContent);return _super.apply(this,arguments);}_createClass(ModalContent,[{key:\"connectedCallback\",value:function connectedCallback(){this.innerHTML=\"\\n                    <ion-header>\\n                        <ion-toolbar>\\n                            <ion-buttons slot=\\\"start\\\">\\n                                <ion-button onClick=\\\"window.customFunctions.dismissModal()\\\">\\n                                    <ion-icon slot=\\\"icon-only\\\" icon=\\\"\"+Ionicons.arrowBack+\"\\\"></ion-icon>\\n                                </ion-button>\\n                            </ion-buttons>\\n                            <ion-title>\\n                                \"+language.get(appLang,\"encryption\")+\"\\n                            </ion-title>\\n                        </ion-toolbar>\\n                    </ion-header>\\n                    <ion-content style=\\\"--background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\" fullscreen>\\n                        <ion-list>\\n                            <ion-item-divider style=\\\"--background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\">\\n                                <ion-label>\\n                                    \"+language.get(appLang,\"encryptionModalHeader\")+\"\\n                                </ion-label>\\n                            </ion-item-divider>\\n                            <ion-item lines=\\\"none\\\" style=\\\"padding-top: 10px;\\\">\\n                                \"+language.get(appLang,\"encryptionModalFirstText\")+\"\\n                            </ion-item>\\n                            <ion-item-divider style=\\\"padding-top: 15px; --background: \"+(appDarkMode?\"#1E1E1E\":\"white\")+\"\\\">\\n                                <ion-label>\\n                                    \"+language.get(appLang,\"encryptionModalHeaderHowItWorks\")+\"\\n                                </ion-label>\\n                            </ion-item-divider>\\n                            <ion-item lines=\\\"none\\\" style=\\\"padding-top: 10px;\\\">\\n                                \"+language.get(appLang,\"encryptionModalHowItWorksText\")+\"\\n                            </ion-item>\\n                        </ion-list>\\n                    </ion-content>\\n                \";}}]);return ModalContent;}(/*#__PURE__*/_wrapNativeSuper(HTMLElement)));_context18.next=6;return modalController.create({component:modalId,swipeToClose:true,showBackdrop:false,backdropDismiss:false,cssClass:\"modal-fullscreen\"});case 6:modal=_context18.sent;return _context18.abrupt(\"return\",modal.present());case 8:case\"end\":return _context18.stop();}}},_callee18);}));window.customFunctions.openHelpModal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(){var actionSheet;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.next=2;return actionSheetController.create({header:language.get(_this2.state.lang,\"help\"),buttons:[{text:language.get(_this2.state.lang,\"support\"),icon:Ionicons.helpBuoyOutline,handler:function handler(){window.open(\"https://support.filen.io/\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"faq\"),icon:Ionicons.informationCircle,handler:function handler(){window.open(\"https://filen.io/faq\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"tos\"),icon:Ionicons.informationCircleOutline,handler:function handler(){window.open(\"https://filen.io/terms\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"privacyPolicy\"),icon:Ionicons.informationCircleOutline,handler:function handler(){window.open(\"https://filen.io/privacy\",\"_system\");return false;}},{text:language.get(_this2.state.lang,\"cancel\"),icon:\"close\",role:\"cancel\"}]});case 2:actionSheet=_context19.sent;return _context19.abrupt(\"return\",actionSheet.present());case 4:case\"end\":return _context19.stop();}}},_callee19);}));window.customFunctions.queueFileUpload=this.queueFileUpload;window.customFunctions.queueFileDownload=this.queueFileDownload;window.customFunctions.openItemActionSheetFromJSON=function(itemJSON){var item=JSON.parse(window.atob(itemJSON));return _this2.spawnItemActionSheet(item);};window.customFunctions.moveSelectedItems=function(){return _this2.moveSelectedItems();};window.customFunctions.trashSelectedItems=function(){return _this2.trashSelectedItems();};window.customFunctions.restoreSelectedItems=function(){return _this2.restoreSelectedItems();};window.customFunctions.removeSelectedItemsFromSharedIn=function(){return _this2.removeSelectedItemsFromSharedIn();};window.customFunctions.stopSharingSelectedItems=function(){return _this2.stopSharingSelectedItems();};window.customFunctions.downloadSelectedItems=function(){return _this2.downloadSelectedItems();};window.customFunctions.storeSelectedItemsOffline=function(){return _this2.storeSelectedItemsOffline();};window.customFunctions.shareSelectedItems=function(){return _this2.shareSelectedItems();};window.customFunctions.settingsToggleDarkMode=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:if(!_this2.state.darkMode){_context20.next=7;break;}_context20.next=3;return Plugins.Storage.set({key:\"darkMode\",value:\"false\"});case 3:document.getElementById(\"settings-dark-mode-toggle\").checked=false;return _context20.abrupt(\"return\",_this2.setState({darkMode:false},function(){document.location.href=\"index.html\";}));case 7:_context20.next=9;return Plugins.Storage.set({key:\"darkMode\",value:\"true\"});case 9:document.getElementById(\"settings-dark-mode-toggle\").checked=true;return _context20.abrupt(\"return\",_this2.setState({darkMode:true},function(){document.location.href=\"index.html\";}));case 11:case\"end\":return _context20.stop();}}},_callee20);}));window.customFunctions.loginToggleDarkMode=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:if(!_this2.state.darkMode){_context21.next=6;break;}_context21.next=3;return Plugins.Storage.set({key:\"darkMode\",value:\"false\"});case 3:return _context21.abrupt(\"return\",_this2.setState({darkMode:false},function(){document.location.href=\"index.html\";}));case 6:_context21.next=8;return Plugins.Storage.set({key:\"darkMode\",value:\"true\"});case 8:return _context21.abrupt(\"return\",_this2.setState({darkMode:true},function(){document.location.href=\"index.html\";}));case 9:case\"end\":return _context21.stop();}}},_callee21);}));window.customFunctions.saveSettings=/*#__PURE__*/function(){var _ref22=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(newSettings){return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.next=2;return Plugins.Storage.set({key:\"settings\",value:JSON.stringify(newSettings)});case 2:return _context22.abrupt(\"return\",_this2.setState({settings:newSettings}));case 3:case\"end\":return _context22.stop();}}},_callee22);}));return function(_x){return _ref22.apply(this,arguments);};}();window.customFunctions.toggleOnlyWifi=function(){var newSettings=_this2.state.settings;var newVal=!newSettings.onlyWifi;newSettings.onlyWifi=newVal;document.getElementById(\"settings-only-wifi-toggle\").checked=!newVal;return window.customFunctions.saveSettings(newSettings);};window.customFunctions.logoutUser=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(){return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:_context23.next=2;return Plugins.Storage.remove({key:\"isLoggedIn\"});case 2:_context23.next=4;return Plugins.Storage.remove({key:\"userAPIKey\"});case 4:_context23.next=6;return Plugins.Storage.remove({key:\"userEmail\"});case 6:_context23.next=8;return Plugins.Storage.remove({key:\"userMasterKeys\"});case 8:_context23.next=10;return Plugins.Storage.remove({key:\"userPublicKey\"});case 10:_context23.next=12;return Plugins.Storage.remove({key:\"userPrivateKey\"});case 12:_context23.next=14;return Plugins.Storage.remove({key:\"offlineSavedFiles\"});case 14:_context23.next=16;return Plugins.Storage.remove({key:\"apiCache\"});case 16:return _context23.abrupt(\"return\",document.location.href=\"index.html\");case 17:case\"end\":return _context23.stop();}}},_callee23);}));window.customFunctions.doLogout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(){var alert;return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:_context24.next=2;return alertController.create({header:language.get(_this2.state.lang,\"logoutAlertHeader\"),message:language.get(_this2.state.lang,\"logoutConfirmation\"),buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function handler(){return window.customFunctions.logoutUser();}}]});case 2:alert=_context24.sent;return _context24.abrupt(\"return\",alert.present());case 4:case\"end\":return _context24.stop();}}},_callee24);}));window.customFunctions.emptyTrash=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee26(){var alert;return _regeneratorRuntime.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_context26.next=2;return alertController.create({header:language.get(_this2.state.lang,\"emptyTrashHeader\"),message:language.get(_this2.state.lang,\"emptyTrashWarning\"),buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function(){var _handler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(){var loading,res;return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:_context25.next=2;return loadingController.create({message:\"\"});case 2:loading=_context25.sent;loading.present();_context25.prev=4;_context25.next=7;return utils.apiRequest(\"POST\",\"/v1/trash/empty\",{apiKey:_this2.state.userAPIKey});case 7:res=_context25.sent;_context25.next=15;break;case 10:_context25.prev=10;_context25.t0=_context25[\"catch\"](4);console.log(_context25.t0);loading.dismiss();return _context25.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\")));case 15:if(res.status){_context25.next=19;break;}console.log(res.message);loading.dismiss();return _context25.abrupt(\"return\",_this2.spawnToast(res.message));case 19:loading.dismiss();_this2.updateItemList();return _context25.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"trashEmptied\")));case 22:case\"end\":return _context25.stop();}}},_callee25,null,[[4,10]]);}));function handler(){return _handler.apply(this,arguments);}return handler;}()}]});case 2:alert=_context26.sent;return _context26.abrupt(\"return\",alert.present());case 4:case\"end\":return _context26.stop();}}},_callee26);}));window.customFunctions.editItemPublicLink=/*#__PURE__*/function(){var _ref26=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee27(itemJSON,type){var item,linkUUID,loading,res;return _regeneratorRuntime.wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:item=JSON.parse(window.atob(itemJSON));linkUUID=utils.uuidv4();_context27.next=4;return loadingController.create({message:\"\"});case 4:loading=_context27.sent;loading.present();_context27.prev=6;_context27.next=9;return utils.apiRequest(\"POST\",\"/v1/link/edit\",{apiKey:_this2.state.userAPIKey,uuid:linkUUID,fileUUID:item.uuid,expiration:\"never\",password:\"empty\",passwordHashed:utils.hashFn(\"empty\"),downloadBtn:\"enable\",type:type});case 9:res=_context27.sent;_context27.next=17;break;case 12:_context27.prev=12;_context27.t0=_context27[\"catch\"](6);console.log(_context27.t0);loading.dismiss();return _context27.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"apiRequestError\")));case 17:if(res.status){_context27.next=21;break;}console.log(res.message);loading.dismiss();return _context27.abrupt(\"return\",_this2.spawnToast(res.message));case 21:loading.dismiss();document.getElementById(\"public-link-enabled-toggle\").checked=true;document.getElementById(\"public-link-input\").value=\"https://filen.io/d/\"+linkUUID+\"#!\"+item.key;if(type==\"enable\"){document.getElementById(\"enable-public-link-content\").style.display=\"none\";document.getElementById(\"public-link-enabled-content\").style.display=\"block\";}else{document.getElementById(\"enable-public-link-content\").style.display=\"block\";document.getElementById(\"public-link-enabled-content\").style.display=\"none\";}return _context27.abrupt(\"return\",true);case 26:case\"end\":return _context27.stop();}}},_callee27,null,[[6,12]]);}));return function(_x2,_x3){return _ref26.apply(this,arguments);};}();window.customFunctions.copyPublicLinkToClipboard=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee28(){var link;return _regeneratorRuntime.wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:if(Capacitor.isNative){_context28.next=2;break;}return _context28.abrupt(\"return\",false);case 2:_context28.prev=2;link=document.getElementById(\"public-link-input\").value;_context28.next=6;return Plugins.Clipboard.write({url:link});case 6:_context28.next=12;break;case 8:_context28.prev=8;_context28.t0=_context28[\"catch\"](2);console.log(_context28.t0);return _context28.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"couldNotCopyToClipboard\")));case 12:return _context28.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"copiedToClipboard\")));case 13:case\"end\":return _context28.stop();}}},_callee28,null,[[2,8]]);}));window.customFunctions.clearThumbnailCache=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee30(){var alert;return _regeneratorRuntime.wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return alertController.create({header:language.get(_this2.state.lang,\"settingsClearThumbnailCacheHeader\"),message:language.get(_this2.state.lang,\"settingsClearThumbnailCacheInfo\"),buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function(){var _handler2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee29(){var dirObj;return _regeneratorRuntime.wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:if(Capacitor.isNative){_context29.next=2;break;}return _context29.abrupt(\"return\",alert.dismiss());case 2:dirObj={path:\"ThumbnailCache/\",directory:FilesystemDirectory.External};alert.dismiss();_context29.prev=4;_context29.next=7;return Plugins.Filesystem.rmdir({path:dirObj.path,directory:dirObj.directory,recursive:true});case 7:window.customVariables.thumbnailCache={};window.customVariables.thumbnailBlobCache={};window.customVariables.lastThumbnailCacheLength=undefined;window.customFunctions.saveThumbnailCache();_context29.next=16;break;case 13:_context29.prev=13;_context29.t0=_context29[\"catch\"](4);console.log(_context29.t0);case 16:return _context29.abrupt(\"return\",_this2.spawnToast(language.get(_this2.state.lang,\"settingsClearThumbnailCacheDone\")));case 17:case\"end\":return _context29.stop();}}},_callee29,null,[[4,13]]);}));function handler(){return _handler2.apply(this,arguments);}return handler;}()}]});case 2:alert=_context30.sent;return _context30.abrupt(\"return\",alert.present());case 4:case\"end\":return _context30.stop();}}},_callee30);}));window.customFunctions.openOrderBy=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee32(){var alert;return _regeneratorRuntime.wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_context32.next=2;return alertController.create({header:language.get(_this2.state.lang,\"orderBy\"),inputs:[{type:\"radio\",label:language.get(_this2.state.lang,\"orderByName\"),value:\"name\",checked:window.customVariables.orderBy.indexOf(\"name\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderBySize\"),value:\"size\",checked:window.customVariables.orderBy.indexOf(\"size\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderByDate\"),value:\"date\",checked:window.customVariables.orderBy.indexOf(\"date\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderByType\"),value:\"type\",checked:window.customVariables.orderBy.indexOf(\"type\")!==-1?true:false}],buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"orderByReset\"),handler:function handler(){var sortedItems=utils.orderItemsByType(_this2.state.itemList,\"dateDesc\");window.customVariables.orderBy=\"nameAsc\";window.customVariables.itemList=sortedItems;return _this2.setState({itemList:sortedItems},function(){_this2.forceUpdate();});}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function(){var _handler3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee31(type){var alert;return _regeneratorRuntime.wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_context31.next=2;return alertController.create({header:language.get(_this2.state.lang,\"orderByDirection\"),inputs:[{type:\"radio\",label:language.get(_this2.state.lang,\"orderByDirectionAsc\"),value:\"Asc\",checked:window.customVariables.orderBy.indexOf(\"Asc\")!==-1?true:false},{type:\"radio\",label:language.get(_this2.state.lang,\"orderByDirectionDesc\"),value:\"Desc\",checked:window.customVariables.orderBy.indexOf(\"Desc\")!==-1?true:false}],buttons:[{text:language.get(_this2.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this2.state.lang,\"alertOkButton\"),handler:function handler(direction){var typeAndDirection=type+direction;console.log(typeAndDirection);var sortedItems=utils.orderItemsByType(_this2.state.itemList,typeAndDirection);window.customVariables.orderBy=typeAndDirection;window.customVariables.itemList=sortedItems;return _this2.setState({itemList:sortedItems},function(){_this2.forceUpdate();});}}]});case 2:alert=_context31.sent;return _context31.abrupt(\"return\",alert.present());case 4:case\"end\":return _context31.stop();}}},_callee31);}));function handler(_x4){return _handler3.apply(this,arguments);}return handler;}()}]});case 2:alert=_context32.sent;window.customFunctions.dismissPopover();return _context32.abrupt(\"return\",alert.present());case 5:case\"end\":return _context32.stop();}}},_callee32);}));}","map":{"version":3,"sources":["/Users/jan/Documents/filen/app/src/components/window.js"],"names":["Capacitor","Plugins","FilesystemDirectory","modalController","popoverController","menuController","alertController","loadingController","actionSheetController","language","Ionicons","utils","require","windowRouter","window","onhashchange","currentHref","location","href","setState","routeEx","hash","split","state","isLoggedIn","updateItemList","foldersInRoute","slice","length","lastFolderInRoute","customVariables","cachedFolders","mainToolbarTitle","name","showMainToolbarBackButton","get","lang","setupWindowFunctions","script","document","createElement","type","src","getElementsByTagName","appendChild","customFunctions","itemList","cachedFiles","cachedMetadata","keyUpdateInterval","undefined","usageUpdateInterval","apiKey","uploadSemaphore","Semaphore","uploadChunkSemaphore","downloadSemaphore","downloadChunkSemaphore","uploads","downloads","reloadContentAfterUploadTimeout","offlineSavedFiles","urlCreator","URL","webkitURL","currentPreviewURL","reloadAfterActionTimeout","nextNativeToastAllowed","Math","floor","Date","apiCache","selectLangInterval","stoppedUploads","stoppedDownloads","stoppedUploadsDone","stoppedDownloadsDone","lastCachedItemsLength","lastAPICacheLength","thumbnailCache","thumbnailBlobCache","currentThumbnailURL","lastThumbnailCacheLength","thumbnailSemaphore","updateItemsSemaphore","getNetworkInfoInterval","networkStatus","orderBy","getThumbnailErrors","lastGetThumbnailErrorsLength","scrollToIndex","onresize","windowHeight","innerHeight","windowWidth","innerWidth","onclick","e","togglePreviewHeader","target","innerHTML","indexOf","getElementsByClassName","header","style","display","getNetworkInfo","Network","getStatus","console","log","saveOfflineSavedFiles","Storage","set","key","value","JSON","stringify","saveGetThumbnailErrors","saveAPICache","saveThumbnailCache","saveCachedItems","dismissActionSheet","all","dismiss","getTop","actionSheet","dismissPopover","popover","dismissModal","modal","dismissLoader","loader","dismissAlert","alert","selectAllItems","items","i","item","selected","push","selectedItems","unselectAllItems","refreshItemList","hideSidebarMenu","mainMenu","close","openRegisterModal","showRegister","doLogout","showLogin","doLogin","email","getElementById","password","twoFactorKey","create","subHeader","message","buttons","toUpperCase","present","loading","apiRequest","res","status","data","hashFn","doSetup","doRegister","passwordRepeat","toLowerCase","openSettingsModal","openEncryptionModal","appLang","appDarkMode","darkMode","modalId","generateRandomClassName","customElements","define","arrowBack","HTMLElement","component","swipeToClose","showBackdrop","backdropDismiss","cssClass","openHelpModal","text","icon","helpBuoyOutline","handler","open","informationCircle","informationCircleOutline","role","queueFileUpload","queueFileDownload","openItemActionSheetFromJSON","itemJSON","parse","atob","spawnItemActionSheet","moveSelectedItems","trashSelectedItems","restoreSelectedItems","removeSelectedItemsFromSharedIn","stopSharingSelectedItems","downloadSelectedItems","storeSelectedItemsOffline","shareSelectedItems","settingsToggleDarkMode","checked","loginToggleDarkMode","saveSettings","newSettings","settings","toggleOnlyWifi","newVal","onlyWifi","logoutUser","remove","emptyTrash","userAPIKey","spawnToast","editItemPublicLink","linkUUID","uuidv4","uuid","fileUUID","expiration","passwordHashed","downloadBtn","copyPublicLinkToClipboard","isNative","link","Clipboard","write","url","clearThumbnailCache","dirObj","path","directory","External","Filesystem","rmdir","recursive","openOrderBy","inputs","label","sortedItems","orderItemsByType","forceUpdate","direction","typeAndDirection"],"mappings":"ogCAAA,OAASA,SAAT,CAAoBC,OAApB,CAA6BC,mBAA7B,KAAwD,iBAAxD,CACA,OAASC,eAAT,CAA0BC,iBAA1B,CAA6CC,cAA7C,CAA6DC,eAA7D,CAA8EC,iBAA9E,CAAiGC,qBAAjG,KAA8H,aAA9H,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,mBAA1B,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,gBAA1B,CAEA,GAAMC,CAAAA,KAAK,CAAGC,OAAO,CAAC,gBAAD,CAArB,CAEA,MAAO,SAASC,CAAAA,YAAT,EAAuB,gBAC1BC,MAAM,CAACC,YAAP,sEAAsB,qLACfD,MAAM,CAACE,WAAP,GAAuBF,MAAM,CAACG,QAAP,CAAgBC,IADxB,2BAEdJ,MAAM,CAACE,WAAP,CAAqBF,MAAM,CAACG,QAAP,CAAgBC,IAArC,CAEA,KAAI,CAACC,QAAL,CAAc,CACVH,WAAW,CAAEF,MAAM,CAACE,WADV,CAAd,EAIII,OARU,CAQAN,MAAM,CAACG,QAAP,CAAgBI,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,CARA,KAUX,KAAI,CAACC,KAAL,CAAWC,UAVA,+BAWPJ,OAAO,CAAC,CAAD,CAAP,EAAc,MAAd,EAAwBA,OAAO,CAAC,CAAD,CAAP,EAAc,WAAtC,EAAqDA,OAAO,CAAC,CAAD,CAAP,EAAc,YAAnE,EAAmFA,OAAO,CAAC,CAAD,CAAP,EAAc,OAX1F,iDAYA,CAAA,KAAI,CAACK,cAAL,EAZA,QAcFC,cAdE,CAceN,OAAO,CAACO,KAAR,CAAc,CAAd,CAdf,CAgBN,GAAGD,cAAc,CAACE,MAAf,CAAwB,CAA3B,CAA6B,CACrBC,iBADqB,CACDH,cAAc,CAACA,cAAc,CAACE,MAAf,CAAwB,CAAzB,CADb,CAGzB,GAAGd,MAAM,CAACgB,eAAP,CAAuBC,aAAvB,CAAqCF,iBAArC,CAAH,CAA2D,CACvD,KAAI,CAACV,QAAL,CAAc,CACVa,gBAAgB,CAAElB,MAAM,CAACgB,eAAP,CAAuBC,aAAvB,CAAqCF,iBAArC,EAAwDI,IADhE,CAEVC,yBAAyB,CAAE,IAFjB,CAAd,EAIH,CALD,IAMI,CACA,KAAI,CAACf,QAAL,CAAc,CACVa,gBAAgB,CAAEvB,QAAQ,CAAC0B,GAAT,CAAa,KAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,SAA9B,CADR,CAEVF,yBAAyB,CAAE,KAFjB,CAAd,EAIH,CACJ,CAfD,IAgBI,CACA,GAAGd,OAAO,CAAC,CAAD,CAAP,EAAc,WAAjB,CAA6B,CACzB,KAAI,CAACD,QAAL,CAAc,CACVa,gBAAgB,CAAEvB,QAAQ,CAAC0B,GAAT,CAAa,KAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,CADR,CAEVF,yBAAyB,CAAE,KAFjB,CAAd,EAIH,CALD,IAMK,IAAGd,OAAO,CAAC,CAAD,CAAP,EAAc,YAAjB,CAA8B,CAC/B,KAAI,CAACD,QAAL,CAAc,CACVa,gBAAgB,CAAEvB,QAAQ,CAAC0B,GAAT,CAAa,KAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,gBAA9B,CADR,CAEVF,yBAAyB,CAAE,KAFjB,CAAd,EAIH,CALI,IAMA,IAAGd,OAAO,CAAC,CAAD,CAAP,EAAc,OAAjB,CAAyB,CAC1B,KAAI,CAACD,QAAL,CAAc,CACVa,gBAAgB,CAAEvB,QAAQ,CAAC0B,GAAT,CAAa,KAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,YAA9B,CADR,CAEVF,yBAAyB,CAAE,KAFjB,CAAd,EAIH,CALI,IAMD,CACA,KAAI,CAACf,QAAL,CAAc,CACVa,gBAAgB,CAAEvB,QAAQ,CAAC0B,GAAT,CAAa,KAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,SAA9B,CADR,CAEVF,yBAAyB,CAAE,KAFjB,CAAd,EAIH,CACJ,CAzDK,uDAAtB,GA8DH,CAED,MAAO,SAASG,CAAAA,oBAAT,EAA+B,iBAClC,GAAIC,CAAAA,MAAM,CAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb,CAEAF,MAAM,CAACG,IAAP,CAAc,iBAAd,CACAH,MAAM,CAACI,GAAP,CAAa,yBAAb,CAEAH,QAAQ,CAACI,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,WAAzC,CAAqDN,MAArD,EAGAxB,MAAM,CAAC+B,eAAP,CAAyB,EAAzB,CACA/B,MAAM,CAACgB,eAAP,CAAyB,EAAzB,CAEAhB,MAAM,CAACgB,eAAP,CAAuBgB,QAAvB,CAAkC,EAAlC,CACAhC,MAAM,CAACgB,eAAP,CAAuBM,IAAvB,CAA8B,KAAKb,KAAL,CAAWa,IAAzC,CACAtB,MAAM,CAACgB,eAAP,CAAuBC,aAAvB,CAAuC,EAAvC,CACAjB,MAAM,CAACgB,eAAP,CAAuBiB,WAAvB,CAAqC,EAArC,CACAjC,MAAM,CAACgB,eAAP,CAAuBkB,cAAvB,CAAwC,EAAxC,CACAlC,MAAM,CAACgB,eAAP,CAAuBmB,iBAAvB,CAA2CC,SAA3C,CACApC,MAAM,CAACgB,eAAP,CAAuBqB,mBAAvB,CAA6CD,SAA7C,CACApC,MAAM,CAACgB,eAAP,CAAuBsB,MAAvB,CAAgC,EAAhC,CACAtC,MAAM,CAACgB,eAAP,CAAuBuB,eAAvB,CAAyC,GAAI1C,CAAAA,KAAK,CAAC2C,SAAV,CAAoB,CAApB,CAAzC,CACAxC,MAAM,CAACgB,eAAP,CAAuByB,oBAAvB,CAA8C,GAAI5C,CAAAA,KAAK,CAAC2C,SAAV,CAAoB,CAApB,CAA9C,CACAxC,MAAM,CAACgB,eAAP,CAAuB0B,iBAAvB,CAA2C,GAAI7C,CAAAA,KAAK,CAAC2C,SAAV,CAAoB,CAApB,CAA3C,CACAxC,MAAM,CAACgB,eAAP,CAAuB2B,sBAAvB,CAAgD,GAAI9C,CAAAA,KAAK,CAAC2C,SAAV,CAAoB,EAApB,CAAhD,CACAxC,MAAM,CAACgB,eAAP,CAAuB4B,OAAvB,CAAiC,EAAjC,CACA5C,MAAM,CAACgB,eAAP,CAAuB6B,SAAvB,CAAmC,EAAnC,CACA7C,MAAM,CAACgB,eAAP,CAAuB8B,+BAAvB,CAAyDV,SAAzD,CACApC,MAAM,CAACgB,eAAP,CAAuB+B,iBAAvB,CAA2C,EAA3C,CACA/C,MAAM,CAACgB,eAAP,CAAuBgC,UAAvB,CAAoChD,MAAM,CAACiD,GAAP,EAAcjD,MAAM,CAACkD,SAAzD,CACAlD,MAAM,CAACgB,eAAP,CAAuBmC,iBAAvB,CAA2Cf,SAA3C,CACApC,MAAM,CAACgB,eAAP,CAAuBoC,wBAAvB,CAAkDhB,SAAlD,CACApC,MAAM,CAACgB,eAAP,CAAuBqC,sBAAvB,CAAgDC,IAAI,CAACC,KAAL,CAAY,CAAC,GAAIC,CAAAA,IAAJ,EAAF,CAAgB,IAA3B,CAAhD,CACAxD,MAAM,CAACgB,eAAP,CAAuByC,QAAvB,CAAkC,EAAlC,CACAzD,MAAM,CAACgB,eAAP,CAAuB0C,kBAAvB,CAA4CtB,SAA5C,CACApC,MAAM,CAACgB,eAAP,CAAuB2C,cAAvB,CAAwC,EAAxC,CACA3D,MAAM,CAACgB,eAAP,CAAuB4C,gBAAvB,CAA0C,EAA1C,CACA5D,MAAM,CAACgB,eAAP,CAAuB6C,kBAAvB,CAA4C,EAA5C,CACA7D,MAAM,CAACgB,eAAP,CAAuB8C,oBAAvB,CAA8C,EAA9C,CACA9D,MAAM,CAACgB,eAAP,CAAuB+C,qBAAvB,CAA+C3B,SAA/C,CACApC,MAAM,CAACgB,eAAP,CAAuBgD,kBAAvB,CAA4C5B,SAA5C,CACApC,MAAM,CAACgB,eAAP,CAAuBiD,cAAvB,CAAwC,EAAxC,CACAjE,MAAM,CAACgB,eAAP,CAAuBkD,kBAAvB,CAA4C,EAA5C,CACAlE,MAAM,CAACgB,eAAP,CAAuBmD,mBAAvB,CAA6C/B,SAA7C,CACApC,MAAM,CAACgB,eAAP,CAAuBoD,wBAAvB,CAAkDhC,SAAlD,CACApC,MAAM,CAACgB,eAAP,CAAuBqD,kBAAvB,CAA4C,GAAIxE,CAAAA,KAAK,CAAC2C,SAAV,CAAoB,CAApB,CAA5C,CACAxC,MAAM,CAACgB,eAAP,CAAuBsD,oBAAvB,CAA8C,GAAIzE,CAAAA,KAAK,CAAC2C,SAAV,CAAoB,CAApB,CAA9C,CACAxC,MAAM,CAACgB,eAAP,CAAuBuD,sBAAvB,CAAgDnC,SAAhD,CACApC,MAAM,CAACgB,eAAP,CAAuBwD,aAAvB,CAAuCpC,SAAvC,CACApC,MAAM,CAACgB,eAAP,CAAuByD,OAAvB,CAAiC,SAAjC,CACAzE,MAAM,CAACgB,eAAP,CAAuB0D,kBAAvB,CAA4C,EAA5C,CACA1E,MAAM,CAACgB,eAAP,CAAuB2D,4BAAvB,CAAsDvC,SAAtD,CACApC,MAAM,CAACgB,eAAP,CAAuB4D,aAAvB,CAAuC,EAAvC,CAEA5E,MAAM,CAAC6E,QAAP,CAAkB,UAAM,CACpB,MAAI,CAACxE,QAAL,CAAc,CACVyE,YAAY,CAAE9E,MAAM,CAAC+E,WADX,CAEVC,WAAW,CAAEhF,MAAM,CAACiF,UAFV,CAAd,EAIH,CALD,CAOAxD,QAAQ,CAACyD,OAAT,CAAmB,SAACC,CAAD,CAAO,CACtB,MAAOnF,CAAAA,MAAM,CAAC+B,eAAP,CAAuBqD,mBAAvB,CAA2CD,CAA3C,CAAP,CACH,CAFD,CAIAnF,MAAM,CAAC+B,eAAP,CAAuBqD,mBAAvB,CAA6C,SAACD,CAAD,CAAO,CAChD,GAAG,MAAOA,CAAAA,CAAC,CAACE,MAAT,EAAmB,WAAtB,CAAkC,CAC9B,OACH,CAED,GAAGF,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmBC,OAAnB,CAA2B,WAA3B,IAA4C,CAAC,CAAhD,CAAkD,CAC9C,MAAO,MAAP,CACH,CAED,GAAG9D,QAAQ,CAAC+D,sBAAT,CAAgC,uBAAhC,EAAyD1E,MAAzD,CAAkE,CAArE,CAAuE,CACnE,GAAI2E,CAAAA,MAAM,CAAGhE,QAAQ,CAAC+D,sBAAT,CAAgC,uBAAhC,EAAyD,CAAzD,CAAb,CAEA,GAAGC,MAAM,CAACC,KAAP,CAAaC,OAAb,EAAwB,MAA3B,CAAkC,CAC9BF,MAAM,CAACC,KAAP,CAAaC,OAAb,CAAuB,OAAvB,CACH,CAFD,IAGI,CACAF,MAAM,CAACC,KAAP,CAAaC,OAAb,CAAuB,MAAvB,CACH,CACJ,CACJ,CAnBD,CAqBA3F,MAAM,CAAC+B,eAAP,CAAuB6D,cAAvB,sEAAwC,gLAEazG,CAAAA,OAAO,CAAC0G,OAAR,CAAgBC,SAAhB,EAFb,QAEhC9F,MAAM,CAACgB,eAAP,CAAuBwD,aAFS,kGAKhCuB,OAAO,CAACC,GAAR,eALgC,qEAAxC,GASAhG,MAAM,CAAC+B,eAAP,CAAuBkE,qBAAvB,sEAA+C,gLAEjC9G,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CACtBC,GAAG,CAAE,mBADiB,CAEtBC,KAAK,CAAEC,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuB+B,iBAAtC,CAFe,CAApB,CAFiC,0FAQvCgD,OAAO,CAACC,GAAR,eARuC,qEAA/C,GAYAhG,MAAM,CAAC+B,eAAP,CAAuByE,sBAAvB,sEAAgD,wJACzC,MAAOxG,CAAAA,MAAM,CAACgB,eAAP,CAAuB2D,4BAA9B,GAA+D,WADtB,2BAEpC7D,MAFoC,CAE3BwF,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuB0D,kBAAtC,CAF2B,CAIxC5D,MAAM,CAAGA,MAAM,CAACA,MAAhB,CAJwC,KAMrCA,MAAM,EAAId,MAAM,CAACgB,eAAP,CAAuB2D,4BANI,4DAO7B,KAP6B,SAUpC3E,MAAM,CAACgB,eAAP,CAAuB2D,4BAAvB,CAAsD7D,MAAtD,CAVoC,gDAelC3B,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CACtBC,GAAG,CAAE,oBADiB,CAEtBC,KAAK,CAAEC,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuB0D,kBAAtC,CAFe,CAApB,CAfkC,8FAqBxCqB,OAAO,CAACC,GAAR,eArBwC,uEAAhD,GAyBAhG,MAAM,CAAC+B,eAAP,CAAuB0E,YAAvB,sEAAsC,wJAC/B,MAAOzG,CAAAA,MAAM,CAACgB,eAAP,CAAuBgD,kBAA9B,GAAqD,WADtB,2BAE1BlD,MAF0B,CAEjBwF,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuByC,QAAtC,CAFiB,CAI9B3C,MAAM,CAAGA,MAAM,CAACA,MAAhB,CAJ8B,KAM3BA,MAAM,EAAId,MAAM,CAACgB,eAAP,CAAuBgD,kBANN,4DAOnB,KAPmB,SAU1BhE,MAAM,CAACgB,eAAP,CAAuBgD,kBAAvB,CAA4ClD,MAA5C,CAV0B,gDAexB3B,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CACtBC,GAAG,CAAE,UADiB,CAEtBC,KAAK,CAAEC,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuByC,QAAtC,CAFe,CAApB,CAfwB,8FAqB9BsC,OAAO,CAACC,GAAR,eArB8B,uEAAtC,GAyBAhG,MAAM,CAAC+B,eAAP,CAAuB2E,kBAAvB,sEAA4C,wJACrC,MAAO1G,CAAAA,MAAM,CAACgB,eAAP,CAAuBoD,wBAA9B,GAA2D,WADtB,2BAEhCtD,MAFgC,CAEvBwF,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuBiD,cAAtC,CAFuB,CAIpCnD,MAAM,CAAGA,MAAM,CAACA,MAAhB,CAJoC,KAMjCA,MAAM,EAAId,MAAM,CAACgB,eAAP,CAAuBoD,wBANA,4DAOzB,KAPyB,SAUhCpE,MAAM,CAACgB,eAAP,CAAuBoD,wBAAvB,CAAkDtD,MAAlD,CAVgC,gDAe9B3B,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CACtBC,GAAG,CAAE,gBADiB,CAEtBC,KAAK,CAAEC,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuBiD,cAAtC,CAFe,CAApB,CAf8B,8FAqBpC8B,OAAO,CAACC,GAAR,eArBoC,uEAA5C,GAyBAhG,MAAM,CAAC+B,eAAP,CAAuB4E,eAAvB,sEAAyC,wJAClC,MAAO3G,CAAAA,MAAM,CAACgB,eAAP,CAAuB+C,qBAA9B,GAAwD,WADtB,2BAE7BjD,MAF6B,CAEpBwF,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuBiB,WAAtC,EAAqDqE,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuBC,aAAtC,CAFjC,CAIjCH,MAAM,CAAGA,MAAM,CAACA,MAAhB,CAJiC,KAM9BA,MAAM,EAAId,MAAM,CAACgB,eAAP,CAAuB+C,qBANH,4DAOtB,KAPsB,SAU7B/D,MAAM,CAACgB,eAAP,CAAuB+C,qBAAvB,CAA+CjD,MAA/C,CAV6B,gDAe3B3B,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CACtBC,GAAG,CAAE,aADiB,CAEtBC,KAAK,CAAEC,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuBiB,WAAtC,CAFe,CAApB,CAf2B,iCAoB3B9C,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CACtBC,GAAG,CAAE,eADiB,CAEtBC,KAAK,CAAEC,IAAI,CAACC,SAAL,CAAevG,MAAM,CAACgB,eAAP,CAAuBC,aAAtC,CAFe,CAApB,CApB2B,8FA0BjC8E,OAAO,CAACC,GAAR,eA1BiC,uEAAzC,GA8BAhG,MAAM,CAAC+B,eAAP,CAAuB6E,kBAAvB,sEAA4C,6KAAOC,GAAP,kDAAa,KAAb,KACrCA,GADqC,mEAG1BnH,CAAAA,qBAAqB,CAACoH,OAAtB,EAH0B,yCAKzB,IALyB,8FAQzBf,OAAO,CAACC,GAAR,cARyB,oDAaZtG,CAAAA,qBAAqB,CAACqH,MAAtB,EAbY,SAahCC,WAbgC,qBAejC,MAAOA,CAAAA,WAAP,GAAuB,WAfU,6DAgBzBA,WAAW,CAACF,OAAZ,EAhByB,2CAmB7B,IAnB6B,iGAsB7Bf,OAAO,CAACC,GAAR,cAtB6B,gFAA5C,GA0BAhG,MAAM,CAAC+B,eAAP,CAAuBkF,cAAvB,sEAAwC,yKAAOJ,GAAP,kDAAa,KAAb,KACjCA,GADiC,mEAGtBvH,CAAAA,iBAAiB,CAACwH,OAAlB,EAHsB,yCAKrB,IALqB,8FAQrBf,OAAO,CAACC,GAAR,cARqB,oDAaZ1G,CAAAA,iBAAiB,CAACyH,MAAlB,EAbY,SAa5BG,OAb4B,qBAe7B,MAAOA,CAAAA,OAAP,GAAmB,WAfU,6DAgBrBA,OAAO,CAACJ,OAAR,EAhBqB,2CAmBzB,IAnByB,iGAsBzBf,OAAO,CAACC,GAAR,cAtByB,gFAAxC,GA0BAhG,MAAM,CAAC+B,eAAP,CAAuBoF,YAAvB,sEAAsC,6KAAON,GAAP,qDAAa,KAAb,KAC/BA,GAD+B,sEAGpBxH,CAAAA,eAAe,CAACyH,OAAhB,EAHoB,0CAKnB,IALmB,kGAQnBf,OAAO,CAACC,GAAR,eARmB,sDAaZ3G,CAAAA,eAAe,CAAC0H,MAAhB,EAbY,SAa1BK,KAb0B,sBAe3B,MAAOA,CAAAA,KAAP,GAAiB,WAfU,+DAgBnBA,KAAK,CAACN,OAAN,EAhBmB,4CAmBvB,IAnBuB,qGAsBvBf,OAAO,CAACC,GAAR,eAtBuB,kFAAtC,GA0BAhG,MAAM,CAAC+B,eAAP,CAAuBsF,aAAvB,sEAAuC,8KAAOR,GAAP,qDAAa,KAAb,KAChCA,GADgC,sEAGrBpH,CAAAA,iBAAiB,CAACqH,OAAlB,EAHqB,0CAKpB,IALoB,kGAQpBf,OAAO,CAACC,GAAR,eARoB,sDAaZvG,CAAAA,iBAAiB,CAACsH,MAAlB,EAbY,SAa3BO,MAb2B,sBAe5B,MAAOA,CAAAA,MAAP,GAAkB,WAfU,+DAgBpBA,MAAM,CAACR,OAAP,EAhBoB,4CAmBxB,IAnBwB,qGAsBxBf,OAAO,CAACC,GAAR,eAtBwB,kFAAvC,GA0BAhG,MAAM,CAAC+B,eAAP,CAAuBwF,YAAvB,sEAAsC,6KAAOV,GAAP,qDAAa,KAAb,KAC/BA,GAD+B,sEAGpBrH,CAAAA,eAAe,CAACsH,OAAhB,EAHoB,0CAKnB,IALmB,kGAQnBf,OAAO,CAACC,GAAR,eARmB,sDAaZxG,CAAAA,eAAe,CAACuH,MAAhB,EAbY,SAa1BS,KAb0B,sBAe3B,MAAOA,CAAAA,KAAP,GAAiB,WAfU,+DAgBnBA,KAAK,CAACV,OAAN,EAhBmB,4CAmBvB,IAnBuB,qGAsBvBf,OAAO,CAACC,GAAR,eAtBuB,kFAAtC,GA0BAhG,MAAM,CAAC+B,eAAP,CAAuB0F,cAAvB,CAAwC,UAAM,CAC1C,GAAIC,CAAAA,KAAK,CAAG,EAAZ,CAEA,IAAI,GAAIC,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAG,MAAI,CAAClH,KAAL,CAAWuB,QAAX,CAAoBlB,MAAvC,CAA+C6G,CAAC,EAAhD,CAAmD,CAC/C,GAAIC,CAAAA,IAAI,CAAG,MAAI,CAACnH,KAAL,CAAWuB,QAAX,CAAoB2F,CAApB,CAAX,CAEAC,IAAI,CAACC,QAAL,CAAgB,IAAhB,CAEAH,KAAK,CAACI,IAAN,CAAWF,IAAX,EACH,CAED,MAAI,CAACvH,QAAL,CAAc,CACV2B,QAAQ,CAAE0F,KADA,CAEVK,aAAa,CAAEL,KAAK,CAAC5G,MAFX,CAAd,EAKA,MAAOd,CAAAA,MAAM,CAAC+B,eAAP,CAAuBkF,cAAvB,EAAP,CACH,CAjBD,CAmBAjH,MAAM,CAAC+B,eAAP,CAAuBiG,gBAAvB,CAA0C,UAAM,CAC5C,GAAIN,CAAAA,KAAK,CAAG,EAAZ,CAEA,IAAI,GAAIC,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAG,MAAI,CAAClH,KAAL,CAAWuB,QAAX,CAAoBlB,MAAvC,CAA+C6G,CAAC,EAAhD,CAAmD,CAC/C,GAAIC,CAAAA,IAAI,CAAG,MAAI,CAACnH,KAAL,CAAWuB,QAAX,CAAoB2F,CAApB,CAAX,CAEAC,IAAI,CAACC,QAAL,CAAgB,KAAhB,CAEAH,KAAK,CAACI,IAAN,CAAWF,IAAX,EACH,CAED,MAAI,CAACvH,QAAL,CAAc,CACV2B,QAAQ,CAAE0F,KADA,CAEVK,aAAa,CAAE,CAFL,CAAd,EAKA,MAAO/H,CAAAA,MAAM,CAAC+B,eAAP,CAAuBkF,cAAvB,EAAP,CACH,CAjBD,CAmBAjH,MAAM,CAAC+B,eAAP,CAAuBkG,eAAvB,CAAyC,UAAM,CAC3C,MAAI,CAACtH,cAAL,GAEA,MAAOX,CAAAA,MAAM,CAAC+B,eAAP,CAAuBkF,cAAvB,EAAP,CACH,CAJD,CAMAjH,MAAM,CAAC+B,eAAP,CAAuBmG,eAAvB,sEAAyC,kLAChB3I,CAAAA,cAAc,CAAC8B,GAAf,CAAmB,aAAnB,CADgB,QACjC8G,QADiC,mDAG9BA,QAAQ,CAACC,KAAT,EAH8B,4DAAzC,GAMApI,MAAM,CAAC+B,eAAP,CAAuBsG,iBAAvB,CAA2C,UAAM,CAC7C,MAAO,CAAA,MAAI,CAACC,YAAL,EAAP,CACH,CAFD,CAIAtI,MAAM,CAAC+B,eAAP,CAAuBwG,QAAvB,sEAAkC,qKACxBpJ,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,YAAP,CAAqBC,KAAK,CAAE,OAA5B,CAApB,CADwB,gCAExBlH,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,YAAP,CAAqBC,KAAK,CAAE,EAA5B,CAApB,CAFwB,gCAGxBlH,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,WAAP,CAAoBC,KAAK,CAAE,EAA3B,CAApB,CAHwB,gCAIxBlH,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,gBAAP,CAAyBC,KAAK,CAAEC,IAAI,CAACC,SAAL,CAAe,EAAf,CAAhC,CAApB,CAJwB,iCAKxBpH,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,eAAP,CAAwBC,KAAK,CAAE,EAA/B,CAApB,CALwB,kCAMxBlH,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,gBAAP,CAAyBC,KAAK,CAAE,EAAhC,CAApB,CANwB,SAQ9B,MAAI,CAAChG,QAAL,CAAc,CAAEK,UAAU,CAAE,KAAd,CAAd,EAR8B,kCAUvB,MAAI,CAAC8H,SAAL,EAVuB,6DAAlC,GAaAxI,MAAM,CAAC+B,eAAP,CAAuB0G,OAAvB,sEAAiC,sOACzBC,KADyB,CACjBjH,QAAQ,CAACkH,cAAT,CAAwB,aAAxB,EAAuCtC,KADtB,CAEzBuC,QAFyB,CAEdnH,QAAQ,CAACkH,cAAT,CAAwB,gBAAxB,EAA0CtC,KAF5B,CAGzBwC,YAHyB,CAGVpH,QAAQ,CAACkH,cAAT,CAAwB,WAAxB,EAAqCtC,KAH3B,MAK1B,CAACqC,KAAD,EAAU,CAACE,QALe,oDAMPpJ,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,oBAA9B,CAH4B,CAIrC2H,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CANO,QAMrB1B,KANqB,mDAalBA,KAAK,CAAC2B,OAAN,EAbkB,SAgB7B,GAAGN,YAAY,CAAC/H,MAAb,EAAuB,CAA1B,CAA4B,CACxB+H,YAAY,CAAG,QAAf,CACH,CAlB4B,yBAoBTpJ,CAAAA,iBAAiB,CAACqJ,MAAlB,CAAyB,CACzCE,OAAO,CAAE,EADgC,CAAzB,CApBS,SAoBzBI,OApByB,iBAwB7BA,OAAO,CAACD,OAAR,GAxB6B,4CA2BTtJ,CAAAA,KAAK,CAACwJ,UAAN,CAAiB,MAAjB,CAAyB,WAAzB,CAAsC,CAClDX,KAAK,CAALA,KADkD,CAElDE,QAAQ,CAARA,QAFkD,CAGlDC,YAAY,CAAZA,YAHkD,CAAtC,CA3BS,SA2BrBS,GA3BqB,2GAkCzB7H,QAAQ,CAACkH,cAAT,CAAwB,gBAAxB,EAA0CtC,KAA1C,CAAkD,EAAlD,CACA5E,QAAQ,CAACkH,cAAT,CAAwB,WAAxB,EAAqCtC,KAArC,CAA6C,EAA7C,CAEAN,OAAO,CAACC,GAAR,gBAEAhG,MAAM,CAAC+B,eAAP,CAAuBsF,aAAvB,GAvCyB,yBAyCP7H,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,iBAA9B,CAH4B,CAIrC2H,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CAzCO,SAyCrB1B,MAzCqB,mDAgDlBA,MAAK,CAAC2B,OAAN,EAhDkB,aAmDzBG,GAAG,CAACC,MAnDqB,iCAoDtBD,GAAG,CAACN,OAAJ,EAAe,mDApDO,6BAqDrBhJ,MAAM,CAAC+B,eAAP,CAAuBsF,aAAvB,GAEA5F,QAAQ,CAACkH,cAAT,CAAwB,qBAAxB,EAA+CjD,KAA/C,CAAqDC,OAArD,CAA+D,OAA/D,CAvDqB,yBAyDHnG,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,kBAA9B,CAH4B,CAIrC2H,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CAzDG,SAyDjB1B,OAzDiB,mDAgEdA,OAAK,CAAC2B,OAAN,EAhEc,UAmErB1H,QAAQ,CAACkH,cAAT,CAAwB,gBAAxB,EAA0CtC,KAA1C,CAAkD,EAAlD,CACA5E,QAAQ,CAACkH,cAAT,CAAwB,WAAxB,EAAqCtC,KAArC,CAA6C,EAA7C,CAEArG,MAAM,CAAC+B,eAAP,CAAuBsF,aAAvB,GAtEqB,KAwElBiC,GAAG,CAACN,OAAJ,EAAe,4BAxEG,sDAyECxJ,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,0BAA9B,CAH4B,CAIrC2H,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CAzED,SAyEb1B,OAzEa,mDAgFVA,OAAK,CAAC2B,OAAN,EAhFU,eAkFbG,GAAG,CAACN,OAAJ,EAAe,oBAlFF,sDAmFCxJ,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,sBAA9B,CAH4B,CAIrC2H,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CAnFD,SAmFb1B,OAnFa,mDA0FVA,OAAK,CAAC2B,OAAN,EA1FU,mCA6FH3J,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,uBAA9B,CAH4B,CAIrC2H,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CA7FG,SA6FjB1B,OA7FiB,mDAoGdA,OAAK,CAAC2B,OAAN,EApGc,mCAwGvBhK,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,YAAP,CAAqBC,KAAK,CAAE,MAA5B,CAApB,CAxGuB,kCAyGvBlH,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,YAAP,CAAqBC,KAAK,CAAEiD,GAAG,CAACE,IAAJ,CAASlH,MAArC,CAApB,CAzGuB,kCA0GvBnD,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,WAAP,CAAoBC,KAAK,CAAEqC,KAA3B,CAApB,CA1GuB,kCA2GvBvJ,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,gBAAP,CAAyBC,KAAK,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAC1G,KAAK,CAAC4J,MAAN,CAAab,QAAb,CAAD,CAAf,CAAhC,CAApB,CA3GuB,SA6G7B5I,MAAM,CAAC+B,eAAP,CAAuBsF,aAAvB,CAAqC,IAArC,EACArH,MAAM,CAAC+B,eAAP,CAAuBoF,YAAvB,CAAoC,IAApC,EACAnH,MAAM,CAAC+B,eAAP,CAAuBsF,aAAvB,GAEA5F,QAAQ,CAACkH,cAAT,CAAwB,aAAxB,EAAuCtC,KAAvC,CAA+C,EAA/C,CACA5E,QAAQ,CAACkH,cAAT,CAAwB,gBAAxB,EAA0CtC,KAA1C,CAAkD,EAAlD,CACA5E,QAAQ,CAACkH,cAAT,CAAwB,WAAxB,EAAqCtC,KAArC,CAA6C,EAA7C,CAnH6B,kCAqHtB,MAAI,CAACqD,OAAL,EArHsB,4EAAjC,GAwHA1J,MAAM,CAAC+B,eAAP,CAAuB4H,UAAvB,sEAAoC,iOAC5BjB,KAD4B,CACpBjH,QAAQ,CAACkH,cAAT,CAAwB,gBAAxB,EAA0CtC,KADtB,CAE5BuC,QAF4B,CAEjBnH,QAAQ,CAACkH,cAAT,CAAwB,mBAAxB,EAA6CtC,KAF5B,CAG5BuD,cAH4B,CAGXnI,QAAQ,CAACkH,cAAT,CAAwB,0BAAxB,EAAoDtC,KAHzC,MAK7B,CAACqC,KAAD,EAAU,CAACE,QAAX,EAAuB,CAACgB,cALK,oDAMVpK,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,uBAA9B,CAH4B,CAIrC2H,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CANU,QAMxB1B,OANwB,mDAarBA,OAAK,CAAC2B,OAAN,EAbqB,kCAgBZ1J,CAAAA,iBAAiB,CAACqJ,MAAlB,CAAyB,CACzCE,OAAO,CAAE,EADgC,CAAzB,CAhBY,SAgB5BI,OAhB4B,iBAoBhCA,OAAO,CAACD,OAAR,GApBgC,4CAuBZtJ,CAAAA,KAAK,CAACwJ,UAAN,CAAiB,MAAjB,CAAyB,cAAzB,CAAyC,CACrDX,KAAK,CAALA,KADqD,CAErDE,QAAQ,CAARA,QAFqD,CAGrDgB,cAAc,CAAdA,cAHqD,CAAzC,CAvBY,SAuBxBN,GAvBwB,2GA8B5B7H,QAAQ,CAACkH,cAAT,CAAwB,mBAAxB,EAA6CtC,KAA7C,CAAqD,EAArD,CACA5E,QAAQ,CAACkH,cAAT,CAAwB,0BAAxB,EAAoDtC,KAApD,CAA4D,EAA5D,CAEAN,OAAO,CAACC,GAAR,gBAEAhG,MAAM,CAAC+B,eAAP,CAAuBsF,aAAvB,GAnC4B,yBAqCV7H,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,iBAA9B,CAH4B,CAIrC2H,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CArCU,SAqCxB1B,OArCwB,mDA4CrBA,OAAK,CAAC2B,OAAN,EA5CqB,aA+C5BG,GAAG,CAACC,MA/CwB,4BAgD5B9H,QAAQ,CAACkH,cAAT,CAAwB,mBAAxB,EAA6CtC,KAA7C,CAAqD,EAArD,CACA5E,QAAQ,CAACkH,cAAT,CAAwB,0BAAxB,EAAoDtC,KAApD,CAA4D,EAA5D,CAEArG,MAAM,CAAC+B,eAAP,CAAuBsF,aAAvB,GAEI2B,OArDwB,CAqDd,EArDc,CAuD5B,GAAGM,GAAG,CAACN,OAAJ,CAAYa,WAAZ,GAA0BtE,OAA1B,CAAkC,eAAlC,IAAuD,CAAC,CAAxD,EAA6D+D,GAAG,CAACN,OAAJ,CAAYa,WAAZ,GAA0BtE,OAA1B,CAAkC,kBAAlC,IAA0D,CAAC,CAAxH,EAA6H+D,GAAG,CAACN,OAAJ,CAAYa,WAAZ,GAA0BtE,OAA1B,CAAkC,eAAlC,IAAuD,CAAC,CAAxL,CAA0L,CACtLyD,OAAO,CAAGrJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,uBAA9B,CAAV,CACH,CAFD,IAGK,IAAGgI,GAAG,CAACN,OAAJ,CAAYa,WAAZ,GAA0BtE,OAA1B,CAAkC,uDAAlC,IAA+F,CAAC,CAAnG,CAAqG,CACtGyD,OAAO,CAAGrJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,gCAA9B,CAAV,CACH,CAFI,IAGA,IAAGgI,GAAG,CAACN,OAAJ,CAAYa,WAAZ,GAA0BtE,OAA1B,CAAkC,wBAAlC,IAAgE,CAAC,CAApE,CAAsE,CACvEyD,OAAO,CAAGrJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,6BAA9B,CAAV,CACH,CAFI,IAGA,IAAGgI,GAAG,CAACN,OAAJ,CAAYa,WAAZ,GAA0BtE,OAA1B,CAAkC,eAAlC,IAAuD,CAAC,CAA3D,CAA6D,CAC9DyD,OAAO,CAAGrJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,sBAA9B,CAAV,CACH,CAFI,IAGA,IAAGgI,GAAG,CAACN,OAAJ,CAAYa,WAAZ,GAA0BtE,OAA1B,CAAkC,gBAAlC,IAAwD,CAAC,CAA5D,CAA8D,CAC/DyD,OAAO,CAAGrJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,iBAA9B,CAAV,CACH,CAFI,IAGA,IAAGgI,GAAG,CAACN,OAAJ,CAAYa,WAAZ,GAA0BtE,OAA1B,CAAkC,kCAAlC,IAA0E,CAAC,CAA9E,CAAgF,CACjFyD,OAAO,CAAGrJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,gCAA9B,CAAV,CACH,CAFI,IAGA,IAAGgI,GAAG,CAACN,OAAJ,CAAYa,WAAZ,GAA0BtE,OAA1B,CAAkC,iEAAlC,IAAyG,CAAC,CAA7G,CAA+G,CAChHyD,OAAO,CAAGrJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,2BAA9B,CAAV,CACH,CA3E2B,yBA6EV9B,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAEA,OAH4B,CAIrCC,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CA7EU,SA6ExB1B,OA7EwB,mDAoFrBA,OAAK,CAAC2B,OAAN,EApFqB,UAuFhC1H,QAAQ,CAACkH,cAAT,CAAwB,gBAAxB,EAA0CtC,KAA1C,CAAkD,EAAlD,CACA5E,QAAQ,CAACkH,cAAT,CAAwB,mBAAxB,EAA6CtC,KAA7C,CAAqD,EAArD,CACA5E,QAAQ,CAACkH,cAAT,CAAwB,0BAAxB,EAAoDtC,KAApD,CAA4D,EAA5D,CAEArG,MAAM,CAAC+B,eAAP,CAAuBsF,aAAvB,GA3FgC,yBA6Fd7H,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE,EAD6B,CAErCsD,SAAS,CAAE,EAF0B,CAGrCC,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,iBAA9B,CAH4B,CAIrC2H,OAAO,CAAE,CAACtJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,EAA+C4H,WAA/C,EAAD,CAJ4B,CAAvB,CA7Fc,SA6F5B1B,KA7F4B,mDAoGzBA,KAAK,CAAC2B,OAAN,EApGyB,4EAApC,GAuGAnJ,MAAM,CAAC+B,eAAP,CAAuB+H,iBAAvB,sEAA2C,+KAChC,MAAI,CAACA,iBAAL,EADgC,4DAA3C,GAIA9J,MAAM,CAAC+B,eAAP,CAAuBgI,mBAAvB,sEAA6C,mLACrCC,OADqC,CAC3B,MAAI,CAACvJ,KAAL,CAAWa,IADgB,CAErC2I,WAFqC,CAEvB,MAAI,CAACxJ,KAAL,CAAWyJ,QAFY,CAGrCC,OAHqC,CAG3B,oBAAsBtK,KAAK,CAACuK,uBAAN,EAHK,CAKzCC,cAAc,CAACC,MAAf,CAAsBH,OAAtB,sSACuB,CACf,KAAK7E,SAAL,CAAiB,gTAKwC1F,QAAQ,CAAC2K,SALjD,wLASG5K,QAAQ,CAAC0B,GAAT,CAAa2I,OAAb,CAAsB,YAAtB,CATH,mLAa0BC,WAAW,CAAG,SAAH,CAAe,OAbpD,8HAeuCA,WAAW,CAAG,SAAH,CAAe,OAfjE,2FAiBOtK,QAAQ,CAAC0B,GAAT,CAAa2I,OAAb,CAAsB,uBAAtB,CAjBP,yNAqBGrK,QAAQ,CAAC0B,GAAT,CAAa2I,OAAb,CAAsB,0BAAtB,CArBH,uIAuB0DC,WAAW,CAAG,SAAH,CAAe,OAvBpF,2FAyBOtK,QAAQ,CAAC0B,GAAT,CAAa2I,OAAb,CAAsB,iCAAtB,CAzBP,yNA6BGrK,QAAQ,CAAC0B,GAAT,CAAa2I,OAAb,CAAsB,+BAAtB,CA7BH,uIAAjB,CAkCH,CApCL,wDAA0DQ,WAA1D,IALyC,wBA4CvBnL,CAAAA,eAAe,CAACyJ,MAAhB,CAAuB,CACrC2B,SAAS,CAAEN,OAD0B,CAErCO,YAAY,CAAE,IAFuB,CAGrCC,YAAY,CAAE,KAHuB,CAIrCC,eAAe,CAAE,KAJoB,CAKrCC,QAAQ,CAAE,kBAL2B,CAAvB,CA5CuB,QA4CrCzD,KA5CqC,mDAoDlCA,KAAK,CAAC+B,OAAN,EApDkC,4DAA7C,GAuDAnJ,MAAM,CAAC+B,eAAP,CAAuB+I,aAAvB,sEAAuC,qLACXpL,CAAAA,qBAAqB,CAACoJ,MAAtB,CAA6B,CACjDrD,MAAM,CAAE9F,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,MAA9B,CADyC,CAEjD2H,OAAO,CAAE,CACL,CACI8B,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,SAA9B,CADV,CAEI0J,IAAI,CAAEpL,QAAQ,CAACqL,eAFnB,CAGIC,OAAO,CAAE,kBAAM,CACXlL,MAAM,CAACmL,IAAP,CAAY,2BAAZ,CAAyC,SAAzC,EAEA,MAAO,MAAP,CACH,CAPL,CADK,CAUL,CACIJ,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,KAA9B,CADV,CAEI0J,IAAI,CAAEpL,QAAQ,CAACwL,iBAFnB,CAGIF,OAAO,CAAE,kBAAM,CACXlL,MAAM,CAACmL,IAAP,CAAY,sBAAZ,CAAoC,SAApC,EAEA,MAAO,MAAP,CACH,CAPL,CAVK,CAmBL,CACIJ,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,KAA9B,CADV,CAEI0J,IAAI,CAAEpL,QAAQ,CAACyL,wBAFnB,CAGIH,OAAO,CAAE,kBAAM,CACXlL,MAAM,CAACmL,IAAP,CAAY,wBAAZ,CAAsC,SAAtC,EAEA,MAAO,MAAP,CACH,CAPL,CAnBK,CA4BL,CACIJ,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,CADV,CAEI0J,IAAI,CAAEpL,QAAQ,CAACyL,wBAFnB,CAGIH,OAAO,CAAE,kBAAM,CACXlL,MAAM,CAACmL,IAAP,CAAY,0BAAZ,CAAwC,SAAxC,EAEA,MAAO,MAAP,CACH,CAPL,CA5BK,CAqCL,CACIJ,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,QAA9B,CADV,CAEI0J,IAAI,CAAE,OAFV,CAGIM,IAAI,CAAE,QAHV,CArCK,CAFwC,CAA7B,CADW,QAC/BtE,WAD+B,mDAgD5BA,WAAW,CAACmC,OAAZ,EAhD4B,4DAAvC,GAmDAnJ,MAAM,CAAC+B,eAAP,CAAuBwJ,eAAvB,CAAyC,KAAKA,eAA9C,CACAvL,MAAM,CAAC+B,eAAP,CAAuByJ,iBAAvB,CAA2C,KAAKA,iBAAhD,CAEAxL,MAAM,CAAC+B,eAAP,CAAuB0J,2BAAvB,CAAqD,SAACC,QAAD,CAAc,CAC/D,GAAI9D,CAAAA,IAAI,CAAGtB,IAAI,CAACqF,KAAL,CAAW3L,MAAM,CAAC4L,IAAP,CAAYF,QAAZ,CAAX,CAAX,CAEA,MAAO,CAAA,MAAI,CAACG,oBAAL,CAA0BjE,IAA1B,CAAP,CACH,CAJD,CAMA5H,MAAM,CAAC+B,eAAP,CAAuB+J,iBAAvB,CAA2C,UAAM,CAC7C,MAAO,CAAA,MAAI,CAACA,iBAAL,EAAP,CACH,CAFD,CAIA9L,MAAM,CAAC+B,eAAP,CAAuBgK,kBAAvB,CAA4C,UAAM,CAC9C,MAAO,CAAA,MAAI,CAACA,kBAAL,EAAP,CACH,CAFD,CAIA/L,MAAM,CAAC+B,eAAP,CAAuBiK,oBAAvB,CAA8C,UAAM,CAChD,MAAO,CAAA,MAAI,CAACA,oBAAL,EAAP,CACH,CAFD,CAIAhM,MAAM,CAAC+B,eAAP,CAAuBkK,+BAAvB,CAAyD,UAAM,CAC3D,MAAO,CAAA,MAAI,CAACA,+BAAL,EAAP,CACH,CAFD,CAIAjM,MAAM,CAAC+B,eAAP,CAAuBmK,wBAAvB,CAAkD,UAAM,CACpD,MAAO,CAAA,MAAI,CAACA,wBAAL,EAAP,CACH,CAFD,CAIAlM,MAAM,CAAC+B,eAAP,CAAuBoK,qBAAvB,CAA+C,UAAM,CACjD,MAAO,CAAA,MAAI,CAACA,qBAAL,EAAP,CACH,CAFD,CAIAnM,MAAM,CAAC+B,eAAP,CAAuBqK,yBAAvB,CAAmD,UAAM,CACrD,MAAO,CAAA,MAAI,CAACA,yBAAL,EAAP,CACH,CAFD,CAIApM,MAAM,CAAC+B,eAAP,CAAuBsK,kBAAvB,CAA4C,UAAM,CAC9C,MAAO,CAAA,MAAI,CAACA,kBAAL,EAAP,CACH,CAFD,CAIArM,MAAM,CAAC+B,eAAP,CAAuBuK,sBAAvB,sEAAgD,iJACzC,MAAI,CAAC7L,KAAL,CAAWyJ,QAD8B,mDAElC/K,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,UAAP,CAAmBC,KAAK,CAAE,OAA1B,CAApB,CAFkC,QAIxC5E,QAAQ,CAACkH,cAAT,CAAwB,2BAAxB,EAAqD4D,OAArD,CAA+D,KAA/D,CAJwC,kCAMjC,MAAI,CAAClM,QAAL,CAAc,CACjB6J,QAAQ,CAAE,KADO,CAAd,CAEJ,UAAM,CACLzI,QAAQ,CAACtB,QAAT,CAAkBC,IAAlB,CAAyB,YAAzB,CACH,CAJM,CANiC,iCAalCjB,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,UAAP,CAAmBC,KAAK,CAAE,MAA1B,CAApB,CAbkC,QAexC5E,QAAQ,CAACkH,cAAT,CAAwB,2BAAxB,EAAqD4D,OAArD,CAA+D,IAA/D,CAfwC,kCAiBjC,MAAI,CAAClM,QAAL,CAAc,CACjB6J,QAAQ,CAAE,IADO,CAAd,CAEJ,UAAM,CACLzI,QAAQ,CAACtB,QAAT,CAAkBC,IAAlB,CAAyB,YAAzB,CACH,CAJM,CAjBiC,6DAAhD,GAyBAJ,MAAM,CAAC+B,eAAP,CAAuByK,mBAAvB,sEAA6C,iJACtC,MAAI,CAAC/L,KAAL,CAAWyJ,QAD2B,mDAE/B/K,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,UAAP,CAAmBC,KAAK,CAAE,OAA1B,CAApB,CAF+B,0CAI9B,MAAI,CAAChG,QAAL,CAAc,CACjB6J,QAAQ,CAAE,KADO,CAAd,CAEJ,UAAM,CACLzI,QAAQ,CAACtB,QAAT,CAAkBC,IAAlB,CAAyB,YAAzB,CACH,CAJM,CAJ8B,iCAW/BjB,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,UAAP,CAAmBC,KAAK,CAAE,MAA1B,CAApB,CAX+B,0CAa9B,MAAI,CAAChG,QAAL,CAAc,CACjB6J,QAAQ,CAAE,IADO,CAAd,CAEJ,UAAM,CACLzI,QAAQ,CAACtB,QAAT,CAAkBC,IAAlB,CAAyB,YAAzB,CACH,CAJM,CAb8B,4DAA7C,GAqBAJ,MAAM,CAAC+B,eAAP,CAAuB0K,YAAvB,4FAAsC,mBAAOC,WAAP,kJAC5BvN,CAAAA,OAAO,CAAC+G,OAAR,CAAgBC,GAAhB,CAAoB,CAAEC,GAAG,CAAE,UAAP,CAAmBC,KAAK,CAAEC,IAAI,CAACC,SAAL,CAAemG,WAAf,CAA1B,CAApB,CAD4B,0CAG3B,MAAI,CAACrM,QAAL,CAAc,CACjBsM,QAAQ,CAAED,WADO,CAAd,CAH2B,4DAAtC,iEAQA1M,MAAM,CAAC+B,eAAP,CAAuB6K,cAAvB,CAAwC,UAAM,CAC1C,GAAIF,CAAAA,WAAW,CAAG,MAAI,CAACjM,KAAL,CAAWkM,QAA7B,CACA,GAAIE,CAAAA,MAAM,CAAG,CAACH,WAAW,CAACI,QAA1B,CAEAJ,WAAW,CAACI,QAAZ,CAAuBD,MAAvB,CAEApL,QAAQ,CAACkH,cAAT,CAAwB,2BAAxB,EAAqD4D,OAArD,CAA+D,CAACM,MAAhE,CAEA,MAAO7M,CAAAA,MAAM,CAAC+B,eAAP,CAAuB0K,YAAvB,CAAoCC,WAApC,CAAP,CACH,CATD,CAWA1M,MAAM,CAAC+B,eAAP,CAAuBgL,UAAvB,sEAAoC,qKAC1B5N,CAAAA,OAAO,CAAC+G,OAAR,CAAgB8G,MAAhB,CAAuB,CAAE5G,GAAG,CAAE,YAAP,CAAvB,CAD0B,gCAE1BjH,CAAAA,OAAO,CAAC+G,OAAR,CAAgB8G,MAAhB,CAAuB,CAAE5G,GAAG,CAAE,YAAP,CAAvB,CAF0B,gCAG1BjH,CAAAA,OAAO,CAAC+G,OAAR,CAAgB8G,MAAhB,CAAuB,CAAE5G,GAAG,CAAE,WAAP,CAAvB,CAH0B,gCAI1BjH,CAAAA,OAAO,CAAC+G,OAAR,CAAgB8G,MAAhB,CAAuB,CAAE5G,GAAG,CAAE,gBAAP,CAAvB,CAJ0B,iCAK1BjH,CAAAA,OAAO,CAAC+G,OAAR,CAAgB8G,MAAhB,CAAuB,CAAE5G,GAAG,CAAE,eAAP,CAAvB,CAL0B,kCAM1BjH,CAAAA,OAAO,CAAC+G,OAAR,CAAgB8G,MAAhB,CAAuB,CAAE5G,GAAG,CAAE,gBAAP,CAAvB,CAN0B,kCAO1BjH,CAAAA,OAAO,CAAC+G,OAAR,CAAgB8G,MAAhB,CAAuB,CAAE5G,GAAG,CAAE,mBAAP,CAAvB,CAP0B,kCAQ1BjH,CAAAA,OAAO,CAAC+G,OAAR,CAAgB8G,MAAhB,CAAuB,CAAE5G,GAAG,CAAE,UAAP,CAAvB,CAR0B,2CAUzB3E,QAAQ,CAACtB,QAAT,CAAkBC,IAAlB,CAAyB,YAVA,6DAApC,GAaAJ,MAAM,CAAC+B,eAAP,CAAuBwG,QAAvB,sEAAkC,+KACZ/I,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE9F,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,mBAA9B,CAD6B,CAErC0H,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,oBAA9B,CAF4B,CAGrC2H,OAAO,CAAE,CACL,CACI8B,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,QAA9B,CADV,CAEIgK,IAAI,CAAE,QAFV,CAGIJ,OAAO,CAAE,kBAAM,CACX,MAAO,MAAP,CACH,CALL,CADK,CAQL,CACIH,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,CADV,CAEI4J,OAAO,CAAE,kBAAM,CACX,MAAOlL,CAAAA,MAAM,CAAC+B,eAAP,CAAuBgL,UAAvB,EAAP,CACH,CAJL,CARK,CAH4B,CAAvB,CADY,QAC1BvF,KAD0B,mDAqBvBA,KAAK,CAAC2B,OAAN,EArBuB,4DAAlC,GAwBAnJ,MAAM,CAAC+B,eAAP,CAAuBkL,UAAvB,sEAAoC,+KACdzN,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE9F,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,kBAA9B,CAD6B,CAErC0H,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,mBAA9B,CAF4B,CAGrC2H,OAAO,CAAE,CACL,CACI8B,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,QAA9B,CADV,CAEIgK,IAAI,CAAE,QAFV,CAGIJ,OAAO,CAAE,kBAAM,CACX,MAAO,MAAP,CACH,CALL,CADK,CAQL,CACIH,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,CADV,CAEI4J,OAAO,iFAAE,qLACezL,CAAAA,iBAAiB,CAACqJ,MAAlB,CAAyB,CACzCE,OAAO,CAAE,EADgC,CAAzB,CADf,QACDI,OADC,iBAKLA,OAAO,CAACD,OAAR,GALK,0CAQetJ,CAAAA,KAAK,CAACwJ,UAAN,CAAiB,MAAjB,CAAyB,iBAAzB,CAA4C,CACxD/G,MAAM,CAAE,MAAI,CAAC7B,KAAL,CAAWyM,UADqC,CAA5C,CARf,QAQG5D,GARH,0GAaDvD,OAAO,CAACC,GAAR,gBAEAoD,OAAO,CAACtC,OAAR,GAfC,kCAiBM,MAAI,CAACqG,UAAL,CAAgBxN,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,iBAA9B,CAAhB,CAjBN,aAoBDgI,GAAG,CAACC,MApBH,4BAqBDxD,OAAO,CAACC,GAAR,CAAYsD,GAAG,CAACN,OAAhB,EAEAI,OAAO,CAACtC,OAAR,GAvBC,kCAyBM,MAAI,CAACqG,UAAL,CAAgB7D,GAAG,CAACN,OAApB,CAzBN,UA4BLI,OAAO,CAACtC,OAAR,GAEA,MAAI,CAACnG,cAAL,GA9BK,kCAgCE,MAAI,CAACwM,UAAL,CAAgBxN,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,cAA9B,CAAhB,CAhCF,2EAAF,+EAFX,CARK,CAH4B,CAAvB,CADc,QAC5BkG,KAD4B,mDAoDzBA,KAAK,CAAC2B,OAAN,EApDyB,4DAApC,GAuDAnJ,MAAM,CAAC+B,eAAP,CAAuBqL,kBAAvB,4FAA4C,mBAAO1B,QAAP,CAAiB/J,IAAjB,wJACpCiG,IADoC,CAC7BtB,IAAI,CAACqF,KAAL,CAAW3L,MAAM,CAAC4L,IAAP,CAAYF,QAAZ,CAAX,CAD6B,CAEpC2B,QAFoC,CAEzBxN,KAAK,CAACyN,MAAN,EAFyB,yBAIpB7N,CAAAA,iBAAiB,CAACqJ,MAAlB,CAAyB,CACzCE,OAAO,CAAE,EADgC,CAAzB,CAJoB,QAIpCI,OAJoC,iBAQxCA,OAAO,CAACD,OAAR,GARwC,0CAWpBtJ,CAAAA,KAAK,CAACwJ,UAAN,CAAiB,MAAjB,CAAyB,eAAzB,CAA0C,CACtD/G,MAAM,CAAE,MAAI,CAAC7B,KAAL,CAAWyM,UADmC,CAEtDK,IAAI,CAAEF,QAFgD,CAGtDG,QAAQ,CAAE5F,IAAI,CAAC2F,IAHuC,CAItDE,UAAU,CAAE,OAJ0C,CAKtD7E,QAAQ,CAAE,OAL4C,CAMtD8E,cAAc,CAAE7N,KAAK,CAAC4J,MAAN,CAAa,OAAb,CANsC,CAOtDkE,WAAW,CAAE,QAPyC,CAQtDhM,IAAI,CAAEA,IARgD,CAA1C,CAXoB,QAWhC2H,GAXgC,0GAuBpCvD,OAAO,CAACC,GAAR,gBAEAoD,OAAO,CAACtC,OAAR,GAzBoC,kCA2B7B,MAAI,CAACqG,UAAL,CAAgBxN,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,iBAA9B,CAAhB,CA3B6B,aA8BpCgI,GAAG,CAACC,MA9BgC,4BA+BpCxD,OAAO,CAACC,GAAR,CAAYsD,GAAG,CAACN,OAAhB,EAEAI,OAAO,CAACtC,OAAR,GAjCoC,kCAmC7B,MAAI,CAACqG,UAAL,CAAgB7D,GAAG,CAACN,OAApB,CAnC6B,UAsCxCI,OAAO,CAACtC,OAAR,GAEArF,QAAQ,CAACkH,cAAT,CAAwB,4BAAxB,EAAsD4D,OAAtD,CAAgE,IAAhE,CACA9K,QAAQ,CAACkH,cAAT,CAAwB,mBAAxB,EAA6CtC,KAA7C,CAAqD,sBAAwBgH,QAAxB,CAAmC,IAAnC,CAA0CzF,IAAI,CAACxB,GAApG,CAEA,GAAGzE,IAAI,EAAI,QAAX,CAAoB,CAChBF,QAAQ,CAACkH,cAAT,CAAwB,4BAAxB,EAAsDjD,KAAtD,CAA4DC,OAA5D,CAAsE,MAAtE,CACAlE,QAAQ,CAACkH,cAAT,CAAwB,6BAAxB,EAAuDjD,KAAvD,CAA6DC,OAA7D,CAAuE,OAAvE,CACH,CAHD,IAII,CACAlE,QAAQ,CAACkH,cAAT,CAAwB,4BAAxB,EAAsDjD,KAAtD,CAA4DC,OAA5D,CAAsE,OAAtE,CACAlE,QAAQ,CAACkH,cAAT,CAAwB,6BAAxB,EAAuDjD,KAAvD,CAA6DC,OAA7D,CAAuE,MAAvE,CACH,CAlDuC,kCAoDjC,IApDiC,2EAA5C,sEAuDA3F,MAAM,CAAC+B,eAAP,CAAuB6L,yBAAvB,sEAAmD,yJAC3C1O,SAAS,CAAC2O,QADiC,6DAEpC,KAFoC,2BAMvCC,IANuC,CAMhCrM,QAAQ,CAACkH,cAAT,CAAwB,mBAAxB,EAA6CtC,KANb,yBAQrClH,CAAAA,OAAO,CAAC4O,SAAR,CAAkBC,KAAlB,CAAwB,CAC1BC,GAAG,CAAEH,IADqB,CAAxB,CARqC,+FAa3C/H,OAAO,CAACC,GAAR,gBAb2C,kCAepC,MAAI,CAACmH,UAAL,CAAgBxN,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,yBAA9B,CAAhB,CAfoC,4CAkBxC,MAAI,CAAC6L,UAAL,CAAgBxN,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,mBAA9B,CAAhB,CAlBwC,0EAAnD,GAqBAtB,MAAM,CAAC+B,eAAP,CAAuBmM,mBAAvB,sEAA6C,+KACvB1O,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE9F,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,mCAA9B,CAD6B,CAErC0H,OAAO,CAAErJ,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,iCAA9B,CAF4B,CAGrC2H,OAAO,CAAE,CACL,CACI8B,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,QAA9B,CADV,CAEIgK,IAAI,CAAE,QAFV,CAGIJ,OAAO,CAAE,kBAAM,CACX,MAAO,MAAP,CACH,CALL,CADK,CAQL,CACIH,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,CADV,CAEI4J,OAAO,kFAAE,2JACDhM,SAAS,CAAC2O,QADT,6DAEMrG,KAAK,CAACV,OAAN,EAFN,SAKDqH,MALC,CAKQ,CACTC,IAAI,CAAE,iBADG,CAETC,SAAS,CAAEjP,mBAAmB,CAACkP,QAFtB,CALR,CAUL9G,KAAK,CAACV,OAAN,GAVK,0CAaK3H,CAAAA,OAAO,CAACoP,UAAR,CAAmBC,KAAnB,CAAyB,CAC3BJ,IAAI,CAAED,MAAM,CAACC,IADc,CAE3BC,SAAS,CAAEF,MAAM,CAACE,SAFS,CAG3BI,SAAS,CAAE,IAHgB,CAAzB,CAbL,QAmBDzO,MAAM,CAACgB,eAAP,CAAuBiD,cAAvB,CAAwC,EAAxC,CACAjE,MAAM,CAACgB,eAAP,CAAuBkD,kBAAvB,CAA4C,EAA5C,CACAlE,MAAM,CAACgB,eAAP,CAAuBoD,wBAAvB,CAAkDhC,SAAlD,CAEApC,MAAM,CAAC+B,eAAP,CAAuB2E,kBAAvB,GAvBC,yFA0BDX,OAAO,CAACC,GAAR,gBA1BC,0CA6BE,MAAI,CAACmH,UAAL,CAAgBxN,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,iCAA9B,CAAhB,CA7BF,2EAAF,gFAFX,CARK,CAH4B,CAAvB,CADuB,QACrCkG,KADqC,mDAiDlCA,KAAK,CAAC2B,OAAN,EAjDkC,4DAA7C,GAoDAnJ,MAAM,CAAC+B,eAAP,CAAuB2M,WAAvB,sEAAqC,+KACflP,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE9F,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,SAA9B,CAD6B,CAErCqN,MAAM,CAAE,CACJ,CACIhN,IAAI,CAAE,OADV,CAEIiN,KAAK,CAAEjP,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,aAA9B,CAFX,CAGI+E,KAAK,CAAE,MAHX,CAIIkG,OAAO,CAAGvM,MAAM,CAACgB,eAAP,CAAuByD,OAAvB,CAA+Bc,OAA/B,CAAuC,MAAvC,IAAmD,CAAC,CAApD,CAAwD,IAAxD,CAA+D,KAJ7E,CADI,CAOJ,CACI5D,IAAI,CAAE,OADV,CAEIiN,KAAK,CAAEjP,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,aAA9B,CAFX,CAGI+E,KAAK,CAAE,MAHX,CAIIkG,OAAO,CAAGvM,MAAM,CAACgB,eAAP,CAAuByD,OAAvB,CAA+Bc,OAA/B,CAAuC,MAAvC,IAAmD,CAAC,CAApD,CAAwD,IAAxD,CAA+D,KAJ7E,CAPI,CAaJ,CACI5D,IAAI,CAAE,OADV,CAEIiN,KAAK,CAAEjP,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,aAA9B,CAFX,CAGI+E,KAAK,CAAE,MAHX,CAIIkG,OAAO,CAAGvM,MAAM,CAACgB,eAAP,CAAuByD,OAAvB,CAA+Bc,OAA/B,CAAuC,MAAvC,IAAmD,CAAC,CAApD,CAAwD,IAAxD,CAA+D,KAJ7E,CAbI,CAmBJ,CACI5D,IAAI,CAAE,OADV,CAEIiN,KAAK,CAAEjP,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,aAA9B,CAFX,CAGI+E,KAAK,CAAE,MAHX,CAIIkG,OAAO,CAAGvM,MAAM,CAACgB,eAAP,CAAuByD,OAAvB,CAA+Bc,OAA/B,CAAuC,MAAvC,IAAmD,CAAC,CAApD,CAAwD,IAAxD,CAA+D,KAJ7E,CAnBI,CAF6B,CA4BrC0D,OAAO,CAAE,CACL,CACI8B,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,QAA9B,CADV,CAEIgK,IAAI,CAAE,QAFV,CAGIJ,OAAO,CAAE,kBAAM,CACX,MAAO,MAAP,CACH,CALL,CADK,CAQL,CACIH,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,cAA9B,CADV,CAEI4J,OAAO,CAAE,kBAAM,CACX,GAAI2D,CAAAA,WAAW,CAAGhP,KAAK,CAACiP,gBAAN,CAAuB,MAAI,CAACrO,KAAL,CAAWuB,QAAlC,CAA4C,UAA5C,CAAlB,CAEAhC,MAAM,CAACgB,eAAP,CAAuByD,OAAvB,CAAiC,SAAjC,CACAzE,MAAM,CAACgB,eAAP,CAAuBgB,QAAvB,CAAkC6M,WAAlC,CAEA,MAAO,CAAA,MAAI,CAACxO,QAAL,CAAc,CACjB2B,QAAQ,CAAE6M,WADO,CAAd,CAEJ,UAAM,CACL,MAAI,CAACE,WAAL,GACH,CAJM,CAAP,CAKH,CAbL,CARK,CAuBL,CACIhE,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,CADV,CAEI4J,OAAO,kFAAE,mBAAOvJ,IAAP,4JACanC,CAAAA,eAAe,CAACsJ,MAAhB,CAAuB,CACrCrD,MAAM,CAAE9F,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,kBAA9B,CAD6B,CAErCqN,MAAM,CAAE,CACJ,CACIhN,IAAI,CAAE,OADV,CAEIiN,KAAK,CAAEjP,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,qBAA9B,CAFX,CAGI+E,KAAK,CAAE,KAHX,CAIIkG,OAAO,CAAGvM,MAAM,CAACgB,eAAP,CAAuByD,OAAvB,CAA+Bc,OAA/B,CAAuC,KAAvC,IAAkD,CAAC,CAAnD,CAAuD,IAAvD,CAA8D,KAJ5E,CADI,CAOJ,CACI5D,IAAI,CAAE,OADV,CAEIiN,KAAK,CAAEjP,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,sBAA9B,CAFX,CAGI+E,KAAK,CAAE,MAHX,CAIIkG,OAAO,CAAGvM,MAAM,CAACgB,eAAP,CAAuByD,OAAvB,CAA+Bc,OAA/B,CAAuC,MAAvC,IAAmD,CAAC,CAApD,CAAwD,IAAxD,CAA+D,KAJ7E,CAPI,CAF6B,CAgBrC0D,OAAO,CAAE,CACL,CACI8B,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,QAA9B,CADV,CAEIgK,IAAI,CAAE,QAFV,CAGIJ,OAAO,CAAE,kBAAM,CACX,MAAO,MAAP,CACH,CALL,CADK,CAQL,CACIH,IAAI,CAAEpL,QAAQ,CAAC0B,GAAT,CAAa,MAAI,CAACZ,KAAL,CAAWa,IAAxB,CAA8B,eAA9B,CADV,CAEI4J,OAAO,CAAE,iBAAC8D,SAAD,CAAe,CACpB,GAAIC,CAAAA,gBAAgB,CAAGtN,IAAI,CAAGqN,SAA9B,CAEAjJ,OAAO,CAACC,GAAR,CAAYiJ,gBAAZ,EAEA,GAAIJ,CAAAA,WAAW,CAAGhP,KAAK,CAACiP,gBAAN,CAAuB,MAAI,CAACrO,KAAL,CAAWuB,QAAlC,CAA4CiN,gBAA5C,CAAlB,CAEAjP,MAAM,CAACgB,eAAP,CAAuByD,OAAvB,CAAiCwK,gBAAjC,CACAjP,MAAM,CAACgB,eAAP,CAAuBgB,QAAvB,CAAkC6M,WAAlC,CAEA,MAAO,CAAA,MAAI,CAACxO,QAAL,CAAc,CACjB2B,QAAQ,CAAE6M,WADO,CAAd,CAEJ,UAAM,CACL,MAAI,CAACE,WAAL,GACH,CAJM,CAAP,CAKH,CAjBL,CARK,CAhB4B,CAAvB,CADb,QACDvH,KADC,mDA+CEA,KAAK,CAAC2B,OAAN,EA/CF,4DAAF,mFAFX,CAvBK,CA5B4B,CAAvB,CADe,QAC7B3B,KAD6B,iBA2GjCxH,MAAM,CAAC+B,eAAP,CAAuBkF,cAAvB,GA3GiC,kCA6G1BO,KAAK,CAAC2B,OAAN,EA7G0B,4DAArC,GA+GH","sourcesContent":["import { Capacitor, Plugins, FilesystemDirectory } from \"@capacitor/core\"\r\nimport { modalController, popoverController, menuController, alertController, loadingController, actionSheetController } from \"@ionic/core\"\r\nimport * as language from \"../utils/language\"\r\nimport * as Ionicons from 'ionicons/icons';\r\n\r\nconst utils = require(\"../utils/utils\")\r\n\r\nexport function windowRouter(){\r\n    window.onhashchange = async () => {\r\n        if(window.currentHref !== window.location.href){\r\n            window.currentHref = window.location.href\r\n\r\n            this.setState({\r\n                currentHref: window.currentHref\r\n            })\r\n\r\n            let routeEx = window.location.hash.split(\"/\")\r\n\r\n            if(this.state.isLoggedIn){\r\n                if(routeEx[1] == \"base\" || routeEx[1] == \"shared-in\" || routeEx[1] == \"shared-out\" || routeEx[1] == \"trash\"){\r\n                    await this.updateItemList()\r\n    \r\n                    let foldersInRoute = routeEx.slice(2)\r\n    \r\n                    if(foldersInRoute.length > 0){\r\n                        let lastFolderInRoute = foldersInRoute[foldersInRoute.length - 1]\r\n    \r\n                        if(window.customVariables.cachedFolders[lastFolderInRoute]){\r\n                            this.setState({\r\n                                mainToolbarTitle: window.customVariables.cachedFolders[lastFolderInRoute].name,\r\n                                showMainToolbarBackButton: true\r\n                            })\r\n                        }\r\n                        else{\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"myCloud\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                    }\r\n                    else{\r\n                        if(routeEx[1] == \"shared-in\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"sharedInTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else if(routeEx[1] == \"shared-out\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"sharedOutTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else if(routeEx[1] == \"trash\"){\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"trashTitle\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                        else{\r\n                            this.setState({\r\n                                mainToolbarTitle: language.get(this.state.lang, \"myCloud\"),\r\n                                showMainToolbarBackButton: false\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function setupWindowFunctions(){\r\n    let script = document.createElement(\"script\")\r\n\r\n    script.type = \"text/javascript\"\r\n    script.src = \"assets/pdf/build/pdf.js\"\r\n\r\n    document.getElementsByTagName(\"head\")[0].appendChild(script)\r\n\r\n\r\n    window.customFunctions = {}\r\n    window.customVariables = {}\r\n\r\n    window.customVariables.itemList = []\r\n    window.customVariables.lang = this.state.lang\r\n    window.customVariables.cachedFolders = {}\r\n    window.customVariables.cachedFiles = {}\r\n    window.customVariables.cachedMetadata = {}\r\n    window.customVariables.keyUpdateInterval = undefined\r\n    window.customVariables.usageUpdateInterval = undefined\r\n    window.customVariables.apiKey = \"\"\r\n    window.customVariables.uploadSemaphore = new utils.Semaphore(3)\r\n    window.customVariables.uploadChunkSemaphore = new utils.Semaphore(5)\r\n    window.customVariables.downloadSemaphore = new utils.Semaphore(5)\r\n    window.customVariables.downloadChunkSemaphore = new utils.Semaphore(30)\r\n    window.customVariables.uploads = {}\r\n    window.customVariables.downloads = {}\r\n    window.customVariables.reloadContentAfterUploadTimeout = undefined\r\n    window.customVariables.offlineSavedFiles = {}\r\n    window.customVariables.urlCreator = window.URL || window.webkitURL\r\n    window.customVariables.currentPreviewURL = undefined\r\n    window.customVariables.reloadAfterActionTimeout = undefined\r\n    window.customVariables.nextNativeToastAllowed = Math.floor((+new Date()) / 1000)\r\n    window.customVariables.apiCache = {}\r\n    window.customVariables.selectLangInterval = undefined\r\n    window.customVariables.stoppedUploads = {}\r\n    window.customVariables.stoppedDownloads = {}\r\n    window.customVariables.stoppedUploadsDone = {}\r\n    window.customVariables.stoppedDownloadsDone = {}\r\n    window.customVariables.lastCachedItemsLength = undefined\r\n    window.customVariables.lastAPICacheLength = undefined\r\n    window.customVariables.thumbnailCache = {}\r\n    window.customVariables.thumbnailBlobCache = {}\r\n    window.customVariables.currentThumbnailURL = undefined\r\n    window.customVariables.lastThumbnailCacheLength = undefined\r\n    window.customVariables.thumbnailSemaphore = new utils.Semaphore(2)\r\n    window.customVariables.updateItemsSemaphore = new utils.Semaphore(1)\r\n    window.customVariables.getNetworkInfoInterval = undefined\r\n    window.customVariables.networkStatus = undefined\r\n    window.customVariables.orderBy = \"nameAsc\"\r\n    window.customVariables.getThumbnailErrors = {}\r\n    window.customVariables.lastGetThumbnailErrorsLength = undefined\r\n    window.customVariables.scrollToIndex = {}\r\n\r\n    window.onresize = () => {\r\n        this.setState({\r\n            windowHeight: window.innerHeight,\r\n            windowWidth: window.innerWidth\r\n        })\r\n    }\r\n\r\n    document.onclick = (e) => {\r\n        return window.customFunctions.togglePreviewHeader(e)\r\n    }\r\n\r\n    window.customFunctions.togglePreviewHeader = (e) => {\r\n        if(typeof e.target == \"undefined\"){\r\n            return\r\n        }\r\n\r\n        if(e.target.innerHTML.indexOf(\"<ion-icon\") !== -1){\r\n            return false\r\n        }\r\n\r\n        if(document.getElementsByClassName(\"preview-header-hidden\").length > 0){\r\n            let header = document.getElementsByClassName(\"preview-header-hidden\")[0]\r\n\r\n            if(header.style.display == \"none\"){\r\n                header.style.display = \"block\"\r\n            }\r\n            else{\r\n                header.style.display = \"none\"\r\n            }\r\n        }\r\n    }\r\n\r\n    window.customFunctions.getNetworkInfo = async () => {\r\n        try{\r\n            window.customVariables.networkStatus = await Plugins.Network.getStatus()\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveOfflineSavedFiles = async () => {\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"offlineSavedFiles\",\r\n                value: JSON.stringify(window.customVariables.offlineSavedFiles)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveGetThumbnailErrors = async () => {\r\n        if(typeof window.customVariables.lastGetThumbnailErrorsLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.getThumbnailErrors)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastGetThumbnailErrorsLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastGetThumbnailErrorsLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"getThumbnailErrors\",\r\n                value: JSON.stringify(window.customVariables.getThumbnailErrors)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveAPICache = async () => {\r\n        if(typeof window.customVariables.lastAPICacheLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.apiCache)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastAPICacheLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastAPICacheLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"apiCache\",\r\n                value: JSON.stringify(window.customVariables.apiCache)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveThumbnailCache = async () => {\r\n        if(typeof window.customVariables.lastThumbnailCacheLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.thumbnailCache)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastThumbnailCacheLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastThumbnailCacheLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"thumbnailCache\",\r\n                value: JSON.stringify(window.customVariables.thumbnailCache)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveCachedItems = async () => {\r\n        if(typeof window.customVariables.lastCachedItemsLength !== \"undefined\"){\r\n            let length = JSON.stringify(window.customVariables.cachedFiles) + JSON.stringify(window.customVariables.cachedFolders)\r\n\r\n            length = length.length\r\n\r\n            if(length == window.customVariables.lastCachedItemsLength){\r\n                return false\r\n            }\r\n            else{\r\n                window.customVariables.lastCachedItemsLength = length\r\n            }\r\n        }\r\n\r\n        try{\r\n            await Plugins.Storage.set({\r\n                key: \"cachedFiles\",\r\n                value: JSON.stringify(window.customVariables.cachedFiles)\r\n            })\r\n\r\n            await Plugins.Storage.set({\r\n                key: \"cachedFolders\",\r\n                value: JSON.stringify(window.customVariables.cachedFolders)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissActionSheet = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await actionSheetController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let actionSheet = await actionSheetController.getTop()\r\n\r\n            if(typeof actionSheet !== \"undefined\"){\r\n                return actionSheet.dismiss()\r\n            }\r\n            \r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissPopover = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await popoverController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let popover = await popoverController.getTop()\r\n\r\n            if(typeof popover !== \"undefined\"){\r\n                return popover.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissModal = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await modalController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let modal = await modalController.getTop()\r\n\r\n            if(typeof modal !== \"undefined\"){\r\n                return modal.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissLoader = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await loadingController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let loader = await loadingController.getTop()\r\n\r\n            if(typeof loader !== \"undefined\"){\r\n                return loader.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.dismissAlert = async (all = false) => {\r\n        if(all){\r\n            try{\r\n                await alertController.dismiss()\r\n\r\n                return true\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n\r\n        try{\r\n            let alert = await alertController.getTop()\r\n\r\n            if(typeof alert !== \"undefined\"){\r\n                return alert.dismiss()\r\n            }\r\n\r\n            return true\r\n        }\r\n        catch(e){\r\n            return console.log(e)\r\n        }\r\n    }\r\n\r\n    window.customFunctions.selectAllItems = () => {\r\n        let items = []\r\n\r\n        for(let i = 0; i < this.state.itemList.length; i++){\r\n            let item = this.state.itemList[i]\r\n\r\n            item.selected = true\r\n\r\n            items.push(item)\r\n        }\r\n\r\n        this.setState({\r\n            itemList: items,\r\n            selectedItems: items.length\r\n        })\r\n\r\n        return window.customFunctions.dismissPopover()\r\n    }\r\n\r\n    window.customFunctions.unselectAllItems = () => {\r\n        let items = []\r\n\r\n        for(let i = 0; i < this.state.itemList.length; i++){\r\n            let item = this.state.itemList[i]\r\n\r\n            item.selected = false\r\n\r\n            items.push(item)\r\n        }\r\n\r\n        this.setState({\r\n            itemList: items,\r\n            selectedItems: 0\r\n        })\r\n\r\n        return window.customFunctions.dismissPopover()\r\n    }\r\n\r\n    window.customFunctions.refreshItemList = () => {\r\n        this.updateItemList()\r\n\r\n        return window.customFunctions.dismissPopover()\r\n    }\r\n\r\n    window.customFunctions.hideSidebarMenu = async () => {\r\n        let mainMenu = await menuController.get(\"sideBarMenu\")\r\n\r\n        return mainMenu.close()\r\n    }\r\n\r\n    window.customFunctions.openRegisterModal = () => {\r\n        return this.showRegister()\r\n    }\r\n\r\n    window.customFunctions.doLogout = async () => {\r\n        await Plugins.Storage.set({ key: \"isLoggedIn\", value: \"false\" })\r\n        await Plugins.Storage.set({ key: \"userAPIKey\", value: \"\" })\r\n        await Plugins.Storage.set({ key: \"userEmail\", value: \"\" })\r\n        await Plugins.Storage.set({ key: \"userMasterKeys\", value: JSON.stringify([]) })\r\n        await Plugins.Storage.set({ key: \"userPublicKey\", value: \"\" })\r\n        await Plugins.Storage.set({ key: \"userPrivateKey\", value: \"\" })\r\n\r\n        this.setState({ isLoggedIn: false })\r\n\r\n        return this.showLogin()\r\n    }\r\n\r\n    window.customFunctions.doLogin = async () => {\r\n        let email = document.getElementById(\"login-email\").value\r\n        let password = document.getElementById(\"login-password\").value\r\n        let twoFactorKey = document.getElementById(\"login-2fa\").value\r\n\r\n        if(!email || !password){\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"loginInvalidInputs\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        if(twoFactorKey.length == 0){\r\n            twoFactorKey = \"XXXXXX\"\r\n        }\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        try{\r\n            var res = await utils.apiRequest(\"POST\", \"/v1/login\", {\r\n                email,\r\n                password,\r\n                twoFactorKey\r\n            })\r\n        }\r\n        catch(e){\r\n            document.getElementById(\"login-password\").value = \"\"\r\n            document.getElementById(\"login-2fa\").value = \"\"\r\n\r\n            console.log(e)\r\n\r\n            window.customFunctions.dismissLoader()\r\n\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"apiRequestError\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        if(!res.status){\r\n            if(res.message == \"Please enter your Two Factor Authentication code.\"){\r\n                window.customFunctions.dismissLoader()\r\n\r\n                document.getElementById(\"login-2fa-container\").style.display = \"block\"\r\n\r\n                let alert = await alertController.create({\r\n                    header: \"\",\r\n                    subHeader: \"\",\r\n                    message: language.get(this.state.lang, \"loginWith2FACode\"),\r\n                    buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                })\r\n\r\n                return alert.present()\r\n            }\r\n            else{\r\n                document.getElementById(\"login-password\").value = \"\"\r\n                document.getElementById(\"login-2fa\").value = \"\"\r\n\r\n                window.customFunctions.dismissLoader()\r\n\r\n                if(res.message == \"Account not yet activated.\"){\r\n                    let alert = await alertController.create({\r\n                        header: \"\",\r\n                        subHeader: \"\",\r\n                        message: language.get(this.state.lang, \"loginAccountNotActivated\"),\r\n                        buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                    })\r\n        \r\n                    return alert.present()\r\n                }\r\n                else if(res.message == \"Account not found.\"){\r\n                    let alert = await alertController.create({\r\n                        header: \"\",\r\n                        subHeader: \"\",\r\n                        message: language.get(this.state.lang, \"loginAccountNotFound\"),\r\n                        buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                    })\r\n        \r\n                    return alert.present()\r\n                }\r\n\r\n                let alert = await alertController.create({\r\n                    header: \"\",\r\n                    subHeader: \"\",\r\n                    message: language.get(this.state.lang, \"loginWrongCredentials\"),\r\n                    buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n                })\r\n\r\n                return alert.present()\r\n            }\r\n        }\r\n\r\n        await Plugins.Storage.set({ key: \"isLoggedIn\", value: \"true\" })\r\n        await Plugins.Storage.set({ key: \"userAPIKey\", value: res.data.apiKey })\r\n        await Plugins.Storage.set({ key: \"userEmail\", value: email })\r\n        await Plugins.Storage.set({ key: \"userMasterKeys\", value: JSON.stringify([utils.hashFn(password)]) })\r\n\r\n        window.customFunctions.dismissLoader(true)\r\n        window.customFunctions.dismissModal(true)\r\n        window.customFunctions.dismissLoader()\r\n\r\n        document.getElementById(\"login-email\").value = \"\"\r\n        document.getElementById(\"login-password\").value = \"\"\r\n        document.getElementById(\"login-2fa\").value = \"\"\r\n\r\n        return this.doSetup()\r\n    }\r\n\r\n    window.customFunctions.doRegister = async () => {\r\n        let email = document.getElementById(\"register-email\").value\r\n        let password = document.getElementById(\"register-password\").value\r\n        let passwordRepeat = document.getElementById(\"register-password-repeat\").value\r\n\r\n        if(!email || !password || !passwordRepeat){\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"registerInvalidInputs\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        try{\r\n            var res = await utils.apiRequest(\"POST\", \"/v1/register\", {\r\n                email,\r\n                password,\r\n                passwordRepeat\r\n            })\r\n        }\r\n        catch(e){\r\n            document.getElementById(\"register-password\").value = \"\"\r\n            document.getElementById(\"register-password-repeat\").value = \"\"\r\n\r\n            console.log(e)\r\n\r\n            window.customFunctions.dismissLoader()\r\n\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: language.get(this.state.lang, \"apiRequestError\"),\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        if(!res.status){\r\n            document.getElementById(\"register-password\").value = \"\"\r\n            document.getElementById(\"register-password-repeat\").value = \"\"\r\n\r\n            window.customFunctions.dismissLoader()\r\n\r\n            let message = \"\"\r\n\r\n            if(res.message.toLowerCase().indexOf(\"invalid email\") !== -1 || res.message.toLowerCase().indexOf(\"invalid password\") !== -1 || res.message.toLowerCase().indexOf(\"invalid email\") !== -1){\r\n                message = language.get(this.state.lang, \"registerInvalidFields\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"your password needs to be at least 10 characters long\") !== -1){\r\n                message = language.get(this.state.lang, \"registerPasswordAtLeast10Chars\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"passwords do not match\") !== -1){\r\n                message = language.get(this.state.lang, \"registerPasswordsDoNotMatch\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"invalid email\") !== -1){\r\n                message = language.get(this.state.lang, \"registerInvalidEmail\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"database error\") !== -1){\r\n                message = language.get(this.state.lang, \"apiRequestError\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"this email is already registered\") !== -1){\r\n                message = language.get(this.state.lang, \"registerEmailAlreadyRegistered\")\r\n            }\r\n            else if(res.message.toLowerCase().indexOf(\"we could not send an email at this time, please try again later\") !== -1){\r\n                message = language.get(this.state.lang, \"registerCouldNotSendEmail\")\r\n            }\r\n\r\n            let alert = await alertController.create({\r\n                header: \"\",\r\n                subHeader: \"\",\r\n                message: message,\r\n                buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n            })\r\n\r\n            return alert.present()\r\n        }\r\n\r\n        document.getElementById(\"register-email\").value = \"\"\r\n        document.getElementById(\"register-password\").value = \"\"\r\n        document.getElementById(\"register-password-repeat\").value = \"\"\r\n\r\n        window.customFunctions.dismissLoader()\r\n\r\n        let alert = await alertController.create({\r\n            header: \"\",\r\n            subHeader: \"\",\r\n            message: language.get(this.state.lang, \"registerSuccess\"),\r\n            buttons: [language.get(this.state.lang, \"alertOkButton\").toUpperCase()]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.openSettingsModal = async () => {\r\n        return this.openSettingsModal()\r\n    }\r\n\r\n    window.customFunctions.openEncryptionModal = async () => {\r\n        let appLang = this.state.lang\r\n        let appDarkMode = this.state.darkMode\r\n        let modalId = \"encryption-modal-\" + utils.generateRandomClassName()\r\n\r\n        customElements.define(modalId, class ModalContent extends HTMLElement {\r\n            connectedCallback(){\r\n                this.innerHTML = `\r\n                    <ion-header>\r\n                        <ion-toolbar>\r\n                            <ion-buttons slot=\"start\">\r\n                                <ion-button onClick=\"window.customFunctions.dismissModal()\">\r\n                                    <ion-icon slot=\"icon-only\" icon=\"` + Ionicons.arrowBack + `\"></ion-icon>\r\n                                </ion-button>\r\n                            </ion-buttons>\r\n                            <ion-title>\r\n                                ` + language.get(appLang, \"encryption\") + `\r\n                            </ion-title>\r\n                        </ion-toolbar>\r\n                    </ion-header>\r\n                    <ion-content style=\"--background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\" fullscreen>\r\n                        <ion-list>\r\n                            <ion-item-divider style=\"--background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\">\r\n                                <ion-label>\r\n                                    ` + language.get(appLang, \"encryptionModalHeader\") + `\r\n                                </ion-label>\r\n                            </ion-item-divider>\r\n                            <ion-item lines=\"none\" style=\"padding-top: 10px;\">\r\n                                ` + language.get(appLang, \"encryptionModalFirstText\") + `\r\n                            </ion-item>\r\n                            <ion-item-divider style=\"padding-top: 15px; --background: ` + (appDarkMode ? \"#1E1E1E\" : \"white\") + `\">\r\n                                <ion-label>\r\n                                    ` + language.get(appLang, \"encryptionModalHeaderHowItWorks\") + `\r\n                                </ion-label>\r\n                            </ion-item-divider>\r\n                            <ion-item lines=\"none\" style=\"padding-top: 10px;\">\r\n                                ` + language.get(appLang, \"encryptionModalHowItWorksText\") + `\r\n                            </ion-item>\r\n                        </ion-list>\r\n                    </ion-content>\r\n                `\r\n            }\r\n        })\r\n\r\n        let modal = await modalController.create({\r\n            component: modalId,\r\n            swipeToClose: true,\r\n            showBackdrop: false,\r\n            backdropDismiss: false,\r\n            cssClass: \"modal-fullscreen\"\r\n        })\r\n\r\n        return modal.present()\r\n    }\r\n\r\n    window.customFunctions.openHelpModal = async () => {\r\n        let actionSheet = await actionSheetController.create({\r\n            header: language.get(this.state.lang, \"help\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"support\"),\r\n                    icon: Ionicons.helpBuoyOutline,\r\n                    handler: () => {\r\n                        window.open(\"https://support.filen.io/\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"faq\"),\r\n                    icon: Ionicons.informationCircle,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/faq\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"tos\"),\r\n                    icon: Ionicons.informationCircleOutline,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/terms\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"privacyPolicy\"),\r\n                    icon: Ionicons.informationCircleOutline,\r\n                    handler: () => {\r\n                        window.open(\"https://filen.io/privacy\", \"_system\")\r\n\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    icon: \"close\",\r\n                    role: \"cancel\"\r\n                }\r\n            ]\r\n        })\r\n\r\n        return actionSheet.present()\r\n    }\r\n\r\n    window.customFunctions.queueFileUpload = this.queueFileUpload\r\n    window.customFunctions.queueFileDownload = this.queueFileDownload\r\n\r\n    window.customFunctions.openItemActionSheetFromJSON = (itemJSON) => {\r\n        let item = JSON.parse(window.atob(itemJSON))\r\n\r\n        return this.spawnItemActionSheet(item)\r\n    }\r\n\r\n    window.customFunctions.moveSelectedItems = () => {\r\n        return this.moveSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.trashSelectedItems = () => {\r\n        return this.trashSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.restoreSelectedItems = () => {\r\n        return this.restoreSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.removeSelectedItemsFromSharedIn = () => {\r\n        return this.removeSelectedItemsFromSharedIn()\r\n    }\r\n\r\n    window.customFunctions.stopSharingSelectedItems = () => {\r\n        return this.stopSharingSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.downloadSelectedItems = () => {\r\n        return this.downloadSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.storeSelectedItemsOffline = () => {\r\n        return this.storeSelectedItemsOffline()\r\n    }\r\n\r\n    window.customFunctions.shareSelectedItems = () => {\r\n        return this.shareSelectedItems()\r\n    }\r\n\r\n    window.customFunctions.settingsToggleDarkMode = async () => {\r\n        if(this.state.darkMode){\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"false\" })\r\n\r\n            document.getElementById(\"settings-dark-mode-toggle\").checked = false\r\n\r\n            return this.setState({\r\n                darkMode: false\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n        else{\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"true\" })\r\n\r\n            document.getElementById(\"settings-dark-mode-toggle\").checked = true\r\n\r\n            return this.setState({\r\n                darkMode: true\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n    }\r\n\r\n    window.customFunctions.loginToggleDarkMode = async () => {\r\n        if(this.state.darkMode){\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"false\" })\r\n\r\n            return this.setState({\r\n                darkMode: false\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n        else{\r\n            await Plugins.Storage.set({ key: \"darkMode\", value: \"true\" })\r\n\r\n            return this.setState({\r\n                darkMode: true\r\n            }, () => {\r\n                document.location.href = \"index.html\"\r\n            })\r\n        }\r\n    }\r\n\r\n    window.customFunctions.saveSettings = async (newSettings) => {\r\n        await Plugins.Storage.set({ key: \"settings\", value: JSON.stringify(newSettings) })\r\n\r\n        return this.setState({\r\n            settings: newSettings\r\n        })\r\n    }\r\n\r\n    window.customFunctions.toggleOnlyWifi = () => {\r\n        let newSettings = this.state.settings\r\n        let newVal = !newSettings.onlyWifi\r\n\r\n        newSettings.onlyWifi = newVal\r\n\r\n        document.getElementById(\"settings-only-wifi-toggle\").checked = !newVal\r\n\r\n        return window.customFunctions.saveSettings(newSettings)\r\n    }\r\n\r\n    window.customFunctions.logoutUser = async () => {\r\n        await Plugins.Storage.remove({ key: \"isLoggedIn\" })\r\n        await Plugins.Storage.remove({ key: \"userAPIKey\" })\r\n        await Plugins.Storage.remove({ key: \"userEmail\" })\r\n        await Plugins.Storage.remove({ key: \"userMasterKeys\" })\r\n        await Plugins.Storage.remove({ key: \"userPublicKey\" })\r\n        await Plugins.Storage.remove({ key: \"userPrivateKey\" })\r\n        await Plugins.Storage.remove({ key: \"offlineSavedFiles\" })\r\n        await Plugins.Storage.remove({ key: \"apiCache\" })\r\n\r\n        return document.location.href = \"index.html\"\r\n    }\r\n\r\n    window.customFunctions.doLogout = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"logoutAlertHeader\"),\r\n            message: language.get(this.state.lang, \"logoutConfirmation\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: () => {\r\n                        return window.customFunctions.logoutUser()\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.emptyTrash = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"emptyTrashHeader\"),\r\n            message: language.get(this.state.lang, \"emptyTrashWarning\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: async () => {\r\n                        let loading = await loadingController.create({\r\n                            message: \"\"\r\n                        })\r\n\r\n                        loading.present()\r\n\r\n                        try{\r\n                            var res = await utils.apiRequest(\"POST\", \"/v1/trash/empty\", {\r\n                                apiKey: this.state.userAPIKey\r\n                            })\r\n                        }\r\n                        catch(e){\r\n                            console.log(e)\r\n\r\n                            loading.dismiss()\r\n\r\n                            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                        }\r\n\r\n                        if(!res.status){\r\n                            console.log(res.message)\r\n\r\n                            loading.dismiss()\r\n\r\n                            return this.spawnToast(res.message)\r\n                        }\r\n\r\n                        loading.dismiss()\r\n\r\n                        this.updateItemList()\r\n\r\n                        return this.spawnToast(language.get(this.state.lang, \"trashEmptied\"))\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.editItemPublicLink = async (itemJSON, type) => {\r\n        let item = JSON.parse(window.atob(itemJSON))\r\n        let linkUUID = utils.uuidv4()\r\n\r\n        let loading = await loadingController.create({\r\n            message: \"\"\r\n        })\r\n    \r\n        loading.present()\r\n\r\n        try{\r\n            var res = await utils.apiRequest(\"POST\", \"/v1/link/edit\", {\r\n                apiKey: this.state.userAPIKey,\r\n                uuid: linkUUID,\r\n                fileUUID: item.uuid,\r\n                expiration: \"never\",\r\n                password: \"empty\",\r\n                passwordHashed: utils.hashFn(\"empty\"),\r\n                downloadBtn: \"enable\",\r\n                type: type\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n    \r\n            loading.dismiss()\r\n    \r\n            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n        }\r\n    \r\n        if(!res.status){\r\n            console.log(res.message)\r\n    \r\n            loading.dismiss()\r\n    \r\n            return this.spawnToast(res.message)\r\n        }\r\n\r\n        loading.dismiss()\r\n\r\n        document.getElementById(\"public-link-enabled-toggle\").checked = true\r\n        document.getElementById(\"public-link-input\").value = \"https://filen.io/d/\" + linkUUID + \"#!\" + item.key\r\n\r\n        if(type == \"enable\"){\r\n            document.getElementById(\"enable-public-link-content\").style.display = \"none\"\r\n            document.getElementById(\"public-link-enabled-content\").style.display = \"block\"\r\n        }\r\n        else{\r\n            document.getElementById(\"enable-public-link-content\").style.display = \"block\"\r\n            document.getElementById(\"public-link-enabled-content\").style.display = \"none\"\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    window.customFunctions.copyPublicLinkToClipboard = async () => {\r\n        if(!Capacitor.isNative){\r\n            return false\r\n        }\r\n\r\n        try{\r\n            let link = document.getElementById(\"public-link-input\").value\r\n\r\n            await Plugins.Clipboard.write({\r\n                url: link\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e)\r\n\r\n            return this.spawnToast(language.get(this.state.lang, \"couldNotCopyToClipboard\")) \r\n        }\r\n\r\n        return this.spawnToast(language.get(this.state.lang, \"copiedToClipboard\")) \r\n    }\r\n\r\n    window.customFunctions.clearThumbnailCache = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"settingsClearThumbnailCacheHeader\"),\r\n            message: language.get(this.state.lang, \"settingsClearThumbnailCacheInfo\"),\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: async () => {\r\n                        if(!Capacitor.isNative){\r\n                            return alert.dismiss()\r\n                        }\r\n\r\n                        let dirObj = {\r\n                            path: \"ThumbnailCache/\",\r\n                            directory: FilesystemDirectory.External\r\n                        }\r\n\r\n                        alert.dismiss()\r\n\r\n                        try{\r\n                            await Plugins.Filesystem.rmdir({\r\n                                path: dirObj.path,\r\n                                directory: dirObj.directory,\r\n                                recursive: true\r\n                            })\r\n\r\n                            window.customVariables.thumbnailCache = {}\r\n                            window.customVariables.thumbnailBlobCache = {}\r\n                            window.customVariables.lastThumbnailCacheLength = undefined\r\n\r\n                            window.customFunctions.saveThumbnailCache()\r\n                        }\r\n                        catch(e){\r\n                            console.log(e)\r\n                        }\r\n\r\n                        return this.spawnToast(language.get(this.state.lang, \"settingsClearThumbnailCacheDone\"))\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        return alert.present()\r\n    }\r\n\r\n    window.customFunctions.openOrderBy = async () => {\r\n        let alert = await alertController.create({\r\n            header: language.get(this.state.lang, \"orderBy\"),\r\n            inputs: [\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderByName\"),\r\n                    value: \"name\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"name\") !== -1 ? true : false)\r\n                },\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderBySize\"),\r\n                    value: \"size\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"size\") !== -1 ? true : false)\r\n                },\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderByDate\"),\r\n                    value: \"date\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"date\") !== -1 ? true : false)\r\n                },\r\n                {\r\n                    type: \"radio\",\r\n                    label: language.get(this.state.lang, \"orderByType\"),\r\n                    value: \"type\",\r\n                    checked: (window.customVariables.orderBy.indexOf(\"type\") !== -1 ? true : false)\r\n                }\r\n            ],\r\n            buttons: [\r\n                {\r\n                    text: language.get(this.state.lang, \"cancel\"),\r\n                    role: \"cancel\",\r\n                    handler: () => {\r\n                        return false\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"orderByReset\"),\r\n                    handler: () => {\r\n                        let sortedItems = utils.orderItemsByType(this.state.itemList, \"dateDesc\")\r\n\r\n                        window.customVariables.orderBy = \"nameAsc\"\r\n                        window.customVariables.itemList = sortedItems\r\n\r\n                        return this.setState({\r\n                            itemList: sortedItems\r\n                        }, () => {\r\n                            this.forceUpdate()\r\n                        })\r\n                    }\r\n                },\r\n                {\r\n                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                    handler: async (type) => {\r\n                        let alert = await alertController.create({\r\n                            header: language.get(this.state.lang, \"orderByDirection\"),\r\n                            inputs: [\r\n                                {\r\n                                    type: \"radio\",\r\n                                    label: language.get(this.state.lang, \"orderByDirectionAsc\"),\r\n                                    value: \"Asc\",\r\n                                    checked: (window.customVariables.orderBy.indexOf(\"Asc\") !== -1 ? true : false)\r\n                                },\r\n                                {\r\n                                    type: \"radio\",\r\n                                    label: language.get(this.state.lang, \"orderByDirectionDesc\"),\r\n                                    value: \"Desc\",\r\n                                    checked: (window.customVariables.orderBy.indexOf(\"Desc\") !== -1 ? true : false)\r\n                                }\r\n                            ],\r\n                            buttons: [\r\n                                {\r\n                                    text: language.get(this.state.lang, \"cancel\"),\r\n                                    role: \"cancel\",\r\n                                    handler: () => {\r\n                                        return false\r\n                                    }\r\n                                },\r\n                                {\r\n                                    text: language.get(this.state.lang, \"alertOkButton\"),\r\n                                    handler: (direction) => {\r\n                                        let typeAndDirection = type + direction\r\n\r\n                                        console.log(typeAndDirection)\r\n\r\n                                        let sortedItems = utils.orderItemsByType(this.state.itemList, typeAndDirection)\r\n                \r\n                                        window.customVariables.orderBy = typeAndDirection\r\n                                        window.customVariables.itemList = sortedItems\r\n                \r\n                                        return this.setState({\r\n                                            itemList: sortedItems\r\n                                        }, () => {\r\n                                            this.forceUpdate()\r\n                                        })\r\n                                    }\r\n                                }\r\n                            ]\r\n                        })\r\n\r\n                        return alert.present()\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n\r\n        window.customFunctions.dismissPopover()\r\n\r\n        return alert.present()\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}