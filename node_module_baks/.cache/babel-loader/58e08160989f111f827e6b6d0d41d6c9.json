{"ast":null,"code":"import _classCallCheck from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _wrapNativeSuper from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";import _regeneratorRuntime from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jan/Documents/filen/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import*as language from\"../utils/language\";import{toastController,actionSheetController,popoverController,alertController,loadingController}from\"@ionic/core\";import*as Ionicons from'ionicons/icons';import{Capacitor,Plugins,CameraResultType,CameraSource,CameraDirection}from\"@capacitor/core\";import*as workers from\"../utils/workers\";var utils=require(\"../utils/utils\");export function spawnToast(_x){return _spawnToast.apply(this,arguments);}function _spawnToast(){_spawnToast=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(message){var duration,toast,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:duration=_args.length>1&&_args[1]!==undefined?_args[1]:3000;if(!Capacitor.isNative){_context.next=17;break;}if(!(Math.floor(+new Date()/1000)>=window.customVariables.nextNativeToastAllowed)){_context.next=14;break;}window.customVariables.nextNativeToastAllowed=Math.floor(+new Date()/1000)+2;_context.prev=4;_context.next=7;return Plugins.Toast.show({text:message,duration:\"short\",position:\"bottom\"});case 7:_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](4);return _context.abrupt(\"return\",console.log(_context.t0));case 12:_context.next=15;break;case 14:return _context.abrupt(\"return\",false);case 15:_context.next=21;break;case 17:_context.next=19;return toastController.create({message:message,duration:duration});case 19:toast=_context.sent;return _context.abrupt(\"return\",toast.present());case 21:case\"end\":return _context.stop();}}},_callee,null,[[4,9]]);}));return _spawnToast.apply(this,arguments);}export function spawnMoveToast(_x2){return _spawnMoveToast.apply(this,arguments);}function _spawnMoveToast(){_spawnMoveToast=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(callback){var toast;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return toastController.create({message:language.get(this.state.lang,\"selectDestination\"),animated:false,buttons:[{text:language.get(this.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return callback(true);}},{text:language.get(this.state.lang,\"moveItem\"),handler:function handler(){return callback(false,utils.currentParentFolder());}}]});case 2:toast=_context2.sent;return _context2.abrupt(\"return\",toast.present());case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));return _spawnMoveToast.apply(this,arguments);}export function spawnRenamePrompt(_x3,_x4){return _spawnRenamePrompt.apply(this,arguments);}function _spawnRenamePrompt(){_spawnRenamePrompt=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item,callback){var name,nameEx,alert;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:name=item.name;if(name.indexOf(\".\")!==-1){nameEx=name.split(\".\");nameEx.pop();name=nameEx.join(\".\");}_context3.next=4;return alertController.create({header:item.type==\"file\"?language.get(this.state.lang,\"renameFile\"):language.get(this.state.lang,\"renameFolder\"),inputs:[{type:\"text\",id:\"rename-item-input\",name:\"rename-item-input\",value:name}],buttons:[{text:language.get(this.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return callback(true);}},{text:language.get(this.state.lang,\"alertOkButton\"),handler:function handler(inputs){return callback(false,inputs['rename-item-input']);}}]});case 4:alert=_context3.sent;_context3.next=7;return alert.present();case 7:setTimeout(function(){try{document.querySelector(\"ion-alert input\").focus();}catch(e){}},500);return _context3.abrupt(\"return\",true);case 9:case\"end\":return _context3.stop();}}},_callee3,this);}));return _spawnRenamePrompt.apply(this,arguments);}export function mainFabAction(){return _mainFabAction.apply(this,arguments);}function _mainFabAction(){_mainFabAction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var _this=this;var actionSheet;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return actionSheetController.create({buttons:[{text:language.get(this.state.lang,\"fabCreateFolder\"),icon:Ionicons.folderOpen,handler:function(){var _handler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var alert;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return alertController.create({header:language.get(_this.state.lang,\"newFolderName\"),inputs:[{type:\"text\",id:\"new-folder-name-input\",name:\"new-folder-name-input\",placeholder:language.get(_this.state.lang,\"newFolderNamePlaceholder\")}],buttons:[{text:language.get(_this.state.lang,\"cancel\"),role:\"cancel\",handler:function handler(){return false;}},{text:language.get(_this.state.lang,\"alertOkButton\"),handler:function(){var _handler2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(inputs){var name,parent,folderParent,folderUUID,loading;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:name=inputs['new-folder-name-input'];name=utils.removeIllegalCharsFromString(name);if(!(utils.checkIfNameIsBanned(name)||utils.folderNameRegex(name)||utils.fileNameValidationRegex(name))){_context5.next=4;break;}return _context5.abrupt(\"return\",_this.spawnToast(language.get(_this.state.lang,\"invalidFolderName\")));case 4:if(!(!name||typeof name!==\"string\")){_context5.next=6;break;}return _context5.abrupt(\"return\",false);case 6:if(!(name.length<=0)){_context5.next=8;break;}return _context5.abrupt(\"return\",false);case 8:parent=utils.currentParentFolder();folderParent=null;folderUUID=utils.uuidv4();if(parent!==\"base\"){folderParent=parent;}_context5.next=14;return loadingController.create({message:\"\"});case 14:loading=_context5.sent;loading.present();_this.dirExists(name,folderParent,/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(err,exists,existsUUID){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!err){_context4.next=4;break;}console.log(err);loading.dismiss();return _context4.abrupt(\"return\",_this.spawnToast(language.get(_this.state.lang,\"apiRequestError\")));case 4:if(!exists){_context4.next=7;break;}loading.dismiss();return _context4.abrupt(\"return\",_this.spawnToast(language.get(_this.state.lang,\"folderNameAlreadyExistsCreate\",true,[\"__NAME__\"],[name])));case 7:_context4.prev=7;if(!(parent==\"base\")){_context4.next=14;break;}_context4.next=11;return utils.apiRequest(\"POST\",\"/v1/dir/create\",{apiKey:_this.state.userAPIKey,uuid:folderUUID,name:utils.cryptoJSEncrypt(JSON.stringify({name:name}),_this.state.userMasterKeys[_this.state.userMasterKeys.length-1]),nameHashed:utils.hashFn(name.toLowerCase())});case 11:res=_context4.sent;_context4.next=17;break;case 14:_context4.next=16;return utils.apiRequest(\"POST\",\"/v1/dir/sub/create\",{apiKey:_this.state.userAPIKey,uuid:folderUUID,name:utils.cryptoJSEncrypt(JSON.stringify({name:name}),_this.state.userMasterKeys[_this.state.userMasterKeys.length-1]),nameHashed:utils.hashFn(name.toLowerCase()),parent:folderParent});case 16:res=_context4.sent;case 17:_context4.next=24;break;case 19:_context4.prev=19;_context4.t0=_context4[\"catch\"](7);console.log(_context4.t0);loading.dismiss();return _context4.abrupt(\"return\",_this.spawnToast(language.get(_this.state.lang,\"apiRequestError\")));case 24:if(res.status){_context4.next=28;break;}console.log(res.message);loading.dismiss();return _context4.abrupt(\"return\",_this.spawnToast(res.message));case 28:loading.dismiss();_this.spawnToast(language.get(_this.state.lang,\"folderCreated\",true,[\"__NAME__\"],[name]));clearTimeout(window.customVariables.reloadAfterActionTimeout);window.customVariables.reloadAfterActionTimeout=setTimeout(function(){_this.updateItemList();},500);case 32:case\"end\":return _context4.stop();}}},_callee4,null,[[7,19]]);}));return function(_x7,_x8,_x9){return _ref.apply(this,arguments);};}());case 17:case\"end\":return _context5.stop();}}},_callee5);}));function handler(_x6){return _handler2.apply(this,arguments);}return handler;}()}]});case 2:alert=_context6.sent;_context6.next=5;return alert.present();case 5:setTimeout(function(){try{document.querySelector(\"ion-alert input\").focus();}catch(e){}},500);return _context6.abrupt(\"return\",true);case 7:case\"end\":return _context6.stop();}}},_callee6);}));function handler(){return _handler.apply(this,arguments);}return handler;}()},{text:language.get(this.state.lang,\"fabTakeImage\"),icon:Ionicons.camera,handler:function(){var _handler3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var image;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(Capacitor.isNative){_context7.next=2;break;}return _context7.abrupt(\"return\",false);case 2:if(utils.currentParentFolder()==\"base\"){_this.routeTo(\"/base/default\");}_context7.prev=3;_context7.next=6;return Plugins.Camera.getPhoto({quality:100,allowEditing:false,resultType:CameraResultType.Base64,saveToGallery:false,source:CameraSource.Camera,direction:CameraDirection.Rear,presentationStyle:\"fullscreen\"});case 6:image=_context7.sent;_context7.next=13;break;case 9:_context7.prev=9;_context7.t0=_context7[\"catch\"](3);console.log(_context7.t0);return _context7.abrupt(\"return\",false);case 13:workers.convertBase64ToArrayBuffer(image.base64String,function(arrayBuffer){var blob=new Blob([arrayBuffer],{type:\"image/jpeg\"});blob.lastModifiedDate=new Date();blob.name=language.get(_this.state.lang,\"photo\")+\"_\"+new Date().toDateString().split(\" \").join(\"_\")+\"_\"+utils.unixTimestamp()+\".jpeg\";return _this.queueFileUpload(blob);});case 14:case\"end\":return _context7.stop();}}},_callee7,null,[[3,9]]);}));function handler(){return _handler3.apply(this,arguments);}return handler;}()},{text:language.get(this.state.lang,\"fabUploadFiles\"),icon:Ionicons.cloudUpload,handler:function(){var _handler4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(utils.currentParentFolder()==\"base\"){_this.routeTo(\"/base/default\");}return _context8.abrupt(\"return\",document.getElementById(\"file-input-dummy\").click());case 2:case\"end\":return _context8.stop();}}},_callee8);}));function handler(){return _handler4.apply(this,arguments);}return handler;}()},{text:language.get(this.state.lang,\"cancel\"),icon:Ionicons.close,handler:function handler(){return actionSheet.dismiss();}}]});case 2:actionSheet=_context9.sent;return _context9.abrupt(\"return\",actionSheet.present());case 4:case\"end\":return _context9.stop();}}},_callee9,this);}));return _mainFabAction.apply(this,arguments);}export function mainMenuPopover(_x5){return _mainMenuPopover.apply(this,arguments);}function _mainMenuPopover(){_mainMenuPopover=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(event){var customElementId,popover;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:event.persist();customElementId=utils.generateRandomClassName();window.customElements.define(customElementId,/*#__PURE__*/function(_HTMLElement){_inherits(ModalContent,_HTMLElement);var _super=_createSuper(ModalContent);function ModalContent(){_classCallCheck(this,ModalContent);return _super.apply(this,arguments);}_createClass(ModalContent,[{key:\"connectedCallback\",value:function connectedCallback(){this.innerHTML=\"\\n                <ion-list>\\n                    <ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.openOrderBy()\\\">\"+language.get(window.customVariables.lang,\"orderBy\")+\"</ion-item>\\n                    <ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.selectAllItems()\\\">\"+language.get(window.customVariables.lang,\"selectAll\")+\"</ion-item>\\n                    <ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.refreshItemList()\\\">\"+language.get(window.customVariables.lang,\"refresh\")+\"</ion-item>\\n                    <ion-item lines=\\\"none\\\" detail=\\\"false\\\" button onClick=\\\"window.customFunctions.dismissPopover()\\\">\"+language.get(window.customVariables.lang,\"close\")+\"</ion-item>\\n                </ion-list>\\n            \";}}]);return ModalContent;}(/*#__PURE__*/_wrapNativeSuper(HTMLElement)));_context10.next=5;return popoverController.create({component:customElementId,event:event});case 5:popover=_context10.sent;return _context10.abrupt(\"return\",popover.present());case 7:case\"end\":return _context10.stop();}}},_callee10);}));return _mainMenuPopover.apply(this,arguments);}","map":{"version":3,"sources":["/Users/jan/Documents/filen/app/src/components/spawn.js"],"names":["language","toastController","actionSheetController","popoverController","alertController","loadingController","Ionicons","Capacitor","Plugins","CameraResultType","CameraSource","CameraDirection","workers","utils","require","spawnToast","message","duration","isNative","Math","floor","Date","window","customVariables","nextNativeToastAllowed","Toast","show","text","position","console","log","create","toast","present","spawnMoveToast","callback","get","state","lang","animated","buttons","role","handler","currentParentFolder","spawnRenamePrompt","item","name","indexOf","nameEx","split","pop","join","header","type","inputs","id","value","alert","setTimeout","document","querySelector","focus","e","mainFabAction","icon","folderOpen","placeholder","removeIllegalCharsFromString","checkIfNameIsBanned","folderNameRegex","fileNameValidationRegex","length","parent","folderParent","folderUUID","uuidv4","loading","dirExists","err","exists","existsUUID","dismiss","apiRequest","apiKey","userAPIKey","uuid","cryptoJSEncrypt","JSON","stringify","userMasterKeys","nameHashed","hashFn","toLowerCase","res","status","clearTimeout","reloadAfterActionTimeout","updateItemList","camera","routeTo","Camera","getPhoto","quality","allowEditing","resultType","Base64","saveToGallery","source","direction","Rear","presentationStyle","image","convertBase64ToArrayBuffer","base64String","arrayBuffer","blob","Blob","lastModifiedDate","toDateString","unixTimestamp","queueFileUpload","cloudUpload","getElementById","click","close","actionSheet","mainMenuPopover","event","persist","customElementId","generateRandomClassName","customElements","define","innerHTML","HTMLElement","component","popover"],"mappings":"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","sourcesContent":["import * as language from \"../utils/language\"\r\nimport { toastController, actionSheetController, popoverController, alertController, loadingController } from \"@ionic/core\"\r\nimport * as Ionicons from 'ionicons/icons';\r\nimport { Capacitor, Plugins, CameraResultType, CameraSource, CameraDirection } from \"@capacitor/core\";\r\nimport * as workers from \"../utils/workers\"\r\n\r\nconst utils = require(\"../utils/utils\")\r\n\r\nexport async function spawnToast(message, duration = 3000){\r\n    if(Capacitor.isNative){\r\n        if(Math.floor((+new Date()) / 1000) >= window.customVariables.nextNativeToastAllowed){\r\n            window.customVariables.nextNativeToastAllowed = (Math.floor((+new Date()) / 1000) + 2)\r\n\r\n            try{\r\n                await Plugins.Toast.show({\r\n                    text: message,\r\n                    duration: \"short\",\r\n                    position: \"bottom\"\r\n                })\r\n            }\r\n            catch(e){\r\n                return console.log(e)\r\n            }\r\n        }\r\n        else{\r\n            return false\r\n        }\r\n    }\r\n    else{\r\n        let toast = await toastController.create({\r\n            message,\r\n            duration\r\n        })\r\n    \r\n        return toast.present()\r\n    }\r\n}\r\n\r\nexport async function spawnMoveToast(callback){\r\n    let toast = await toastController.create({\r\n        message: language.get(this.state.lang, \"selectDestination\"),\r\n        animated: false,\r\n        buttons: [\r\n            {\r\n                text: language.get(this.state.lang, \"cancel\"),\r\n                role: \"cancel\",\r\n                handler: () => {\r\n                    return callback(true)\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"moveItem\"),\r\n                handler: () => {\r\n                    return callback(false, utils.currentParentFolder())\r\n                }\r\n            }\r\n        ]\r\n    })\r\n\r\n    return toast.present()\r\n}\r\n\r\nexport async function spawnRenamePrompt(item, callback){\r\n    let name = item.name\r\n\r\n    if(name.indexOf(\".\") !== -1){\r\n        let nameEx = name.split(\".\")\r\n\r\n        nameEx.pop()\r\n\r\n        name = nameEx.join(\".\")\r\n    }\r\n\r\n    let alert = await alertController.create({\r\n        header: item.type == \"file\" ? language.get(this.state.lang, \"renameFile\") : language.get(this.state.lang, \"renameFolder\"),\r\n        inputs: [\r\n            {\r\n                type: \"text\",\r\n                id: \"rename-item-input\",\r\n                name: \"rename-item-input\",\r\n                value: name\r\n            }\r\n        ],\r\n        buttons: [\r\n            {\r\n                text: language.get(this.state.lang, \"cancel\"),\r\n                role: \"cancel\",\r\n                handler: () => {\r\n                    return callback(true)\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"alertOkButton\"),\r\n                handler: (inputs) => {\r\n                    return callback(false, inputs['rename-item-input'])\r\n                }\r\n            }\r\n        ]\r\n    })\r\n\r\n    await alert.present()\r\n\r\n    setTimeout(() => {\r\n        try{\r\n            document.querySelector(\"ion-alert input\").focus()\r\n        } catch(e){ }\r\n    }, 500)\r\n\r\n    return true\r\n}\r\n\r\nexport async function mainFabAction(){\r\n    let actionSheet = await actionSheetController.create({\r\n        buttons: [\r\n            {\r\n                text: language.get(this.state.lang, \"fabCreateFolder\"),\r\n                icon: Ionicons.folderOpen,\r\n                handler: async () => {\r\n                    let alert = await alertController.create({\r\n                        header: language.get(this.state.lang, \"newFolderName\"),\r\n                        inputs: [\r\n                            {\r\n                                type: \"text\",\r\n                                id: \"new-folder-name-input\",\r\n                                name: \"new-folder-name-input\",\r\n                                placeholder: language.get(this.state.lang, \"newFolderNamePlaceholder\")\r\n                            }\r\n                        ],\r\n                        buttons: [\r\n                            {\r\n                                text: language.get(this.state.lang, \"cancel\"),\r\n                                role: \"cancel\",\r\n                                handler: () => {\r\n                                    return false\r\n                                }\r\n                            },\r\n                            {\r\n                                text: language.get(this.state.lang, \"alertOkButton\"),\r\n                                handler: async (inputs) => {\r\n                                    let name = inputs['new-folder-name-input']\r\n\r\n                                    name = utils.removeIllegalCharsFromString(name)\r\n\r\n                                    if(utils.checkIfNameIsBanned(name) || utils.folderNameRegex(name) || utils.fileNameValidationRegex(name)){\r\n                                        return this.spawnToast(language.get(this.state.lang, \"invalidFolderName\"))\r\n                                    }\r\n\r\n                                    if(!name || typeof name !== \"string\"){\r\n                                        return false\r\n                                    }\r\n\r\n                                    if(name.length <= 0){\r\n                                        return false\r\n                                    }\r\n\r\n                                    let parent = utils.currentParentFolder()\r\n                                    let folderParent = null\r\n                                    let folderUUID = utils.uuidv4()\r\n\r\n                                    if(parent !== \"base\"){\r\n                                        folderParent = parent\r\n                                    }\r\n\r\n                                    let loading = await loadingController.create({\r\n                                        message: \"\"\r\n                                    })\r\n\r\n                                    loading.present()\r\n\r\n                                    this.dirExists(name, folderParent, async (err, exists, existsUUID) => {\r\n                                        if(err){\r\n                                            console.log(err)\r\n\r\n                                            loading.dismiss()\r\n                        \r\n                                            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                                        }\r\n                        \r\n                                        if(exists){\r\n                                            loading.dismiss()\r\n                        \r\n                                            return this.spawnToast(language.get(this.state.lang, \"folderNameAlreadyExistsCreate\", true, [\"__NAME__\"], [name]))\r\n                                        }\r\n\r\n                                        try{\r\n                                            if(parent == \"base\"){\r\n                                                var res = await utils.apiRequest(\"POST\", \"/v1/dir/create\", {\r\n                                                    apiKey: this.state.userAPIKey,\r\n                                                    uuid: folderUUID,\r\n                                                    name: utils.cryptoJSEncrypt(JSON.stringify({\r\n                                                        name: name\r\n                                                    }), this.state.userMasterKeys[this.state.userMasterKeys.length - 1]),\r\n                                                    nameHashed: utils.hashFn(name.toLowerCase())\r\n                                                })\r\n                                            }\r\n                                            else{\r\n                                                var res = await utils.apiRequest(\"POST\", \"/v1/dir/sub/create\", {\r\n                                                    apiKey: this.state.userAPIKey,\r\n                                                    uuid: folderUUID,\r\n                                                    name: utils.cryptoJSEncrypt(JSON.stringify({\r\n                                                        name: name\r\n                                                    }), this.state.userMasterKeys[this.state.userMasterKeys.length - 1]),\r\n                                                    nameHashed: utils.hashFn(name.toLowerCase()),\r\n                                                    parent: folderParent\r\n                                                })\r\n                                            }\r\n                                        }\r\n                                        catch(e){\r\n                                            console.log(e)\r\n\r\n                                            loading.dismiss()\r\n                        \r\n                                            return this.spawnToast(language.get(this.state.lang, \"apiRequestError\"))\r\n                                        }\r\n\r\n                                        if(!res.status){\r\n                                            console.log(res.message)\r\n\r\n                                            loading.dismiss()\r\n\r\n                                            return this.spawnToast(res.message)\r\n                                        }\r\n\r\n                                        loading.dismiss()\r\n\r\n                                        this.spawnToast(language.get(this.state.lang, \"folderCreated\", true, [\"__NAME__\"], [name]))\r\n\r\n                                        clearTimeout(window.customVariables.reloadAfterActionTimeout)\r\n\r\n                                        window.customVariables.reloadAfterActionTimeout = setTimeout(() => {\r\n                                            this.updateItemList()\r\n                                        }, 500)\r\n                                    })\r\n                                }\r\n                            }\r\n                        ]\r\n                    })\r\n                \r\n                    await alert.present()\r\n\r\n                    setTimeout(() => {\r\n                        try{\r\n                            document.querySelector(\"ion-alert input\").focus()\r\n                        } catch(e){ }\r\n                    }, 500)\r\n\r\n                    return true\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"fabTakeImage\"),\r\n                icon: Ionicons.camera,\r\n                handler: async () => {\r\n                    if(!Capacitor.isNative){\r\n                        return false\r\n                    }\r\n\r\n                    if(utils.currentParentFolder() == \"base\"){\r\n                        this.routeTo(\"/base/default\")\r\n                    }\r\n\r\n                    try{\r\n                        var image = await Plugins.Camera.getPhoto({\r\n                            quality: 100,\r\n                            allowEditing: false,\r\n                            resultType: CameraResultType.Base64,\r\n                            saveToGallery: false,\r\n                            source: CameraSource.Camera,\r\n                            direction: CameraDirection.Rear,\r\n                            presentationStyle: \"fullscreen\"\r\n                        })\r\n                    }\r\n                    catch(e){\r\n                        console.log(e)\r\n\r\n                        return false\r\n                    }\r\n\r\n                    workers.convertBase64ToArrayBuffer(image.base64String, (arrayBuffer) => {\r\n                        let blob = new Blob([arrayBuffer], {\r\n                            type: \"image/jpeg\"\r\n                        })\r\n\r\n                        blob.lastModifiedDate = new Date()\r\n                        blob.name = language.get(this.state.lang, \"photo\") + \"_\" + new Date().toDateString().split(\" \").join(\"_\") + \"_\" + utils.unixTimestamp() + \".jpeg\"\r\n\r\n                        return this.queueFileUpload(blob)\r\n                    })\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"fabUploadFiles\"),\r\n                icon: Ionicons.cloudUpload,\r\n                handler: async () => {\r\n                    if(utils.currentParentFolder() == \"base\"){\r\n                        this.routeTo(\"/base/default\")\r\n                    }\r\n\r\n                    return document.getElementById(\"file-input-dummy\").click()\r\n                }\r\n            },\r\n            {\r\n                text: language.get(this.state.lang, \"cancel\"),\r\n                icon: Ionicons.close,\r\n                handler: () => {\r\n                    return actionSheet.dismiss()\r\n                }\r\n            }\r\n        ]\r\n    })\r\n\r\n    return actionSheet.present()\r\n}\r\n\r\nexport async function mainMenuPopover(event){\r\n    event.persist()\r\n\r\n    let customElementId = utils.generateRandomClassName()\r\n\r\n    window.customElements.define(customElementId, class ModalContent extends HTMLElement {\r\n        connectedCallback(){\r\n            this.innerHTML = `\r\n                <ion-list>\r\n                    <ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.openOrderBy()\">` + language.get(window.customVariables.lang, \"orderBy\") + `</ion-item>\r\n                    <ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.selectAllItems()\">` + language.get(window.customVariables.lang, \"selectAll\") + `</ion-item>\r\n                    <ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.refreshItemList()\">` + language.get(window.customVariables.lang, \"refresh\") + `</ion-item>\r\n                    <ion-item lines=\"none\" detail=\"false\" button onClick=\"window.customFunctions.dismissPopover()\">` + language.get(window.customVariables.lang, \"close\") + `</ion-item>\r\n                </ion-list>\r\n            `\r\n        }\r\n    })\r\n\r\n    let popover = await popoverController.create({\r\n        component: customElementId,\r\n        event: event\r\n    })\r\n\r\n    return popover.present()\r\n}"]},"metadata":{},"sourceType":"module"}